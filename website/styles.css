

/* Over the recommended team size (soft limit) */
.team-list-count.pill-overboard{
  border-color: rgba(239, 68, 68, 0.70);
  background: rgba(239, 68, 68, 0.18);
  color: rgba(239, 68, 68, 1);
  box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.18);
}
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --bg: #09090b;
  --surface: #131316;
  --surface2: #1a1a1f;
  /* Solid card surface used for modals + elevated panels */
  --card: #141418;
  /* Default (neutral) outlines. Team color outline is handled separately via --team-glow. */
  --border: #34343d;
  --text: #fff;
  --text-dim: #71717a;
  --accent: #3b82f6;
  --green: #22c55e;
  --gold: #facc15;
  --red: #ef4444;
  /* Consistent control sizing (matches header name box) */
  --namebox-w: 160px;
  /* Team theme (set dynamically) */
  --team-accent: transparent;
  --team-glow: rgba(59,130,246,0);

  /* Derived design tokens */
  --panel: var(--surface2);
  --border-soft: rgba(255,255,255,0.10);
  --surface-glass: rgba(255,255,255,0.06);
  --shadow-lg: 0 18px 50px rgba(0,0,0,0.35);
  --shadow-md: 0 8px 24px rgba(0,0,0,0.28);
  --shadow-sm: 0 6px 16px rgba(0,0,0,0.20);
  --focus-ring: 0 0 0 3px rgba(59,130,246,0.35);

  /* Slow, smooth universal reveal/select animations */
  --card-reveal-duration: 4.8s;
  --card-select-duration: 3.6s;
  --card-reveal-ease: cubic-bezier(0.16, 1, 0.3, 1);


  /* In-game markings (card tags) */
  --tag-yes-bg: rgba(34, 197, 94, 0.90);
  --tag-yes-fg: #fff;
  --tag-maybe-bg: rgba(250, 204, 21, 0.90);
  --tag-maybe-fg: #111;
  --tag-no-bg: rgba(239, 68, 68, 0.90);
  --tag-no-fg: #fff;
  --tag-border: rgba(255, 255, 255, 0.18);
  --tag-shadow: 0 2px 10px rgba(0,0,0,0.35);
}


body.light-mode {
  /* Soft blue-gray palette inspired by Codenames Online */
  --bg: #dfe6ee;
  --surface: #edf1f6;
  --surface2: #e4e9f0;
  --card: #f4f6f9;
  --border: #bfc9d4;
  --text: #1c2d3f;
  --text-dim: #5e7389;

  /* Warmer accent colors for light backgrounds */
  --accent: #2d7dd2;
  --green: #1a9a48;
  --gold: #b87514;
  --red: #c93c2b;

  --panel: #eaeff5;
  --border-soft: rgba(40, 70, 100, 0.12);
  --surface-glass: rgba(40, 70, 100, 0.05);
  --shadow-lg: 0 18px 50px rgba(30, 55, 85, 0.14);
  --shadow-md: 0 8px 24px rgba(30, 55, 85, 0.12);
  --shadow-sm: 0 4px 14px rgba(30, 55, 85, 0.10);
  --focus-ring: 0 0 0 3px rgba(45, 125, 210, 0.25);

  /* Light mode game colors (richer/warmer for legibility) */
  --game-red: #c93c2b;
  --game-red-bg: rgba(201, 60, 43, 0.13);
  --game-red-border: rgba(201, 60, 43, 0.38);
  --game-blue: #1a7fb5;
  --game-blue-bg: rgba(26, 127, 181, 0.13);
  --game-blue-border: rgba(26, 127, 181, 0.38);
  --game-neutral: #8a7e6e;
  --game-neutral-bg: rgba(138, 126, 110, 0.14);
  --game-neutral-border: rgba(138, 126, 110, 0.35);
  --game-assassin: #2a2a2f;
  --game-assassin-bg: rgba(42, 42, 47, 0.82);
  --game-assassin-border: rgba(42, 42, 47, 0.45);

  /* In-game markings tuned for light backgrounds */
  --tag-yes-bg: rgba(26, 154, 72, 0.88);
  --tag-maybe-bg: rgba(184, 117, 20, 0.86);
  --tag-no-bg: rgba(201, 60, 43, 0.88);
  --tag-yes-fg: #fff;
  --tag-maybe-fg: #fff;
  --tag-no-fg: #fff;
  --tag-border: rgba(28, 45, 63, 0.18);
  --tag-shadow: 0 2px 8px rgba(30, 55, 85, 0.14);
}

.game-card .card-checkmark{
  position:absolute;
  top:6px;
  right:6px;
  width:22px;
  height:22px;
  border-radius:7px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: var(--accent);
  color: #fff;
  font-size: 14px;
  font-weight: 900;
  opacity: 0;
  transform: scale(0.92);
  transition: opacity 0.12s ease, transform 0.12s ease;
  /* Only clickable when the card is selected (see .pending-select below) */
  pointer-events:none;
}

.game-card.pending-select .card-checkmark{
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
  cursor: pointer;
}

.game-card.pending-select:not(.revealed):not(.disabled){
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(59,130,246,0.22);
}

.game-card:hover:not(.revealed):not(.disabled) {
  box-shadow: var(--shadow-sm);
}


/*
  IMPORTANT (iOS Safari): prefer dynamic viewport units (dvh) when available.
  The previous ordering accidentally forced 100vh to win, which can prevent
  inner panels from scrolling fully when the browser chrome expands/collapses.
*/
html, body {
  height: 100vh;   /* fallback */
  height: 100dvh;  /* preferred */
  overflow: hidden;
}

body {
  font-family: 'Space Grotesk', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  font-size: 15px;
  line-height: 1.35;
  position: relative;
}

/* Subtle team glow frame */
body.tournament.has-team-color::after{
  content:"";
  position: fixed;
  /* Hug the viewport edges with squared corners */
  inset: 1px;
  border-radius: 0px;
  /* Brighter team-colored outline */
  border: 1px solid var(--team-glow);
  pointer-events:none;
  z-index: 998;
  opacity: 0.72;
}

/* Team accent text (only when you're on a team) */
body.tournament.has-team-color .team-accent{ color: var(--team-accent); }
body:not(.tournament) .team-accent{ color: var(--text-dim); }

/* Show team header pill only while in Tournament */
body:not(.tournament) #header-team-pill{ display:none !important; }

/* Tournament Home should not show the name/logout card (name lives in header + launch screen) */
body.tournament #panel-home #name-card{ display:none !important; }

/* In Tournament mode, the Play tab should not offer Quick Play selection */
body.tournament #play-mode-select{ display:none !important; }

.app {
  height: 100vh;   /* fallback */
  height: 100dvh;  /* preferred */
  display: flex;
  flex-direction: column;
  /* Layout constants (used to keep the top strip ALWAYS visible) */
  --header-h: 64px;
  --tabs-h: 54px;
  /* Don't add bottom safe-area padding here.
     Mobile tabs and drawers already account for the safe area.
     Double-padding can push the bottom tab bar off-screen on iOS Safari. */
  padding-bottom: 0;
}

/* ==================== DESKTOP ==================== */
@media (min-width: 769px) {
  /* On desktop we use a sleek top tab bar (not the mobile bottom tabs) */
  .mobile-tabs { display: none; }

  .desktop-tabs {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    position: fixed;
    top: var(--header-h);
    left: 0;
    right: 0;
    z-index: 110;
  }

  .desktop-tabs .tab {
    appearance: none;
    border: 1px solid transparent;
    background: transparent;
    color: var(--text-dim);
    padding: 10px 14px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 0.2px;
    cursor: pointer;
    transition: background 0.15s, border-color 0.15s, color 0.15s;
  }

  .desktop-tabs .tab:hover {
    background: var(--surface2);
    border-color: var(--border);
    color: var(--text);
  }

  .desktop-tabs .tab.active {
    background: rgba(59,130,246,0.14);
    border-color: color-mix(in srgb, var(--accent) 38%, var(--border));
    color: var(--text);
  }

  .mobile-header {
    display: none !important;
  }

  .app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 32px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 120;
  }

  .logo {
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 2px;
    cursor: pointer;
    user-select: none;
  }

  /* (header-center removed for desktop) */

  .prize-badge {
    background: var(--gold);
    color: #000;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
  }

  .main-content {
    flex: 1;
    position: relative;
    overflow: hidden;
    background: var(--bg);
    /* IMPORTANT:
       Panels are position:absolute; padding on the parent does NOT offset
       absolutely positioned children (they anchor to the padding edge).
       So we offset the panels themselves (see .panel below). */
    padding-top: 0;
    padding-bottom: 0;
    /* Isolate stacking context to prevent Chrome GPU compositing artifacts
       from backdrop-filter and transform layers leaking across siblings. */
    isolation: isolate;
  }

  .panel {
    position: absolute;
    /* Offset all panels below the fixed header + desktop tab strip */
    top: calc(var(--header-h) + var(--tabs-h));
    left: 0;
    right: 0;
    bottom: 0;
    display: none;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    background: var(--bg);
    /* Prevent Chrome compositing artifacts from transforms in child elements. */
    contain: paint;
  }

  .panel.active {
    display: block;
  }

  .panel-inner {
    width: 100%;
    max-width: 760px;
    margin: 0 auto;
    padding: 32px 28px;
    min-height: 100%;
    display: flex;
    flex-direction: column;
    overflow: visible;

  }
  /* Info Panel */
  .panel-info {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .panel-info .panel-inner {
    text-align: center;
    justify-content: center;
    align-items: center;
  }

  .panel-info h1 {
    font-size: 26px;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .subtitle {
    color: var(--text-dim);
    font-size: 13px;
    margin-bottom: 24px;
  }

  .spots-display {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px 40px;
    margin-bottom: 24px;
  }

  .spots-number {
    font-size: 52px;
    font-weight: 700;
    color: var(--green);
    line-height: 1;
  }

  .spots-label {
    color: var(--text-dim);
    font-size: 13px;
    margin-top: 4px;
  }


.spots-display.overboard{
  border-color: rgba(239, 68, 68, 0.45);
  background: rgba(239, 68, 68, 0.06);
}

.spots-display.overboard .spots-number{
  color: rgba(239, 68, 68, 1);
}

  .info-stats {
    display: flex;
    gap: 24px;
  }

  .info-stat {
    text-align: center;
  }

  .info-stat .val {
    display: block;
    font-size: 24px;
    font-weight: 600;
  }

  .info-stat .lbl {
    font-size: 11px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* Register Panel */
  .panel-register h2 {
    font-size: 17px;
    font-weight: 600;
    margin-bottom: 20px;
  }

  .reg-form {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .input {
    width: 100%;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 11px 13px;
    color: var(--text);
    font-family: inherit;
    font-size: 13px;
    margin-bottom: 12px;
    transition: border-color 0.2s;
  }

  .input:focus {
    outline: none;
    border-color: var(--accent);
  }

  .input::placeholder {
    color: var(--text-dim);
  }

  .players-grid {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 16px;
    overflow-y: auto;
  }

  .player-input {
    display: grid;
    grid-template-columns: 28px 1fr 1fr;
    gap: 8px;
    align-items: center;
    background: var(--surface);
    padding: 10px;
    border-radius: 8px;
  }

  .player-num {
    width: 28px;
    height: 28px;
    background: var(--accent);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
  }

  .player-input .input {
    margin-bottom: 0;
    padding: 10px 12px;
  }

  .btn-submit {
    background: var(--accent);
    color: white;
    border: none;
    padding: 14px;
    border-radius: 10px;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s;
  }

  .btn-submit:hover {
    opacity: 0.9;
  }

  .btn-submit:disabled {
    background: var(--surface2);
    color: var(--text-dim);
    cursor: not-allowed;
  }

  /* Teams Panel */
  .panel-teams h2 {
    font-size: 17px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .panel-teams h2 span {
    color: var(--accent);
  }

  .teams-list {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .team-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px;
  }

  .team-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }

  .team-card-header h3 {
    font-size: 15px;
    font-weight: 600;
  }

  .team-slot {
    background: var(--accent);
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
  }

  .team-players {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .player-row {
    display: flex;
    justify-content: space-between;
    background: var(--surface2);
    padding: 8px 10px;
    border-radius: 6px;
    font-size: 12px;
  }

  .player-row .discord {
    color: var(--text-dim);
  }

  .player-row { align-items: center; gap: 10px; }
  .player-left { display: flex; align-items: center; justify-content: space-between; gap: 10px; width: 100%; min-width: 0; }
  .player-name { font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .icon-btn {
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    width: 30px;
    height: 30px;
    border-radius: 10px;
    font-weight: 900;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  .icon-btn:hover { filter: brightness(1.1); }
  .icon-btn.danger {
    border-color: rgba(239,68,68,0.45);
    background: rgba(239,68,68,0.12);
    color: var(--text);
  }

  .team-name-wrap { display: flex; align-items: center; min-width: 0; }
  .team-name.editable { cursor: text; border-bottom: 1px dashed rgba(255,255,255,0.25); }
  .team-name-input { max-width: 260px; height: 34px; padding: 6px 10px; font-weight: 800; }

  .team-owner-controls { margin-top: 14px; }
  .owner-actions-row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
  .team-card.my-team {
    position: relative;
    overflow: visible;
    box-shadow: 0 0 0 1px rgba(255,255,255,0.12), 0 10px 30px rgba(0,0,0,0.25);
  }

  .empty-state {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    font-size: 13px;
  }

  .error-box {
    background: rgba(239,68,68,0.1);
    border: 1px solid var(--red);
    border-radius: 8px;
    padding: 10px 14px;
    margin-bottom: 12px;
  }

  .error-box ul {
    list-style: none;
    color: #fca5a5;
    font-size: 13px;
  }

  .closed-msg {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 40px;
    text-align: center;
    color: var(--text-dim);
  }
}

/* ==================== MOBILE ==================== */
@media (max-width: 768px) {
  .app{ --header-h: 54px; --tabs-h: 0px; }
  .app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    /* Add safe-area padding so iOS notch doesn't cover the top band */
    padding: calc(12px + env(safe-area-inset-top)) 16px 12px 16px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 120;
  }

  .desktop-tabs {
    display: none;
  }

  .main-content {
    flex: 1;
    position: relative;
    overflow: hidden;
    /* Panels are position:absolute; padding on the parent does NOT offset
       absolutely positioned children. We offset the panels themselves. */
    padding-top: 0;
    padding-bottom: 0;
  }

  .panel {
    position: absolute;
    /* Offset all panels below the fixed mobile header and above the fixed
       bottom tab bar (plus iOS safe areas). */
    /* Use the measured header height. The header itself already includes
       env(safe-area-inset-top) padding on iOS, so we do not add it again here. */
    top: var(--header-h);
    left: 0;
    right: 0;
    bottom: calc(72px + env(safe-area-inset-bottom));
    display: none;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    /* iOS momentum scroll can get "stuck" when nested; forcing a composited
       layer helps on some devices. */
    will-change: scroll-position;
  }

  .panel.active {
    display: block;
  }

  .panel-inner {
    padding: 20px;
    padding-bottom: calc(92px + env(safe-area-inset-bottom));
    min-height: 100%;
    display: flex;
    flex-direction: column;
  }

  /* Players page: add a bit more bottom breathing room on iOS so
     the last rows are reachable above the browser chrome. */
  #panel-players .panel-inner{
    /* Extra top padding so you can scroll the list fully above the fixed header strip. */
    padding-top: 28px;
    padding-bottom: calc(132px + env(safe-area-inset-bottom));
  }

  .mobile-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  }

  .mobile-header .logo {
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 2px;
  }

  .mobile-header .prize-badge {
    background: var(--gold);
    color: #000;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
  }

  /* Info Panel Mobile */
  .panel-info .panel-inner {
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .panel-info h1 {
    font-size: 26px;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .subtitle {
    color: var(--text-dim);
    font-size: 13px;
    margin-bottom: 28px;
  }

  .spots-display {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px 48px;
    margin-bottom: 28px;
  }

  .spots-number {
    font-size: 58px;
    font-weight: 700;
    color: var(--green);
    line-height: 1;
  }

  .spots-label {
    color: var(--text-dim);
    font-size: 13px;
    margin-top: 4px;
  }

  .info-stats {
    display: flex;
    gap: 32px;
  }

  .info-stat {
    text-align: center;
  }

  .info-stat .val {
    display: block;
    font-size: 22px;
    font-weight: 600;
  }

  .info-stat .lbl {
    font-size: 10px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* Register Panel Mobile */
  .panel-register h2 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .reg-form {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .input {
    width: 100%;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 12px 14px;
    color: var(--text);
    font-family: inherit;
    font-size: 15px;
    margin-bottom: 12px;
  }

  .input:focus {
    outline: none;
    border-color: var(--accent);
  }

  .input::placeholder {
    color: var(--text-dim);
  }

  .players-grid {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 16px;
  }

  .player-input {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    background: var(--surface);
    padding: 12px;
    border-radius: 10px;
  }

  .player-num {
    width: 32px;
    height: 32px;
    background: var(--accent);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-weight: 600;
    flex-shrink: 0;
  }

  .player-input .input {
    flex: 1;
    min-width: calc(50% - 24px);
    margin-bottom: 0;
    padding: 12px;
  }

  .btn-submit {
    background: var(--accent);
    color: white;
    border: none;
    padding: 16px;
    border-radius: 12px;
    font-family: inherit;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: auto;
  }

  .btn-submit:disabled {
    background: var(--surface2);
    color: var(--text-dim);
  }

  /* Teams Panel Mobile */
  .panel-teams h2 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .panel-teams h2 span {
    color: var(--accent);
  }

  .teams-list {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .team-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
  }

  .team-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }

  .team-card-header h3 {
    font-size: 16px;
    font-weight: 600;
  }

  .team-slot {
    background: var(--accent);
    color: white;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
  }

  .team-players {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .player-row {
    display: flex;
    justify-content: space-between;
    background: var(--surface2);
    padding: 10px 12px;
    border-radius: 8px;
    font-size: 14px;
  }

  .player-row .discord {
    color: var(--text-dim);
  }

  .empty-state {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
  }

  .error-box {
    background: rgba(239,68,68,0.1);
    border: 1px solid var(--red);
    border-radius: 10px;
    padding: 12px 16px;
    margin-bottom: 12px;
  }

  .error-box ul {
    list-style: none;
    color: #fca5a5;
    font-size: 14px;
  }

  .closed-msg {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    font-size: 18px;
  }

  /* Mobile Tabs */
  .mobile-tabs {
    display: flex;
    background: var(--surface);
    border-top: 1px solid var(--border);
    padding: 8px 0;
    padding-bottom: calc(8px + env(safe-area-inset-bottom));
    /* Keep the tab bar always visible on mobile */
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 60;
  }

  .tab {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    background: none;
    border: none;
    color: var(--text-dim);
    padding: 8px;
    cursor: pointer;
    transition: color 0.2s;
  }

  .tab svg {
    width: 22px;
    height: 22px;
  }

  .tab span {
    font-size: 11px;
    font-weight: 500;
  }

  .tab.active {
    color: var(--accent);
  }
}

/* =========================
   Style-specific loading animations
   - Dark keeps the existing loader
   - Light/Cozy/Codenames Online each get their own unique loader (desktop + mobile)
========================= */
.auth-loading-light-desktop,
.auth-loading-light-mobile,
.auth-loading-cozy-desktop,
.auth-loading-cozy-mobile,
.auth-loading-online-desktop,
.auth-loading-online-mobile {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 28px;
}

/* Light mode swaps out the default loader */
body.light-mode .auth-loading-desktop,
body.light-mode .auth-loading-mobile {
  display: none !important;
}
body.light-mode .auth-loading-light-desktop {
  display: flex;
}
@media (max-width: 768px) {
  body.light-mode .auth-loading-light-desktop { display: none; }
  body.light-mode .auth-loading-light-mobile { display: flex; }
}

body.cozy-mode .auth-loading-desktop,
body.cozy-mode .auth-loading-mobile,
body.og-mode .auth-loading-desktop,
body.og-mode .auth-loading-mobile {
  display: none !important;
}

body.cozy-mode .auth-loading-cozy-desktop,
body.og-mode .auth-loading-online-desktop {
  display: flex;
}

@media (max-width: 768px) {
  body.cozy-mode .auth-loading-cozy-desktop,
  body.og-mode .auth-loading-online-desktop {
    display: none;
  }
  body.cozy-mode .auth-loading-cozy-mobile,
  body.og-mode .auth-loading-online-mobile {
    display: flex;
  }
}

/* Cozy: warm tiles that gently "shuffle" */
/* Light: conveyor belt of word cards (desktop) */
.light-conveyor {
  width: 280px;
  max-width: 82vw;
  height: 86px;
  border-radius: 18px;
  border: 1px solid rgba(0,0,0,0.12);
  background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(245,245,250,0.8));
  box-shadow: 0 18px 60px rgba(0,0,0,0.18);
  overflow: hidden;
  position: relative;
}
.light-conveyor::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(255,255,255,0.92), rgba(255,255,255,0) 18%, rgba(255,255,255,0) 82%, rgba(255,255,255,0.92));
  pointer-events: none;
}
.light-track {
  display: flex;
  gap: 12px;
  padding: 18px 16px;
  align-items: center;
  width: max-content;
  animation: lightConveyor 1.9s linear infinite;
}
.light-wordcard {
  width: 84px;
  height: 44px;
  border-radius: 14px;
  border: 1px solid rgba(0,0,0,0.10);
  background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.72));
  box-shadow: 0 10px 22px rgba(0,0,0,0.10);
  position: relative;
  overflow: hidden;
}
.light-wordcard::after {
  content: '';
  position: absolute;
  top: -40%;
  left: -40%;
  width: 70%;
  height: 200%;
  background: linear-gradient(90deg, rgba(59,130,246,0), rgba(59,130,246,0.18), rgba(59,130,246,0));
  transform: rotate(20deg);
  animation: lightShimmer 1.6s ease-in-out infinite;
  animation-delay: calc(var(--i) * 0.12s);
}
@keyframes lightConveyor {
  from { transform: translateX(0); }
  to { transform: translateX(-168px); }
}
@keyframes lightShimmer {
  0%, 55% { transform: translateX(-40%) rotate(20deg); opacity: 0; }
  70% { opacity: 1; }
  100% { transform: translateX(180%) rotate(20deg); opacity: 0; }
}

/* Light: dashed spinner (mobile) */
.light-spinner {
  width: 106px;
  height: 106px;
  position: relative;
}
.light-spinner-ring {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  border: 3px dashed rgba(0,0,0,0.20);
  animation: lightSpin 1.1s linear infinite;
}
.light-spinner-core {
  position: absolute;
  inset: 18px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(59,130,246,0.35), rgba(59,130,246,0.05) 60%, rgba(0,0,0,0) 70%);
  border: 1px solid rgba(0,0,0,0.12);
  animation: lightPulse 1.2s ease-in-out infinite;
}
@keyframes lightSpin { to { transform: rotate(360deg); } }
@keyframes lightPulse {
  0%, 100% { transform: scale(1); opacity: 0.8; }
  50% { transform: scale(1.06); opacity: 1; }
}

/* Cozy: dealing a warm deck */
.cozy-deck {
  width: 220px;
  height: 110px;
  position: relative;
  perspective: 900px;
}
.cozy-deck.mobile { width: 180px; height: 98px; }
.cozy-card {
  position: absolute;
  width: 130px;
  height: 78px;
  left: 50%;
  top: 18px;
  transform: translateX(-50%);
  border-radius: 16px;
  border: 1px solid rgba(255,232,205,0.22);
  background: linear-gradient(180deg, rgba(255,248,235,0.14), rgba(0,0,0,0.22));
  box-shadow: 0 16px 46px rgba(0,0,0,0.35);
  animation: cozyDeal 1.8s cubic-bezier(0.2, 0.8, 0.2, 1) infinite;
  animation-delay: calc(var(--i) * 0.16s);
}
.cozy-deck.mobile .cozy-card {
  width: 112px;
  height: 70px;
  top: 16px;
}
.cozy-card::after {
  content: '';
  position: absolute;
  inset: 14px 18px;
  border-radius: 10px;
  background: linear-gradient(90deg, rgba(255,232,205,0.0), rgba(255,232,205,0.18), rgba(255,232,205,0.0));
  opacity: 0.55;
  filter: blur(0.3px);
}
.cozy-glow {
  position: absolute;
  inset: -12px;
  border-radius: 26px;
  background: radial-gradient(circle at 40% 40%, rgba(255,183,77,0.22), rgba(255,183,77,0.0) 60%);
  filter: blur(2px);
  opacity: 0.9;
  animation: cozyGlow 1.6s ease-in-out infinite;
}
@keyframes cozyDeal {
  0% {
    transform: translateX(-50%) translateY(0) rotate(0deg);
    opacity: 0.0;
  }
  18% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) rotate(0deg);
  }
  48% {
    transform: translateX(calc(-50% + 34px)) translateY(-18px) rotate(6deg);
  }
  72% {
    transform: translateX(calc(-50% - 34px)) translateY(-6px) rotate(-4deg);
  }
  100% {
    transform: translateX(-50%) translateY(0) rotate(0deg);
    opacity: 0.0;
  }
}
@keyframes cozyGlow {
  0%, 100% { transform: scale(1); opacity: 0.75; }
  50% { transform: scale(1.06); opacity: 1; }
}

/* Codenames Online style (OG): dealing cards w/ team colors */
.online-deal{
  width: 260px;
  max-width: 82vw;
  height: 104px;
  position: relative;
  border-radius: 20px;
  padding: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.28));
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 20px 70px rgba(0,0,0,0.42);
  overflow: hidden;
  perspective: 900px;
}
.online-deal.mobile{
  width: 200px;
  height: 96px;
  border-radius: 18px;
}

.online-deal-glow{
  position: absolute;
  inset: -60px;
  background:
    radial-gradient(circle at 28% 40%, rgba(59,130,246,0.18), rgba(59,130,246,0) 50%),
    radial-gradient(circle at 68% 55%, rgba(239,68,68,0.16), rgba(239,68,68,0) 55%);
  filter: blur(10px);
  opacity: 0.95;
  pointer-events: none;
}

.online-deal-card{
  --c: rgba(180,180,180,0.55);
  position: absolute;
  top: 50%;
  left: 18px;
  width: 128px;
  height: 64px;
  border-radius: 16px;
  transform: translateY(-50%);
  background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(0,0,0,0.32));
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 18px 42px rgba(0,0,0,0.44);
  transform-style: preserve-3d;
  animation: onlineDealCard 1.85s cubic-bezier(0.2, 0.8, 0.2, 1) infinite;
  animation-delay: var(--d, 0s);
}
.online-deal.mobile .online-deal-card{
  width: 116px;
  height: 60px;
  left: 14px;
}

.online-deal-card.team-red{ --c: rgba(239,68,68,0.78); }
.online-deal-card.team-blue{ --c: rgba(59,130,246,0.78); }
.online-deal-card.team-neutral{ --c: rgba(228,209,168,0.72); }

/* Team band */
.online-deal-card::before{
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 26px;
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
  background: linear-gradient(180deg, var(--c), rgba(0,0,0,0.0));
  box-shadow: inset 0 -1px 0 rgba(0,0,0,0.22);
}
/* "Word label" stripe */
.online-deal-card::after{
  content: '';
  position: absolute;
  left: 14px;
  right: 14px;
  bottom: 16px;
  height: 12px;
  border-radius: 999px;
  background: rgba(255,255,255,0.10);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.18);
  opacity: 0.95;
}

@keyframes onlineDealCard{
  0%{
    opacity: 0;
    transform: translateY(-50%) translateX(0) rotateZ(-5deg) rotateY(20deg) scale(0.92);
    filter: blur(0.6px);
  }
  18%{
    opacity: 1;
  }
  45%{
    transform: translateY(-50%) translateX(78px) rotateZ(0deg) rotateY(0deg) scale(1.02);
    box-shadow: 0 22px 52px rgba(0,0,0,0.52), 0 0 0 1px rgba(255,255,255,0.06);
    filter: blur(0px);
  }
  72%{
    opacity: 1;
    transform: translateY(-50%) translateX(154px) rotateZ(5deg) rotateY(-18deg) scale(0.94);
    filter: blur(0.4px);
  }
  100%{
    opacity: 0;
    transform: translateY(-50%) translateX(190px) rotateZ(7deg) rotateY(-26deg) scale(0.90);
    filter: blur(0.8px);
  }
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
}


/* ==================== TEAM FLOW UI ==================== */
.stack { display: flex; flex-direction: column; gap: 12px; }

.accordion {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
}

.accordion summary {
  list-style: none;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 14px 14px;
  cursor: pointer;
  font-weight: 700;
  color: var(--text);
  user-select: none;
}

.accordion summary::-webkit-details-marker { display: none; }

.pill {
  background: var(--surface2);
  border: 1px solid var(--border);
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  color: var(--text-dim);
  font-weight: 700;
}

.pill.pending {
  color: var(--gold);
  border-color: rgba(250, 204, 21, 0.35);
}


/* Soft-limit warning (used for counters like "10/8") */
.pill.overboard {
  border-color: rgba(239, 68, 68, 0.60);
  background: rgba(239, 68, 68, 0.14);
  color: rgba(239, 68, 68, 1);
}

.val.overboard {
  color: rgba(239, 68, 68, 1);
}

.meta.overboard {
  color: rgba(239, 68, 68, 1);
}

.manage-note {
  padding: 0 14px 12px 14px;
  color: var(--text-dim);
  font-size: 13px;
  line-height: 1.4;
}

.form { padding: 0 14px 14px 14px; }

.form-grid { display: flex; flex-direction: column; gap: 12px; }

.field { display: flex; flex-direction: column; gap: 6px; }

/* Color picker rows */
.color-picker-row{
  display: flex;
  align-items: center;
  gap: 10px;
}

.team-color-row{
  margin-top: 10px;
  padding: 10px 10px;
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  background: rgba(255,255,255,0.03);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.team-color-row.readonly{ opacity: 0.85; }
.team-color-row.readonly .team-color-label::after{ content: " (view only)"; font-weight: 600; color: var(--text-dim); }

.team-color-label{
  color: var(--text-dim);
  font-size: 12px;
  font-weight: 700;
}

.color-input, .team-color-input{
  appearance: none;
  width: 42px;
  height: 30px;
  padding: 0;
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 10px;
  background: transparent;
  cursor: pointer;
}

.color-input::-webkit-color-swatch-wrapper, .team-color-input::-webkit-color-swatch-wrapper{
  padding: 0;
  border-radius: 10px;
}

.color-input::-webkit-color-swatch, .team-color-input::-webkit-color-swatch{
  border: none;
  border-radius: 10px;
}

.label { color: var(--text-dim); font-size: 12px; font-weight: 700; letter-spacing: 0.2px; }

.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

.form-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 12px;
}

.hint { color: var(--text-dim); font-size: 13px; line-height: 1.3; }
.hint.ok { color: var(--green); }
.hint.error { color: #f87171; }

.btn {
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 12px 14px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 700;
}

.btn.primary {
  background: var(--accent);
  border-color: rgba(59, 130, 246, 0.35);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn.small {
  padding: 8px 10px;
  border-radius: 9px;
  font-size: 13px;
}

/* Invites button - same size as regular btn, yellow color */
.btn.invites-btn {
  background: rgba(234, 179, 8, 0.15);
  border-color: rgba(234, 179, 8, 0.4);
  color: rgb(250, 204, 21);
}
.btn.invites-btn:hover {
  background: rgba(234, 179, 8, 0.25);
  border-color: rgba(234, 179, 8, 0.5);
}

.manage-area { padding: 0 14px 14px 14px; }

.manage-card {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px;
}

.manage-title {
  font-weight: 800;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}

.manage-sub { color: var(--text-dim); font-size: 13px; margin-bottom: 10px; }

.req-list { display: flex; flex-direction: column; gap: 10px; }

.req-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
}

.req-name { font-weight: 800; }
.req-discord { color: var(--text-dim); font-size: 13px; margin-top: 2px; }
.req-actions { display: flex; gap: 8px; }

/* Team list accordion */
.team-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
  margin-bottom: 10px;
}

.team-details summary { list-style: none; }
.team-details summary::-webkit-details-marker { display: none; }

.team-summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 14px;
  cursor: pointer;
}

.team-left { display: flex; align-items: baseline; gap: 10px; min-width: 0; }
.team-rank { color: var(--text-dim); font-weight: 800; }
.team-name { font-weight: 900; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.team-right { display: flex; align-items: center; gap: 10px; }
.meta { color: var(--text-dim); font-size: 13px; font-weight: 800; }

.team-body {
  padding: 0 14px 14px 14px;
  border-top: 1px solid var(--border);
}

.team-section-title {
  margin-top: 12px;
  margin-bottom: 8px;
  font-weight: 900;
  font-size: 12px;
  color: var(--text-dim);
  letter-spacing: 0.3px;
  text-transform: uppercase;
}

.team-footnote { margin-top: 10px; color: var(--text-dim); font-size: 13px; }

.subtitle.small { font-size: 13px; margin-top: 6px; }

/* ==================== FIRST-LOAD CHOOSER + STATUS ==================== */
.status-card {
  background: rgba(59,130,246,0.10);
  border: 1px solid rgba(59,130,246,0.28);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 14px;
}

.status-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.status-title {
  font-weight: 900;
  font-size: 14px;
}

.status-sub {
  color: var(--text-dim);
  font-size: 13px;
  margin-top: 2px;
}

.status-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.mode-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.62);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 18px;
  z-index: 50;
}

.mode-card {
  width: 100%;
  max-width: 520px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 18px;
  box-shadow: var(--shadow-lg);
}

.mode-title {
  font-weight: 900;
  font-size: 18px;
  margin-bottom: 6px;
}

.mode-sub {
  color: var(--text-dim);
  font-size: 13px;
  margin-bottom: 14px;
}

.mode-actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.mode-skip {
  margin-top: 12px;
  width: 100%;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-dim);
  border-radius: 12px;
  padding: 10px 12px;
  cursor: pointer;
  font-weight: 800;
}

.mode-skip:hover {
  color: var(--text);
  background: var(--surface2);
}


@media (max-width: 520px) {
  .two-col { grid-template-columns: 1fr; }
  .tab { max-width: none; }
}


/* =========================
   Mode / Role UI
========================= */
/* =========================
   Header Mode Switcher (Top)
========================= */
.header-mode-switcher {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 999px;
  padding: 4px 6px 4px 12px;
}

.header-mode-switcher .mode-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-dim);
  white-space: nowrap;
}

.header-mode-switcher .mode-btn {
  appearance: none;
  border: none;
  background: transparent;
  color: var(--text-dim);
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
}

.header-mode-switcher .mode-btn:hover {
  background: rgba(255,255,255,0.08);
  color: var(--text);
}

.header-mode-switcher .mode-btn.active {
  background: var(--accent);
  color: #fff;
}

.header-mode-switcher .mode-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Mobile header mode switcher */
.header-mode-switcher.mobile {
  background: rgba(0,0,0,0.05);
  border-color: rgba(0,0,0,0.1);
  padding: 3px 4px 3px 10px;
}

.header-mode-switcher.mobile .mode-label {
  color: rgba(0,0,0,0.6);
  font-size: 11px;
}

.header-mode-switcher.mobile .mode-btn {
  color: rgba(0,0,0,0.5);
  padding: 5px 8px;
  font-size: 11px;
}

.header-mode-switcher.mobile .mode-btn:hover {
  background: rgba(0,0,0,0.08);
  color: rgba(0,0,0,0.8);
}

.header-mode-switcher.mobile .mode-btn.active {
  background: var(--accent);
  color: #fff;
}

/* Creator-only / Joiner-only blocks */
.only-creator{ display:none; }
.only-joiner{ display:none; }
body.mode-creator .only-creator{ display:block; }
body.mode-joiner .only-joiner{ display:block; }

/* Manage area additions */
.manage-card + .manage-card{ margin-top: 12px; }

.member-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  /* Slightly slimmer + more separation for readability */
  padding: 9px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
}
.member-row + .member-row { margin-top: 12px; }
.member-meta{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.member-name{ font-weight: 700; }
.member-discord{ font-size: 12px; color: var(--text-dim); }

/* Rename form */
.rename-form {
  display: flex;
  gap: 10px;
  align-items: flex-end;
}
.rename-form .field {
  flex: 1;
}
.rename-form .input {
  margin-bottom: 0;
}
.rename-form .btn {
  flex-shrink: 0;
}

/* Request meta */
.req-meta {
  font-size: 12px;
  color: var(--text-dim);
  margin-top: 2px;
}

/* Danger zone */
.danger{
  border-color: rgba(239, 68, 68, 0.25) !important;
  background: rgba(239, 68, 68, 0.05) !important;
}
.danger .manage-title{ color: var(--red); }
.danger-actions{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top: 10px;
}
.btn.danger{
  border-color: rgba(239, 68, 68, 0.35);
  color: var(--red);
  background: rgba(239, 68, 68, 0.08);
}
.btn.danger:hover{
  background: rgba(239, 68, 68, 0.15);
}

/* Success button */
.btn.success {
  background: rgba(34, 197, 94, 0.15);
  border-color: rgba(34, 197, 94, 0.35);
  color: var(--green);
}
.btn.success:hover {
  background: rgba(34, 197, 94, 0.25);
}

.small-note{
  font-size: 12px;
  color: var(--text-dim);
  margin-top: 8px;
}

/* Empty state in manage cards */
.manage-card .empty-state {
  padding: 20px;
  text-align: center;
  color: var(--text-dim);
  font-size: 13px;
}

/* Members list */
.members-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

/* Pill in title */
.manage-title .pill {
  font-size: 11px;
  padding: 3px 8px;
}

/* ==================== OWNER NAV + MANAGE TABS ==================== */

.manage-tabs {
  display: flex;
  gap: 10px;
  padding: 10px 14px 14px 14px;
}

.manage-tab {
  flex: 1;
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  font-weight: 900;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.manage-tab.active {
  background: color-mix(in srgb, var(--accent) 18%, transparent);
  border-color: color-mix(in srgb, var(--accent) 38%, var(--border));
}

.tab-badge {
  background: rgba(250,204,21,0.18);
  border: 1px solid rgba(250,204,21,0.35);
  color: var(--gold);
  font-size: 12px;
  font-weight: 900;
  padding: 2px 8px;
  border-radius: 999px;
}

.manage-tab-content { display: none; padding: 0 14px 14px 14px; }
.manage-tab-content.active { display: block; }

.tab-empty {
  padding: 18px;
  border: 1px dashed rgba(255,255,255,0.18);
  border-radius: 14px;
  background: rgba(255,255,255,0.03);
  text-align: center;
}

.tab-empty-icon { font-size: 24px; margin-bottom: 6px; }
.tab-empty-text { font-weight: 900; }
.tab-empty-sub { color: var(--text-dim); font-size: 13px; margin-top: 4px; }

.tab-warning {
  padding: 12px;
  border-radius: 14px;
  border: 1px solid rgba(250,204,21,0.25);
  background: rgba(250,204,21,0.08);
  color: var(--gold);
  font-size: 13px;
  font-weight: 800;
  margin-bottom: 10px;
}

.req-left { min-width: 0; }
.req-meta { color: var(--text-dim); font-size: 13px; margin-top: 2px; }

.settings-section {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 12px;
}

.settings-title {
  font-weight: 900;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.rename-form { display: flex; gap: 10px; align-items: center; }
.rename-form .input { flex: 1; }

.members-list { display: flex; flex-direction: column; gap: 10px; }
.member-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
}

.member-name { font-weight: 900; }
.member-discord { color: var(--text-dim); font-size: 13px; margin-top: 2px; }
.small-note { color: var(--text-dim); font-size: 13px; margin-top: 10px; }

.btn.success {
  background: rgba(34,197,94,0.14);
  border-color: rgba(34,197,94,0.28);
}

.btn.danger,
.btn.small.danger {
  background: rgba(248,113,113,0.12);
  border-color: rgba(248,113,113,0.28);
}

.danger-section { border-color: rgba(248,113,113,0.28); }
.danger-title { color: #f87171; }
.danger-desc { color: var(--text-dim); font-size: 13px; margin: 0 0 10px 0; }

/* =========================
   Simplified app additions
========================= */

.header-user{
  display:flex;
  flex-direction:row;
  align-items:center;
  justify-content:flex-end;
  /* Tighten spacing across the top strip (incl. Messages + Settings) */
  gap:4px;
  min-width:0;
}

@media (max-width: 520px){
  .header-user{ gap:3px; }
}

.header-user-stack{
  display:flex;
  flex-direction:row;
  align-items:center;
  gap:6px;
  min-width:0;
}

.header-pill{
  appearance: none;
  border: none;
  display:inline-flex;
  align-items:center;
  gap:6px;
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-dim);
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-family: inherit;
  transition: background 0.15s ease, color 0.15s ease;
}

.header-pill:hover{
  background: rgba(255, 255, 255, 0.12);
  color: var(--text);
}

.header-pill-label{
  color: var(--text-dim);
}

.header-pill-value{
  font-weight: 600;
  color: var(--text);
  max-width: 100px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#user-name-display{ cursor:pointer; }

.header-line{
  display:flex;
  justify-content:flex-end;
  gap:0;
  min-width: var(--namebox-w);
  max-width: 220px;
}

.header-k{
  font-size:11px;
  color: var(--text-dim);
}

.header-v{
  font-weight:600;
  user-select:none;
  font-size:12px;
  line-height:1.2;
  text-align:right;
  margin-left:6px;
  min-width:0;
  max-width: 180px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.header-user-input{
  width: var(--namebox-w);
  font-size:12px;
  padding:3px 10px;
  height: 24px;
}

.name-card{
  margin: 18px 0 10px 0;
  padding: 14px;
  border-radius: 16px;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.08);
}

.saved-name{
  font-size: 20px;
  font-weight: 700;
  margin-top: 4px;
  cursor:pointer;
  user-select:none;
}

.clickable{
  text-align:left;
  width:100%;
  border: none;
  background: transparent;
  padding: 0;
}

/* Modal */
.modal{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.58);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 999;
  padding: 14px;
}

/* Prevent any modal "state restore" flashes on refresh.
   We keep the page in a brief booting state and hide all modals with !important.
   JS removes the class after it force-closes transient modals. */
body.booting .modal{ display:none !important; }

body.light-mode .modal{
  background: rgba(30,50,75,0.35);
}

.modal-card{
  width: min(520px, 100%);
  background: var(--card);
  border: 1px solid var(--border-soft);
  border-radius: 18px;
  box-shadow: var(--shadow-lg);
  overflow:hidden;
}

.modal-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px 12px;
  border-bottom: 1px solid var(--border-soft);
}

/* Make all modal close (Ã—) buttons red */
.modal-head .icon-btn{
  border-color: rgba(248,113,113,0.45);
  background: rgba(248,113,113,0.12);
  color: var(--text);
}

.modal-title{
  font-weight: 700;
}

.modal-body{
  padding: 14px 12px;
}

.request-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px solid var(--border-soft);
}

.request-row:last-child{ border-bottom: none; }

.request-actions{ display:flex; gap: 8px; }

/* Team chat */
.chat-modal-body{
  display:flex;
  flex-direction: column;
  gap: 12px;
  /* Taller chat like the rest of the UI */
  height: 72vh;
}

/* Chat tab */
.chat-head-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  margin-bottom: 10px;
}

/* Play tab - Mode Selection */
.mode-cards {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  margin: 24px 0;
}

.mode-card {
  appearance: none;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 16px;
  padding: 24px 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.mode-card:hover {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.08);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.mode-card-icon {
  font-size: 40px;
  line-height: 1;
}

.mode-card-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--text);
}

.mode-card-desc {
  font-size: 13px;
  color: var(--text-dim);
  line-height: 1.4;
}

@media (max-width: 520px) {
  .mode-cards {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .mode-card {
    padding: 20px 16px;
    flex-direction: row;
    text-align: left;
    gap: 16px;
  }

  .mode-card-icon {
    font-size: 32px;
    flex-shrink: 0;
  }

  .mode-card-content {
    flex: 1;
  }

  .mode-card-title {
    font-size: 16px;
  }

  .mode-card-desc {
    font-size: 12px;
  }
}

/* Lobby Header */
.lobby-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 4px;
}

.lobby-header h2 {
  margin: 0;
  font-size: 20px;
}

.back-btn {
  width: 36px;
  height: 36px;
  padding: 0;
  font-size: 18px;
  border-radius: 10px;
}

.lobby-name-check {
  margin: 16px 0;
  padding: 16px;
  background: rgba(250, 204, 21, 0.1);
  border: 1px solid rgba(250, 204, 21, 0.3);
  border-radius: 12px;
}

/* Quick Play Setup */
.quick-setup {
  margin-top: 20px;
}

.setup-section {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 16px;
  margin-bottom: 16px;
}

.setup-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 14px;
}

/* Team Selection */
.team-select-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.team-select-btn {
  appearance: none;
  flex: 1;
  max-width: 160px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 20px 16px;
  background: var(--surface2);
  border: 2px solid var(--border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.team-select-btn:hover {
  transform: translateY(-2px);
}

.team-select-btn.red:hover,
.team-select-btn.red.selected {
  border-color: var(--game-red);
  background: var(--game-red-bg);
}

.team-select-btn.blue:hover,
.team-select-btn.blue.selected {
  border-color: var(--game-blue);
  background: var(--game-blue-bg);
}

.team-select-color {
  width: 32px;
  height: 32px;
  border-radius: 50%;
}

.team-select-btn.red .team-select-color {
  background: var(--game-red);
}

.team-select-btn.blue .team-select-color {
  background: var(--game-blue);
}

.team-select-name {
  font-weight: 700;
  font-size: 14px;
  color: var(--text);
}

.team-select-vs {
  color: var(--text-dim);
  font-size: 12px;
  font-weight: 600;
}

.team-select-hint {
  text-align: center;
  font-size: 13px;
  color: var(--text-dim);
  margin-top: 12px;
}

/* Settings */
.settings-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Quick Play settings: more colorful + card-like rows */
.qp-settings-open{
  background: linear-gradient(135deg, rgba(59,130,246,0.28), rgba(168,85,247,0.22));
  border: 1px solid rgba(255,255,255,0.14);
}
.qp-settings-open:hover{
  background: linear-gradient(135deg, rgba(59,130,246,0.34), rgba(168,85,247,0.28));
}

.qp-settings-banner{
  display:flex;
  gap: 12px;
  align-items:flex-start;
  padding: 12px 12px;
  border-radius: 16px;
  background: linear-gradient(135deg, rgba(59,130,246,0.18), rgba(239,68,68,0.12));
  border: 1px solid rgba(255,255,255,0.10);
  margin-bottom: 14px;
}
.qp-settings-emoji{
  width: 42px;
  height: 42px;
  border-radius: 14px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.10);
  flex: 0 0 auto;
}
.qp-settings-title{ font-weight: 900; letter-spacing: 0.2px; }
.qp-settings-sub{ color: var(--text-dim); font-size: 13px; margin-top: 2px; line-height: 1.35; }

.qp-settings-grid{ gap: 10px; }
.qp-setting{
  padding: 12px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
  position: relative;
}
.qp-setting[data-accent="black"]{ --qp-accent: rgba(148,163,184,0.95); }
.qp-setting[data-accent="clue"]{ --qp-accent: rgba(168,85,247,0.95); }
.qp-setting[data-accent="guess"]{ --qp-accent: rgba(20,184,166,0.95); }
.qp-setting[data-accent="deck"]{ --qp-accent: rgba(59,130,246,0.95); }
.qp-setting[data-accent="vibe"]{ --qp-accent: rgba(236,153,75,0.95); }

.qp-setting .setting-input{
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 10px;
  padding: 8px 12px;
  color: var(--text);
  font-size: 14px;
  width: 100%;
  max-width: 260px;
  font-family: inherit;
}
.qp-setting .setting-input::placeholder{
  color: var(--text-dim);
  opacity: 0.65;
}
.qp-setting .setting-input:focus{
  outline: none;
  border-color: rgba(236,153,75,0.5);
  box-shadow: 0 0 0 3px rgba(236,153,75,0.15);
}
.qp-setting .setting-hint{
  display: block;
  font-size: 11px;
  color: var(--text-dim);
  opacity: 0.7;
  margin-top: 4px;
  line-height: 1.3;
}

.qp-setting-deck{ display:flex; flex-direction:column; gap: 10px; }
.qp-setting-deck .setting-label{ padding-left: 12px; }
.qp-deck-picker{
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-left: 12px;
}
.qp-deck-card{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap: 10px;
  padding: 10px 14px;
  min-width: 0;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.05);
  color: var(--text);
  cursor: pointer;
  transition: transform 120ms ease, background 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
  text-align:left;
}
.qp-deck-card:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.07); }
.qp-deck-card:active{ transform: translateY(0px); }
.qp-deck-card.disabled, .qp-deck-card:disabled{ opacity: 0.45; cursor: not-allowed; transform: none; }
.qp-deck-card[aria-checked="true"], .qp-deck-card.selected{
  border-color: color-mix(in srgb, var(--accent) 60%, var(--border));
  box-shadow: 0 0 0 3px rgba(59,130,246,0.18), 0 14px 30px rgba(0,0,0,0.26);
  background: linear-gradient(135deg, rgba(59,130,246,0.16), rgba(168,85,247,0.12));
}
.qp-deck-emoji{
  width: 34px;
  height: 34px;
  border-radius: 12px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.10);
  flex: 0 0 auto;
}
.qp-deck-name{ font-weight: 800; }
.qp-deck-sub{ font-size: 12px; color: var(--text-dim); margin-top: 2px; }

.qp-setting .setting-label{
  font-weight: 700;
  padding-left: 12px;
}
.qp-setting .setting-select{
  min-width: 170px;
}

/* Quick Play negotiation (offer / accept) */
.qp-negotiation{
  margin-top: 14px;
  padding: 14px 14px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.12);
  background: radial-gradient(1200px 260px at 10% 0%, rgba(239,68,68,0.14), transparent 60%),
              radial-gradient(1200px 260px at 90% 0%, rgba(59,130,246,0.14), transparent 60%),
              rgba(255,255,255,0.04);
  box-shadow: 0 14px 40px rgba(0,0,0,0.28);
}

.qp-neg-head{ display:flex; align-items:center; justify-content: space-between; gap: 10px; }
.qp-neg-title{ font-weight: 950; letter-spacing: 0.2px; }
.qp-neg-chip{
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  border: 1px solid rgba(255,255,255,0.14);
  background: var(--surface2);
  color: var(--text);
  display:inline-flex;
  align-items:center;
  gap: 8px;
}
.qp-neg-chip::before{
  content:"";
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.25);
}
.qp-negotiation[data-state="pending-red"] .qp-neg-chip{ background: rgba(239,68,68,0.14); border-color: rgba(239,68,68,0.22); }
.qp-negotiation[data-state="pending-red"] .qp-neg-chip::before{ background: rgba(239,68,68,0.9); box-shadow: 0 0 18px rgba(239,68,68,0.55); }
.qp-negotiation[data-state="pending-blue"] .qp-neg-chip{ background: rgba(59,130,246,0.14); border-color: rgba(59,130,246,0.22); }
.qp-negotiation[data-state="pending-blue"] .qp-neg-chip::before{ background: rgba(59,130,246,0.95); box-shadow: 0 0 18px rgba(59,130,246,0.55); }
.qp-negotiation[data-state="agreed"] .qp-neg-chip{ background: rgba(45,210,120,0.14); border-color: rgba(45,210,120,0.22); }
.qp-negotiation[data-state="agreed"] .qp-neg-chip::before{ background: rgba(45,210,120,0.95); box-shadow: 0 0 18px rgba(45,210,120,0.55); }
.qp-negotiation[data-state="no-team"] .qp-neg-chip{ opacity: 0.8; }

.qp-neg-rail{
  margin-top: 12px;
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 10px;
  align-items: stretch;
}
.qp-neg-team{
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.10);
  padding: 12px 12px;
  background: rgba(255,255,255,0.04);
}
.qp-neg-team-top{ display:flex; align-items:center; justify-content: space-between; gap: 10px; }
.qp-neg-team-name{ font-weight: 900; letter-spacing: 0.2px; }
.qp-neg-team-state{ margin-top: 8px; font-size: 13px; color: var(--text-dim); font-weight: 700; }
.qp-neg-dot{ width: 10px; height: 10px; border-radius: 999px; display:inline-block; }
.qp-neg-dot.red{ background: rgba(239,68,68,0.95); box-shadow: 0 0 18px rgba(239,68,68,0.45); }
.qp-neg-dot.blue{ background: rgba(59,130,246,0.95); box-shadow: 0 0 18px rgba(59,130,246,0.45); }
.qp-neg-team.red{ background: linear-gradient(135deg, rgba(239,68,68,0.10), rgba(255,255,255,0.03)); }
.qp-neg-team.blue{ background: linear-gradient(135deg, rgba(59,130,246,0.10), rgba(255,255,255,0.03)); }

.qp-neg-team[data-accepted="true"]{ border-color: rgba(45,210,120,0.30); }
.qp-neg-team[data-accepted="true"] .qp-neg-team-state{ color: rgba(180,255,220,0.95); }
.qp-neg-team[data-accepted="true"] .qp-neg-team-state::before{ content:"âœ“ "; }

.qp-neg-vs{
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 0 4px;
  font-size: 18px;
  opacity: 0.9;
}

.qp-neg-preview{
  margin-top: 12px;
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
}
.qp-neg-pill{
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.12);
  background: var(--surface2);
  font-size: 12px;
  font-weight: 800;
  color: var(--text);
}
.qp-neg-pill.red{ background: rgba(239,68,68,0.10); border-color: rgba(239,68,68,0.18); }
.qp-neg-pill.blue{ background: rgba(59,130,246,0.10); border-color: rgba(59,130,246,0.18); }
.qp-neg-pill.purple{ background: rgba(168,85,247,0.10); border-color: rgba(168,85,247,0.18); }
.qp-neg-pill.teal{ background: rgba(20,184,166,0.10); border-color: rgba(20,184,166,0.18); }
.qp-neg-pill.slate{ background: rgba(148,163,184,0.10); border-color: rgba(148,163,184,0.18); }

.qp-neg-copy{ margin-top: 10px; }
.qp-neg-actions{ margin-top: 12px; display:flex; gap: 10px; }
.qp-neg-btn{ flex: 1 1 0; border-radius: 14px; }

@media (max-width: 520px){
  .qp-neg-rail{ grid-template-columns: 1fr; }
  .qp-neg-vs{ display:none; }
  .qp-neg-actions{ flex-direction: column; }
  .qp-neg-btn{ width: 100%; }
}

@media (max-width: 520px){
  .qp-setting{ flex-direction: column; align-items: stretch; }
  .qp-setting .setting-select{ width: 100%; min-width: 0; }
  .qp-setting .setting-label{ padding-left: 0; padding-top: 10px; }
}

.setting-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.setting-label {
  font-size: 14px;
  font-weight: 500;
}

.setting-select {
  width: auto;
  min-width: 140px;
  margin: 0;
}

/* Room Actions */
.room-actions {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.room-divider {
  display: flex;
  align-items: center;
  gap: 12px;
  color: var(--text-dim);
  font-size: 12px;
}

.room-divider::before,
.room-divider::after {
  content: "";
  flex: 1;
  height: 1px;
  background: var(--border);
}

.join-room-row {
  display: flex;
  gap: 10px;
}

.join-room-row .input {
  flex: 1;
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 2px;
  text-align: center;
  font-weight: 700;
}

@media (max-width: 520px) {
  .team-select-row {
    flex-direction: column;
    gap: 8px;
  }

  .team-select-btn {
    max-width: 100%;
    width: 100%;
    flex-direction: row;
    padding: 14px 16px;
    gap: 12px;
  }

  .team-select-color {
    width: 24px;
    height: 24px;
  }

  .team-select-vs {
    display: none;
  }

  .setting-row {
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
  }

  .setting-select {
    width: 100%;
  }
}

.segmented{
  display:flex;
  gap: 6px;
  padding: 6px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 999px;
}

.seg-btn{
  appearance:none;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text-dim);
  font-weight: 900;
  font-size: 12px;
  padding: 8px 12px;
  border-radius: 999px;
  cursor:pointer;
  transition: background 0.15s, border-color 0.15s, color 0.15s;
}

.seg-btn:hover{
  background: var(--surface2);
  border-color: rgba(255,255,255,0.10);
  color: var(--text);
}

.seg-btn.active{
  background: color-mix(in srgb, var(--accent) 18%, transparent);
  border-color: rgba(59,130,246,0.40);
  color: var(--text);
}

/* Unread badges (iMessage-style) */
.badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width: 14px;
  height: 14px;
  padding: 0 4px;
  border-radius: 999px;
  /* Red again, but less opaque than the classic alert badge. */
  background: rgba(239,68,68,0.48);
  border: 1px solid rgba(239,68,68,0.42);
  color: rgba(255,255,255,0.98);
  font-weight: 900;
  font-size: 9px;
  letter-spacing: -0.2px;
  line-height: 1;
  box-shadow: 0 4px 12px rgba(0,0,0,0.22);
}

/* Team modal: make the join/request button span the same width as member rows */
#team-modal .form-actions{
  flex-direction: column;
  align-items: stretch;
}

#team-modal-join{
  width: 100%;
  justify-content: center;
}

.desktop-tabs .tab,
.mobile-tabs .tab,
.seg-btn{
  position: relative;
}

.tab-badge{
  position:absolute;
  top: 6px;
  right: 10px;
}

.mobile-tabs .tab .tab-badge{
  top: 6px;
  right: 14px;
}

.seg-badge{
  position:absolute;
  top: -6px;
  right: -6px;
}

.chat-card{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  display:flex;
  flex-direction: column;
  gap: 12px;
  min-height: 68vh;
}

/* Mobile: keep the composer comfortably above bottom tabs */
@media (max-width: 768px){
  .panel-chat .chat-card{
    /* A bit taller so the chat reaches lower on mobile, while keeping the composer visible */
    min-height: 60vh;
    height: 60vh;
  }
}


/* Tournament (desktop): keep chat panel a fixed height so it doesn't grow with messages */
@media (min-width: 769px){
  body.tournament .panel-chat .chat-card{
    height: 68vh;
    max-height: 68vh;
  }
}

.chat-card .chat-messages{
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 10px;
  /* iMessage-style bubble list */
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow: auto;
  min-height: 0;
}

/* Chat bubbles (used by drawer + panels) */
.chat-row{ display:flex; width:100%; }
.chat-row.mine{ justify-content: flex-end; }
.chat-row.other{ justify-content: flex-start; }

.chat-bubble{
  max-width: min(78%, 420px);
  border-radius: 18px;
  padding: 10px 12px;
  line-height: 1.25;
  font-size: 13px;
  border: 1px solid rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.04);
  box-shadow: 0 8px 20px rgba(0,0,0,0.18);
}

body.light-mode .chat-bubble{
  border-color: rgba(40,70,100,0.12);
  background: var(--surface);
  box-shadow: 0 4px 14px rgba(30,55,85,0.08);
}

.chat-bubble.mine{
  background: color-mix(in srgb, var(--accent) 42%, var(--surface));
  border-color: color-mix(in srgb, var(--accent) 55%, rgba(255,255,255,0.10));
}
body.light-mode .chat-bubble.mine{
  background: color-mix(in srgb, var(--accent) 18%, var(--surface));
  border-color: color-mix(in srgb, var(--accent) 35%, var(--border));
}

.chat-meta{
  font-size: 11px;
  font-weight: 800;
  opacity: .9;
  margin-bottom: 6px;
  color: var(--text);
}
body.light-mode .chat-meta{ color: var(--text); }

.chat-bubble-text{
  white-space: pre-wrap;
  overflow-wrap: anywhere;
}

@media (max-width: 520px){
  .chat-bubble{ max-width: 86%; font-size: 13px; padding: 10px 12px; }
  .chat-meta{ font-size: 10.5px; }
}

.chat-personal-bar{
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 8px 10px;
  border: 1px solid var(--border);
  background: var(--surface2);
  border-radius: 12px;
}

.chat-personal-label{
  font-weight: 900;
  font-size: 12px;
  color: var(--text-dim);
}

.chat-personal-select{
  flex: 1 1 auto;
  margin: 0;
  height: 36px;
  padding: 0 12px;
}

.chat-messages{
  flex: 1 1 auto;
  max-height: none;
  overflow: auto;
  display:flex;
  flex-direction: column;
  gap: 6px;
  padding: 8px 6px;
}

.chat-msg{
  /* Minecraft-style: no bubbles, all left aligned */
  align-self: flex-start;
  width: 100%;
  max-width: 100%;
  background: transparent;
  border: none;
  border-radius: 0;
  padding: 0;
}

.chat-line{
  font-size: 13px;
  line-height: 1.35;
  white-space: pre-wrap;
  word-break: break-word;
}

.chat-who{
  font-weight: 900;
  color: var(--text);
}

.chat-text{
  color: var(--text);
}

.chat-compose{
  display:flex;
  gap: 10px;
  align-items: center;
}

/* Disabled chat composer (used when team chat unavailable) */
.chat-compose.is-disabled{
  opacity: 0.65;
}
.chat-compose.is-disabled .chat-input,
.chat-compose.is-disabled .chat-send{
  pointer-events: none;
}


.chat-input{ flex: 1 1 auto; margin: 0; }
.chat-send{ flex: 0 0 auto; }

/* Prettier invite list (My Team) */
#invites-list{ display:flex; flex-direction: column; gap: 10px; }
.invite-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding: 12px;
  border-radius: 12px;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.08);
}
.invite-left{ min-width: 0; }
.invite-title{ font-weight: 900; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.invite-sub{ color: var(--text-dim); font-size: 12px; margin-top: 2px; }
.invite-actions{ display:flex; gap: 8px; flex: 0 0 auto; }

/* =========================
   Quick Play Lobby
========================= */
.quick-lobby-card{
  margin-top: 14px;
  padding: 18px;
  border-radius: 16px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 12px 32px rgba(0,0,0,0.35);
  isolation: isolate;
}
.quick-lobby-top{
  display:flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 12px;
}
.quick-lobby-layout{
  margin-top: 14px;
  display:flex;
  gap: 16px;
  align-items: stretch;
}
.quick-team-col{
  flex: 1 1 0;
  min-width: 260px;
  border-radius: 14px;
  padding: 12px;
  background: rgba(0,0,0,0.30);
  border: 1px solid rgba(255,255,255,0.08);
  display:flex;
  flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
}
.quick-team-col.red{ border-color: rgba(255, 90, 90, 0.20); }
.quick-team-col.blue{ border-color: rgba(90, 140, 255, 0.20); }
.quick-team-col.spectator{ border-color: rgba(255,255,255,0.14); }

/* Spectators should not look like a boxed "card" (no border/background), but should still align with the grid. */
.quick-team-col.spectator{
  background: transparent;
  border: none;
}
.quick-team-col.spectator.selected{
  box-shadow: none;
}

.quick-team-col.selectable{
  cursor: pointer;
  user-select: none;
  transition: transform 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
}
.quick-team-col.selectable:hover{ transform: translateY(-1px); }
.quick-team-col.selectable:active{ transform: translateY(0px); }
.quick-team-col.selectable:focus{ outline: none; box-shadow: 0 0 0 2px rgba(255,255,255,0.10); }

.quick-team-col.selected{
  box-shadow: 0 0 0 2px rgba(255,255,255,0.10) inset;
}
.quick-team-col.red.selected{ border-color: rgba(255, 90, 90, 0.45); box-shadow: 0 0 0 2px rgba(255, 90, 90, 0.18) inset; }
.quick-team-col.blue.selected{ border-color: rgba(90, 140, 255, 0.45); box-shadow: 0 0 0 2px rgba(90, 140, 255, 0.18) inset; }
.quick-team-col.spectator.selectable:hover{ transform: none; }
.quick-team-col.spectator.selectable:active{ transform: none; }
.quick-team-col.spectator.selected{ border-color: rgba(255,255,255,0.22); box-shadow: none; }

.quick-team-head{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}
.quick-team-dot{
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex: 0 0 auto;
}
.quick-team-dot.red{ background: var(--game-red); box-shadow: 0 0 14px rgba(255,90,90,0.30); }
.quick-team-dot.blue{ background: var(--game-blue); box-shadow: 0 0 14px rgba(90,140,255,0.30); }
.quick-team-dot.spectator{ background: rgba(255,255,255,0.55); box-shadow: 0 0 12px rgba(255,255,255,0.12); }
.quick-team-title{ font-weight: 900; letter-spacing: 0.3px; font-size: 13px; }
.quick-team-count{
  font-weight: 900;
  color: var(--text-dim);
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
}

.quick-team-status {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 0 12px 8px;
  min-height: 22px;
}

/* Quick Play: choose Operatives vs Spymasters inside the team box */
/* These are used as section headers (clickable), not a separate row of buttons. */
.quick-seat-choice{
  /* Section headers (Spymasters / Operatives) should read like headers, not like player "pills". */
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  width: 100%;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: 0.35px;
  padding: 4px 2px;
  border-radius: 0;
  background: transparent;
  border: none;
  user-select: none;
  cursor: pointer;
  opacity: 0.85;
  transition: opacity 120ms ease, color 120ms ease;
}
.quick-seat-choice:focus{ outline: none; box-shadow: 0 0 0 2px rgba(255,255,255,0.12); border-radius: 8px; }
.quick-seat-choice:hover{ opacity: 1; text-decoration: none; }
.quick-seat-choice:active{ opacity: 1; }

/* Underline only the label text (prevents +AI button hover from underlining the header) */
.quick-seat-label{ display:inline-block; }
.quick-seat-label:hover{ text-decoration: underline; text-underline-offset: 4px; }
.quick-team-col.red .quick-seat-choice.selected{
  color: rgba(255, 120, 120, 0.95);
  opacity: 1;
}
.quick-team-col.blue .quick-seat-choice.selected{
  color: rgba(150, 190, 255, 0.95);
  opacity: 1;
}

.quick-role-lists{
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.quick-role-section{
  padding: 0;
  border-radius: 0;
  background: transparent;
  border: none;
}
.quick-role-title{
  /* When combined with .quick-seat-choice this becomes the clickable section header */
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 4px;
}
.quick-role-divider{
  height: 1px;
  width: 100%;
  background: rgba(255,255,255,0.10);
  margin: 4px 0;
}
.quick-team-status:empty {
  display: none;
}
.quick-status-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 999px;
  font-weight: 500;
  opacity: 0.85;
}
.quick-status-chip.agreed {
  background: rgba(80, 200, 120, 0.18);
  color: #50c878;
}
.quick-status-chip.not-agreed {
  background: rgba(255, 180, 50, 0.15);
  color: #ffb432;
}
.quick-status-chip.all-ready {
  background: rgba(80, 200, 120, 0.22);
  color: #50c878;
  font-weight: 600;
}
.quick-status-chip.not-ready {
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.5);
}

.quick-team-list{
  display:flex;
  flex-direction: column;
  gap: 8px;
  flex: 1 1 auto;
  overflow:auto;
  padding-right: 4px;
}
.quick-empty{ color: var(--text-dim); font-size: 12px; padding: 8px 2px; }

.quick-player{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 12px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.08);
}
.quick-player.ready{
  border-color: rgba(45, 210, 120, 0.35);
  box-shadow: 0 0 0 1px rgba(45, 210, 120, 0.10) inset;
}
.quick-player-name{ font-weight: 800; font-size: 13px; min-width: 0; overflow:hidden; text-overflow: ellipsis; white-space: nowrap; }
.quick-you{ color: var(--text-dim); font-weight: 700; }
.quick-player-badge{
  font-size: 11px;
  letter-spacing: 0.8px;
  font-weight: 900;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.12);
  background: var(--surface2);
  color: var(--text-dim);
  flex: 0 0 auto;
}
.quick-player.ready .quick-player-badge{
  color: rgba(180, 255, 220, 0.95);
  border-color: rgba(45, 210, 120, 0.35);
  background: rgba(45, 210, 120, 0.12);
}

.quick-lobby-status{
  font-weight: 900;
  letter-spacing: 0.2px;
  margin-bottom: 12px;
}

.quick-lobby-controls{
  margin-top: 14px;
  display:flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
  text-align: center;
}

.quick-player.spectator{ justify-content: flex-start; }

.quick-lobby-actions{ width: 100%; display:flex; gap: 10px; margin-top: 4px; }
.quick-lobby-actions .btn{ flex: 1 1 0; }

.quick-rules-bar{
  width: 100%;
  display:flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 16px;
  background: radial-gradient(900px 220px at 20% 0%, rgba(168,85,247,0.10), transparent 60%),
              radial-gradient(900px 220px at 80% 0%, rgba(20,184,166,0.10), transparent 60%),
              var(--card);
}

.quick-rules-summary{
  display:flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  color: var(--text);
  opacity: 0.95;
  text-align: left;
}

.qp-rules-badge{
  padding: 5px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: var(--surface2);
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 0.2px;
  display:inline-flex;
  align-items:center;
  gap: 8px;
  flex: 0 0 auto;
}
.qp-rules-badge::before{
  content:"";
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.25);
}
.qp-rules-badge[data-state="pending-red"]{ background: rgba(239,68,68,0.12); border-color: rgba(239,68,68,0.22); }
.qp-rules-badge[data-state="pending-red"]::before{ background: rgba(239,68,68,0.95); box-shadow: 0 0 16px rgba(239,68,68,0.50); }
.qp-rules-badge[data-state="pending-blue"]{ background: rgba(59,130,246,0.12); border-color: rgba(59,130,246,0.22); }
.qp-rules-badge[data-state="pending-blue"]::before{ background: rgba(59,130,246,0.95); box-shadow: 0 0 16px rgba(59,130,246,0.50); }
.qp-rules-badge[data-state="agreed"]{ background: rgba(45,210,120,0.12); border-color: rgba(45,210,120,0.22); }
.qp-rules-badge[data-state="agreed"]::before{ background: rgba(45,210,120,0.95); box-shadow: 0 0 16px rgba(45,210,120,0.50); }
.qp-rules-text{ color: var(--text); opacity: 0.92; }
.qp-rules-text.rules-agreed{
  background: linear-gradient(90deg, #2dd87a 0%, #50c878 50%, #7deb9a 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  opacity: 1;
}

.quick-rules-actions{
  display:flex;
  gap: 8px;
  flex: 0 0 auto;
}

/* Subtle attention when an inline Accept button appears */
#quick-rules-accept-btn{
  position: relative;
}
#quick-rules-accept-btn:not([style*="display:none"]){
  box-shadow: 0 0 0 0 rgba(45,210,120,0.30);
  animation: qpAcceptPulse 1.8s ease-out infinite;
}
@keyframes qpAcceptPulse{
  0%{ box-shadow: 0 0 0 0 rgba(45,210,120,0.26); }
  70%{ box-shadow: 0 0 0 10px rgba(45,210,120,0.0); }
  100%{ box-shadow: 0 0 0 0 rgba(45,210,120,0.0); }
}

@media (max-width: 420px){
  .quick-rules-bar{ align-items: flex-start; flex-direction: column; }
  .quick-rules-actions{ width: 100%; }
  .quick-rules-actions .btn{ flex: 1 1 0; }
}

/* Modal */
.modal{
  position: fixed;
  inset: 0;
  z-index: 2000;
  /* Let the modal itself scroll on small screens */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px 12px;
}
.modal-backdrop{
  position: absolute;
  inset: 0;
  /* Opaque enough that the app behind doesn't bleed through on mobile */
  background: rgba(0,0,0,0.80);
}
.modal-card{
  position: relative;
  width: min(560px, calc(100vw - 24px));
  margin: 0;
  margin-top: -5vh;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: 0 20px 70px rgba(0,0,0,0.45);
  overflow: hidden;
  /* Ensure the card is fully opaque and scrolls internally when needed */
  opacity: 1;
  max-height: calc(100vh - 96px);
  display: flex;
  flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
}
.modal-head{
  display:flex;
  align-items:center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}

/* Quick Play settings modal: a bit more pop */
#quick-settings-modal {
  align-items: center;
}
#quick-settings-modal .modal-card{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00)), var(--card);
  margin: 0;
  margin-top: -5vh;
  width: min(460px, calc(100vw - 24px));
  max-height: calc(100vh - 140px);

}
#quick-settings-modal .modal-head{
  background: linear-gradient(135deg, rgba(59,130,246,0.18), rgba(168,85,247,0.14));
  border-bottom: 1px solid rgba(255,255,255,0.12);
}
#quick-settings-modal .icon-btn:hover{ background: rgba(0,0,0,0.10); }
/* Quick Play settings: compact modal */
#quick-settings-modal .modal-card{
  width: min(460px, calc(100vw - 24px));
  max-height: calc(100vh - 120px);
}
#quick-settings-modal .modal-head{
  padding: 12px 14px;
}
#quick-settings-modal .modal-body{
  padding: 12px 14px 14px;
  touch-action: pan-y;
}
#quick-settings-modal .qp-settings-banner{
  padding: 10px 10px;
  margin-bottom: 10px;
}
#quick-settings-modal .qp-settings-emoji{
  width: 34px;
  height: 34px;
  border-radius: 11px;
}
#quick-settings-modal .qp-settings-sub{
  font-size: 12px;
}

/* Make Quick Play settings less tall (fit more above the fold) */
#quick-settings-modal .qp-settings-grid{ gap: 6px; }
#quick-settings-modal .qp-setting{ padding: 10px 10px; border-radius: 14px; }

/* Deck picker: use a compact grid instead of a tall column list */
#quick-settings-modal .qp-setting-deck{ gap: 8px; }
#quick-settings-modal .qp-setting-deck .setting-label{ padding-left: 0; }
#quick-settings-modal .qp-deck-picker{
  padding-left: 0;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 8px;
}
#quick-settings-modal .qp-deck-card{ padding: 8px 10px; border-radius: 12px; gap: 8px; }
#quick-settings-modal .qp-deck-emoji{ width: 28px; height: 28px; border-radius: 10px; }

#quick-settings-modal .qp-negotiation{ margin-top: 8px; padding: 8px 10px; border-radius: 14px; }

/* Quick Play settings modal is intentionally compact */
#quick-settings-modal .qp-neg-copy{ margin-top: 8px; }
#quick-settings-modal .qp-neg-actions{ margin-top: 8px; gap: 8px; }
#quick-settings-modal .qp-neg-btn{ border-radius: 12px; }

.modal-title{ font-weight: 900; letter-spacing: 0.2px; }
.modal-body{
  padding: 14px 16px 4px;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  flex: 1 1 auto;
  /* Important for iOS/mobile: allow flex child to shrink so internal scrolling works */
  min-height: 0;
}
.modal-actions{
  display:flex;
  gap: 10px;
  padding: 12px 16px 16px;
  justify-content: flex-end;
  flex-wrap: wrap;
}
.modal-actions .btn{ min-width: 140px; }
.icon-btn{
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  border-radius: 12px;
  height: 36px;
  width: 36px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor: pointer;
}
.icon-btn:hover{ background: var(--surface2); }

@media (max-width: 520px){
  .modal{ padding: 10px 10px; }
  .modal-card{
    width: min(560px, calc(100vw - 16px));
    margin: 0;
    margin-top: -5vh;
    max-height: calc(100vh - 24px);
  }
}

@media (max-width: 900px){
  .quick-lobby-layout{ flex-direction: column; }
  .quick-team-col{ min-width: 0; }
}

/*
  Quick Play lobby on mobile:
  - Fit within the viewport (no page scrolling)
  - Keep controls visible
  - Allow *internal* scrolling inside player lists if needed
*/
@media (max-width: 768px){
  /* Tabs are hidden in Quick Play mode, so remove the extra bottom padding reserved for them. */
  body.quickplay .panel-game .panel-inner{
    padding: 14px;
    padding-bottom: max(14px, env(safe-area-inset-bottom));
    height: 100dvh;
  height: 100vh; /* fallback */
    min-height: 0;
  }

  /* Avoid page scroll; the lobby itself manages its layout and internal scroll areas. */
  body.quickplay .panel-game{
    overflow: hidden;
    /* Tabs are hidden in Quick Play, so remove the 72px bottom offset
       that normally reserves space for the mobile tab bar. */
    bottom: 0;
  }

  body.quickplay #quick-play-lobby{
    display: flex;
    flex-direction: column;
    height: 100dvh;
  height: 100vh; /* fallback */
    min-height: 0;
  }

  /* Save vertical space: the panel already has a title via the app header. */
  body.quickplay #quick-play-lobby .lobby-header{
    display: none;
  }

  body.quickplay .quick-setup{
    display: flex;
    flex-direction: column;
    gap: 10px;
    flex: 1 1 auto;
    min-height: 0;
  }

  body.quickplay .quick-lobby-card{
    margin-top: 0;
    padding: 12px;
    border-radius: 16px;
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  body.quickplay .quick-lobby-top{
    margin-bottom: 8px;
  }

  /* Use a compact grid: Red/Blue side-by-side, Spectators underneath spanning full width. */
  body.quickplay .quick-lobby-layout{
    margin-top: 10px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr auto;
    gap: 10px;
    align-items: stretch;
    flex: 1 1 auto;
    min-height: 0;
  }

  body.quickplay .quick-team-col{
    padding: 10px;
    border-radius: 14px;
    min-width: 0;
    min-height: 180px; /* Ensure team boxes have good vertical presence */
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  body.quickplay .quick-team-col.red{ grid-column: 1; grid-row: 1; }
  body.quickplay .quick-team-col.blue{ grid-column: 2; grid-row: 1; }

  /* Make player lists expand to fill available space in team columns */
  body.quickplay .quick-team-col.red .quick-team-list,
  body.quickplay .quick-team-col.blue .quick-team-list{
    flex: 1 1 auto;
    min-height: 0;
  }

  body.quickplay .quick-team-col.spectator{
    grid-column: 1 / span 2;
    grid-row: 2;
    border: 1px solid rgba(255,255,255,0.10);
    border-radius: 14px;
    padding: 10px;
    background: rgba(0,0,0,0.22);
    max-height: 120px; /* Keep spectators compact to give more room to teams */
  }

  body.quickplay .quick-team-head{ margin-bottom: 8px; }
  body.quickplay .quick-team-title{ font-size: 12px; }

  /* Make player rows slightly tighter on phones */
  body.quickplay .quick-player{ padding: 8px 9px; border-radius: 12px; }
  body.quickplay .quick-player-name{ font-size: 12px; }
  body.quickplay .quick-player-badge{ font-size: 10px; padding: 3px 7px; }

  /* Let the lists scroll internally if needed; keep the overall lobby fixed. */
  body.quickplay .quick-team-list{
    min-height: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Keep controls compact and always visible */
  body.quickplay .quick-lobby-controls{
    margin-top: 0;
    gap: 8px;
  }

  body.quickplay .quick-lobby-status{
    margin-bottom: 6px;
    font-size: 13px;
  }

  body.quickplay .quick-rules-bar{
    padding: 8px 10px;
    border-radius: 14px;
  }

  body.quickplay .quick-rules-summary{
    font-size: 13px;
  }
}

/* Extra-tight phones (e.g., iPhone SE): squeeze spacing a bit more */
@media (max-width: 380px){
  body.quickplay .panel-game .panel-inner{ padding: 12px; padding-bottom: max(12px, env(safe-area-inset-bottom)); }
  body.quickplay .quick-lobby-layout{ gap: 8px; }
  body.quickplay .quick-team-col{ padding: 9px; }
  body.quickplay .quick-lobby-actions{ gap: 8px; }
}

@media (max-width: 520px){
  .modal{ padding: 10px; }
  .modal-card{ margin: 0; margin-top: -5vh; max-height: calc(100vh - 86px); }
}

@media (min-width: 901px){
  /* Make the lobby columns taller on desktop */
  .quick-team-col{ min-height: 52vh; }
}

/* =========================
   Launch screen
========================= */
body.launch .desktop-tabs,
body.launch .mobile-tabs,
body.launch .main-content {
  display: none !important;
}

/* On launch we don't show the tab bar; ensure layout math doesn't reserve space */
body.launch .app{ --tabs-h: 0px; }

/* On launch, keep the top band visible and pin it to the top */
body.launch .app-header{
  display: flex !important;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
}

/* Quick Play: keep the top band, but hide navigation tabs */
body.quickplay .desktop-tabs,
body.quickplay .mobile-tabs {
  display: none !important;
}
body.quickplay .app{ --tabs-h: 0px; }
body.quickplay .main-content {
  display: block !important;
}

/* Quick Play also hides the tab bar */
body.quickplay .app{ --tabs-h: 0px; }

/* Auth screen (sign in / create account) */
.auth-screen{
  position: fixed;
  top: calc(var(--header-h) + env(safe-area-inset-top));
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: clamp(18px, 4vw, 56px);
}

.auth-hero{
  text-align: center;
  padding-top: 4px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.auth-title{
  margin: 0;
  font-weight: 900;
  letter-spacing: 0.4px;
  font-size: 44px;
}

.auth-subtitle{
  margin: 0;
  color: var(--text-dim);
  font-size: 13px;
}

/* Auth page should not inherit the "push it down" launch positioning */
.auth-screen .launch-name-dock{
  margin-top: 18px !important;
}

.auth-card{
  width: 100%;
  max-width: 460px;
  border-radius: 22px;
  background: linear-gradient(180deg, var(--surface-glass), rgba(255,255,255,0.03));
  border: 1px solid var(--border-soft);
  box-shadow: var(--shadow-lg);
  padding: 26px 22px 22px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

body.light-mode .auth-card{
  background: var(--surface);
  border: 1px solid var(--border);
}

.auth-tabs{
  display:flex;
  gap: 10px;
  margin-top: 6px;
}

.auth-tabs .btn{
  padding: 10px 14px;
  border-radius: 14px;
  font-weight: 800;
}

.auth-form{
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Password field with eye toggle */
.pw-field{
  position: relative;
  display: flex;
  align-items: center;
}

/* Passwords are always visible now, so no extra right padding is needed. */
.pw-field .auth-input{
  width: 100%;
  padding-right: 13px;
}

/* Legacy eye toggle (kept for backwards compatibility, but hidden). */
.pw-toggle{
  display: none;
  position: absolute;
  right: 12px;
  width: 28px;
  height: 28px;
  border-radius: 10px;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border-soft);
  background: rgba(255,255,255,0.04);
  color: var(--text-dim);
}

.pw-toggle svg{ width: 15px; height: 15px; }

body.light-mode .pw-toggle{
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text-dim);
}

.pw-toggle:active{ transform: scale(0.98); }

/* Auth screen: Who's Online button */
.auth-online-btn{
  width: 100%;
  justify-content: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 14px;
}

.auth-online-count{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  height: 24px;
  padding: 0 10px;
  border-radius: 999px;
  font-weight: 900;
  font-size: 12px;
  background: var(--surface2);
  border: 1px solid var(--border-soft);
}

body.light-mode .auth-online-count{
  background: var(--surface);
  border: 1px solid var(--border);
}

.auth-input{
  height: 46px;
  font-size: 14px;
  border-radius: 14px;
}

.auth-submit{
  width: 100%;
  justify-content: center;
  padding: 12px 14px;
  border-radius: 14px;
  font-weight: 900;
}

.auth-hint{ text-align: center; min-height: 18px; }
.auth-note{ text-align: center; color: var(--text-dim); font-size: 12px; margin-top: -4px; }

@media (max-width: 520px){
  .auth-screen{ padding: 18px 14px; }
  .auth-card{ padding: 22px 18px 18px; border-radius: 20px; }
  .auth-title{ font-size: 34px; }
  .auth-tabs{ gap: 8px; }
  .auth-tabs .btn{ padding: 9px 12px; border-radius: 12px; }
  .auth-input{ height: 44px; border-radius: 12px; }
  .auth-submit{ padding: 11px 14px; border-radius: 12px; }
}

@media (min-width: 900px){
  .auth-screen{ padding: 56px; }
}

body.light-mode .auth-card{
  background: var(--surface);
  border: 1px solid var(--border);
}

/* Mode screen account strip */
.mode-account{
  margin-top: 18px;
  display:flex;
  align-items:center;
  justify-content: center;
  padding: 0;
  background: transparent;
  border: none;
}

.mode-account-pill{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 999px;
  background: rgba(255,255,255,.04);
  border: 1px solid var(--border);
  box-shadow: 0 10px 30px rgba(0,0,0,.18);
}

.mode-account-icon{
  width: 26px;
  height: 26px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius: 50%;
  background: var(--surface-glass);
  border: 1px solid var(--border);
  font-size: 14px;
}

.mode-account-label{
  font-size: 12px;
  color: var(--text-dim);
}

.mode-account-name{
  font-weight: 700;
  letter-spacing: .2px;
}


.launch-screen{
  position: fixed;
  top: calc(var(--header-h) + env(safe-area-inset-top));
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: flex;
  align-items: stretch;
  justify-content: center;
  padding: clamp(22px, 4vw, 64px);
}

.launch-card{
  width: 100%;
  /* Match the reference: content sits directly on the background (no giant outer card) */
  max-width: 980px;
  border-radius: 0;
  padding: 0;
  background: transparent;
  border: none;
  box-shadow: none;
  /* Layout: title area at top, signed-in pill just below, mode options centered */
  display: grid;
  grid-template-rows: auto auto 1fr;
  gap: 18px;
  /* Keep the actions closer to the middle (less empty vertical space) */
  min-height: clamp(480px, 62vh, 720px);
  margin: 0 auto;
}

.launch-hero{
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-top: 6px;
}

.launch-h1{
  margin: 0;
  font-size: 30px;
  font-weight: 900;
  letter-spacing: 0.2px;
}

.launch-sub{
  margin: 0;
  color: var(--text-dim);
  font-size: 13px;
}

.launch-signed-as{
  width: 100%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  color: var(--text-dim);
  padding: 12px 16px;
  /* Keep this higher (closer to the hero) */
  margin-top: clamp(8px, 1.6vh, 18px);
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--surface);
  max-width: 420px;
  justify-self: center;
  align-self: start;
  box-shadow: var(--shadow-sm);
}

.launch-signed-as .signed-as-name{
  color: var(--text);
  font-weight: 900;
  letter-spacing: 0.2px;
  margin-left: 6px;
}

.launch-mode-row{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
  /* Keep the cards near the middle, but slightly lower than the signed-in pill */
  margin-top: clamp(18px, 3.2vh, 34px);
  align-self: start;
}

/* Bigger, more spacious mode buttons on the launch screen */
.launch-screen .mode-card{
  /* Reference sizing */
  border-radius: 20px;
  padding: 26px 22px;
  min-height: 180px;
}

.launch-screen .mode-card-icon{
  font-size: 52px;
}

.launch-screen .mode-card-title{
  font-size: 20px;
}

.launch-screen .mode-card-desc{
  font-size: 13px;
}

/* Name dock on launch mirrors the Home name dock */
.launch-name-dock{
  width: 100%;
  max-width: 520px;
  /* Much lower on the choose screen (must override .name-dock defaults) */
  margin-left: auto;
  margin-right: auto;
  /* Near the middle of the screen on desktop (not pinned to the bottom) */
  margin-top: clamp(50px, 8vh, 120px) !important;
  margin-bottom: 0;
  align-self: center;
  text-align: center;
}

/* Give the Save button more breathing room from the input (matches reference) */
.launch-name-dock .name-dock-form .form-actions{
  margin-top: 16px !important; /* overrides inline margin:0 in HTML */
  gap: 10px;
}

/* Center the entire name UI on the launch screen (matches Home) */
.launch-name-dock .field{
  align-items: center;
}
.launch-name-dock .label{
  text-align: center;
}
.launch-name-dock .input{
  text-align: center;
}
.launch-name-dock .name-dock-value{
  text-align: center;
}


@media (max-width: 768px){
  .launch-screen{ top: calc(var(--header-h) + env(safe-area-inset-top)); }
}

@media (max-width: 640px){
  .launch-card{ padding: 0; }
  .launch-mode-row{ grid-template-columns: 1fr; }
  .launch-screen .mode-card{ min-height: 140px; padding: 22px 18px; }
  .launch-screen .mode-card-icon{ font-size: 44px; }
  .launch-h1{ font-size: 28px; }
}

.btn.disabled,
button:disabled{
  opacity: .5;
  cursor: not-allowed;
}

/* ==================== POLISH OVERRIDES ==================== */

.home-hero{ margin-bottom: 14px; }
.home-title{ font-size: 30px; letter-spacing: 0.2px; }

/* Member boxes in modals + My Team: give them room and keep them slim */
.players-list{
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.player-row{
  padding: 6px 10px;
  border-radius: 6px;
}

/* Team action button should be full width inside the modal */
#team-modal-join{
  width: 100%;
  justify-content: center;
}

/* Name dock: bottom on mobile, unobtrusive card on desktop */
.name-dock{
  width: 100%;
  /* Push the name entry lower + make it sleeker */
  margin-top: 30px;
  padding: 9px 10px;
  min-height: 34px;
  border-radius: 12px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
  backdrop-filter: blur(10px);
}

.name-dock-saved{ display:block; }
.name-saved-stack{
  display:flex;
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
}
.name-dock-label{ color: var(--text-dim); font-size: 11px; letter-spacing: 0.12em; text-transform: uppercase; }
.name-dock-value{ font-size: 16px; font-weight: 700; cursor:pointer; user-select:none; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.name-dock-form .input{ margin-bottom: 0; }
.name-dock-form .form-actions{ justify-content: flex-end; gap: 10px; }

/* Prettier first-time name entry */
.name-dock-form .label{ font-size: 11px; letter-spacing: 0.10em; text-transform: uppercase; }
.name-dock-form .input{ font-size: 12px; padding: 9px 12px; border-radius: 10px; }
.name-dock-form .form-actions{
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  gap: 8px;
  margin-top: 8px;
}
.name-dock-form .btn.primary{
  width: 100%;
  justify-content: center;
  padding: 9px 14px;
  background: rgba(59,130,246,0.72);
  border-color: rgba(59,130,246,0.28);
}
.name-dock-form .hint{ font-size: 12px; }

/* Logout button sits under the name on Home (matches input width) */
.btn.logout{
  width: 100%;
  justify-content: center;
  padding: 9px 14px;
  border-radius: 10px;
  background: rgba(239,68,68,0.18);
  border: 1px solid rgba(239,68,68,0.28);
  color: #fff;
  font-weight: 800;
}
.btn.logout:hover{
  background: rgba(239,68,68,0.26);
  border-color: rgba(239,68,68,0.36);
}


@media (max-width: 768px){
  /* Keep name always reachable on Home */
  #panel-home .panel-inner{ padding-bottom: 110px; }
  #panel-home .name-dock{
    position: sticky;
    bottom: 66px; /* above mobile tabs */
  }
}

@media (min-width: 769px){
  /* On desktop, rely on top-right header name; keep dock subtle */
  #panel-home .home-hero{ margin-top: 18px; }
  /* Pull the name card up a bit so it's not hugging the bottom */
  #panel-home .name-dock{ max-width: 520px; margin-top: 22px; margin-bottom: 6px; }
}

/* Tournament Home (desktop):
   Don't use a negative translateY on the scrollable panel content.
   A negative transform effectively hides the top part of the panel because
   the scroll container cannot scroll to negative offsets.

   If we want a slightly tighter vertical balance, reduce top padding instead. */
@media (min-width: 769px){
  body.tournament #panel-home .panel-inner{
    transform: none;
    /* Keep the hero higher than center, but not glued to the very top */
    padding-top: 56px;
  }
}

/* Tournament Home:
   The Home panel uses .panel-info which vertically centers its content.
   That makes the hero/stats block sit too low. Keep horizontal centering,
   but pin the stack near the top so it's fully visible without excess
   scrolling on both desktop and mobile. */
body.tournament #panel-home.panel-info{
  align-items: flex-start;
  justify-content: flex-start;
}
body.tournament #panel-home.panel-info .panel-inner{
  justify-content: flex-start;
  /* Push the stack down a bit so it doesn't feel jammed under the header */
  padding-top: 175px;
}

@media (min-width: 769px){
  /* Desktop: a touch lower than mobile for nicer balance on tall screens */
  body.tournament #panel-home.panel-info .panel-inner{
    padding-top: 220px;
  }
}

/* Players tab (desktop): extra top padding so you can scroll to reveal the
   heading + first rows below the fixed header/tabs strip. */
@media (min-width: 769px){
  #panel-players .panel-inner{
    padding-top: 44px;
  }
}

/* Teams page: sharp clickable list */

/* Team color indicators (visible to everyone) */
.team-color-dot{
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: var(--dot-color, rgba(255,255,255,0.18));
  box-shadow: 0 0 0 1px rgba(255,255,255,0.18);
  display: inline-block;
  flex: 0 0 auto;
}
.team-color-dot.sm{ width: 10px; height: 10px; }
.team-color-dot.muted{ background: rgba(255,255,255,0.14); }

.team-list-name{ display:flex; align-items:center; gap: 8px; }
.team-list-name-text{ min-width: 0; overflow:hidden; text-overflow: ellipsis; white-space: nowrap; }

.team-title-inline{ display:inline-flex; align-items:center; gap: 10px; }


.team-list-item{
  width: 100%;
  appearance: none;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  border-radius: 12px;
  padding: 12px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  text-align: left;
  cursor: pointer;
}

.team-list-item:hover{ background: var(--surface2); }

/* Highlight your current team in the list (very subtle) */
.team-list-item.is-mine{
  border-color: rgba(255,255,255,0.05);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.03);
}

/* In Tournament, outline your team row using your team's color */
body.tournament.has-team-color .team-list-item.is-mine{
  border-color: color-mix(in srgb, var(--team-accent) 20%, transparent);
  /* Softer glow on the Teams tab */
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--team-glow) 15%, transparent);
}

.team-list-left{ min-width: 0; }
.team-list-name{ font-size: 14px; font-weight: 700; letter-spacing: 0.1px; }
.team-list-members{
  margin-top: 3px;
  font-size: 12px;
  color: var(--text-dim);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.team-list-right{ flex: 0 0 auto; }
.team-list-count{
  font-size: 12px;
  font-weight: 700;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  opacity: 0.9;
}

/* Full team (3+ members) green pill */
.team-list-count.pill-full{
  border-color: rgba(34, 197, 94, 0.5);
  background: rgba(34, 197, 94, 0.12);
  color: rgba(34, 197, 94, 1);
}

/* Incomplete team (less than 3 members) red pill */
.team-list-count.pill-incomplete{
  border-color: rgba(239, 68, 68, 0.5);
  background: rgba(239, 68, 68, 0.12);
  color: rgba(239, 68, 68, 1);
}

/* Full team (3+ members) outline effect on the entire team row (thin, dimmed) */
.team-list-item.is-full{
  border: 1px solid var(--team-accent, rgba(34, 197, 94, 0.2));
}

/* Teams page: subtle eligibility tint (very low opacity, dimmed) */
.panel-teams .team-list-item.is-full{
  background: rgba(34, 197, 94, 0.015);
}

.panel-teams .team-list-item:not(.is-full){
  background: rgba(239, 68, 68, 0.01);
}

/* Teams page cards */
.team-card-expanded{ padding: 14px; }
.team-card-expanded .team-summary{ cursor: default; }
.team-body-compact{ margin-top: 12px; }
.team-actions{ display:flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.team-actions .hint{ min-height: 18px; }

/* My Team footer buttons */
.myteam-footer{
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid rgba(255,255,255,0.08);
  display:flex;
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
}
.myteam-footer .btn{ width: 100%; justify-content: center; }
.myteam-footer .icon-btn{
  width: 42px;
  height: 42px;
  border-radius: 12px;
}
.myteam-footer .icon-btn svg{ width: 18px; height: 18px; }

/* Floating chat button on My Team card */
.floating-chat{
  position: absolute;
  right: 14px;
  bottom: -22px;
  width: 46px;
  height: 46px;
  border-radius: 16px;
  background: rgba(59,130,246,0.16);
  border-color: rgba(59,130,246,0.28);
  box-shadow: 0 10px 26px rgba(0,0,0,0.35);
}
.floating-chat:hover{ filter: brightness(1.08); }
.floating-chat:disabled{ opacity: 0.45; filter: none; }

/* Players directory */

.team-badge{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 800;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  color: var(--text-dim);
  flex: 0 0 auto;
}
.team-badge .team-color-dot{ width: 8px; height: 8px; }

.state-pill{
  font-size: 11px;
  font-weight: 800;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  color: var(--text-dim);
  flex: 0 0 auto;
}
.state-pill.pending{ border-color: rgba(250,204,21,0.35); color: rgba(250,204,21,0.95); background: rgba(250,204,21,0.08); }
.state-pill.ok{ border-color: rgba(34,197,94,0.35); color: rgba(34,197,94,0.95); background: rgba(34,197,94,0.08); }


.players-directory{ display:flex; flex-direction: column; gap: 10px; }

/* Directory rows: name + team on the left, status/actions on the right */
.player-directory-row{ align-items: center; }
.player-directory-row .player-left{
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  gap: 4px;
  width: auto;
}
.player-directory-row .player-right{
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
  flex: 0 0 auto;
}
.player-meta{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-dim);
}
.player-meta-label{ color: var(--text-dim); }

.player-team{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 800;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  color: var(--text-dim);
  background: rgba(255,255,255,0.04);
  flex: 0 0 auto;
}
.player-team-name{ max-width: 140px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.player-tag{
  font-size: 10px;
  font-weight: 900;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.03);
  color: var(--text-dim);
}
.player-tag.ok{ border-color: rgba(34,197,94,0.35); color: rgba(34,197,94,0.95); background: rgba(34,197,94,0.08); }
.player-tag.pending{ border-color: rgba(250,204,21,0.35); color: rgba(250,204,21,0.95); background: rgba(250,204,21,0.08); }

/* Pill-style action buttons (used in Players directory) */
button.player-tag.pill-action{
  appearance: none;
  -webkit-appearance: none;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 2px 6px;
  font-size: 10px;
  font-weight: 900;
  line-height: 1.7;
  cursor: pointer;
  user-select: none;
}
button.player-tag.pill-action.invite{
  background: rgba(59,130,246,0.82);
  border-color: color-mix(in srgb, var(--accent) 60%, var(--border));
  color: rgba(255,255,255,0.98);
}
button.player-tag.pill-action.invite:hover{ filter: brightness(1.05); }
button.player-tag.pill-action.cancel{
  background: rgba(239,68,68,0.82);
  border-color: rgba(239,68,68,0.55);
  color: rgba(255,255,255,0.98);
}
button.player-tag.pill-action.cancel:hover{ filter: brightness(1.05); }
button.player-tag.pill-action:disabled{
  opacity: 0.55;
  cursor: not-allowed;
  filter: none;
}
.player-status{
  font-size: 11px;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  color: var(--text-dim);
  background: rgba(255,255,255,0.04);
  flex: 0 0 auto;
}
.player-status.ok{ border-color: rgba(34,197,94,0.35); color: rgba(34,197,94,0.95); background: rgba(34,197,94,0.08); }
.player-status.pending{ border-color: rgba(250,204,21,0.35); color: rgba(250,204,21,0.95); background: rgba(250,204,21,0.08); }
.player-status.busy{ border-color: rgba(255,255,255,0.12); color: var(--text-dim); }

/* ==================== CODENAMES GAME ==================== */

/* Game Colors */
:root {
  --game-red: #dc2626;
  --game-red-bg: rgba(220, 38, 38, 0.15);
  --game-red-border: rgba(220, 38, 38, 0.4);
  --game-blue: #2563eb;
  --game-blue-bg: rgba(37, 99, 235, 0.15);
  --game-blue-border: rgba(37, 99, 235, 0.4);
  --game-neutral: #71717a;
  --game-neutral-bg: rgba(113, 113, 122, 0.15);
  --game-neutral-border: rgba(113, 113, 122, 0.4);
  --game-assassin: #18181b;
  --game-assassin-bg: rgba(24, 24, 27, 0.9);
  --game-assassin-border: rgba(255, 255, 255, 0.2);
}

/* Game Panel */
.panel-game .panel-inner {
  max-width: 900px;
}

/* When game board is active, remove panel constraints */
.panel-game.game-active .panel-inner {
  max-width: 100%;
  padding: 0;
}

.panel-game.game-active {
  overflow: hidden;
}

/* Game Lobby */
#game-lobby h2 {
  font-size: 20px;
  margin-bottom: 4px;
}

.game-team-status {
  margin: 16px 0;
  padding: 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
}

.game-team-status .team-info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.game-team-status .team-name {
  font-weight: 700;
  font-size: 16px;
}

.game-active-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 14px;
  margin-bottom: 16px;
  background: rgba(34, 197, 94, 0.12);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 12px;
}

.game-banner-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.game-banner-title {
  font-weight: 700;
  color: var(--green);
}

.game-banner-teams {
  font-size: 13px;
  color: var(--text-dim);
}

.game-section {
  margin-top: 20px;
}

.game-section-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}

.challenges-list,
.challenge-teams-list,
.pending-challenges-list,
.active-games-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.challenge-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
}

.challenge-row.incoming {
  border-color: rgba(250, 204, 21, 0.35);
  background: rgba(250, 204, 21, 0.06);
}

.challenge-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.challenge-team-name {
  font-weight: 700;
  font-size: 14px;
}

.challenge-meta {
  font-size: 12px;
  color: var(--text-dim);
}

.challenge-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

/* Game Header */
.game-header {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 16px;
  padding: 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
}

.game-teams-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
}

.game-team {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  border-radius: 10px;
}

.game-team.red {
  background: var(--game-red-bg);
  border: 1px solid var(--game-red-border);
}

.game-team.blue {
  background: var(--game-blue-bg);
  border: 1px solid var(--game-blue-border);
}

.game-team .team-name {
  font-weight: 700;
  font-size: 14px;
}

.game-team .cards-left {
  font-size: 20px;
  font-weight: 800;
}

.game-team.red .cards-left { color: var(--game-red); }
.game-team.blue .cards-left { color: var(--game-blue); }

.game-vs {
  color: var(--text-dim);
  font-size: 12px;
  font-weight: 600;
}

.game-turn-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 14px;
}

.turn-label {
  color: var(--text-dim);
}

.turn-team {
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 6px;
}

.turn-team.red {
  background: var(--game-red-bg);
  color: var(--game-red);
}

.turn-team.blue {
  background: var(--game-blue-bg);
  color: var(--game-blue);
}

.turn-role {
  color: var(--text-dim);
  font-size: 13px;
}

/* Role Selection */
.role-selection {
  padding: 20px;
  margin-bottom: 16px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  text-align: center;
}

.role-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 16px;
}

.role-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

.role-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 16px 24px;
  min-width: 140px;
  background: var(--surface2);
  border: 2px solid var(--border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.role-btn:hover {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.1);
}

.role-btn.selected {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.15);
}

.role-btn.taken {
  opacity: 0.5;
  cursor: not-allowed;
}

.role-icon {
  font-size: 28px;
}

.role-name {
  font-weight: 700;
  font-size: 15px;
}

.role-desc {
  font-size: 11px;
  color: var(--text-dim);
}

.role-status {
  margin-top: 14px;
  font-size: 13px;
  color: var(--text-dim);
}

/* Game Board */
.game-board {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 7px;
  margin-bottom: 16px;
}

.game-card {
  /* Slightly less wide: closer to square but still rectangular */
  aspect-ratio: 1.6;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 9px;
  cursor: pointer;
  transition: all 0.15s;
  position: relative;
  overflow: hidden;
}

/* Card inner wrapper enables flip animations (used in Codenames Online style) */
.game-card .card-inner {
  position: absolute;
  inset: 0;
  transform-style: preserve-3d;
}

.game-card .card-face {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px;
  backface-visibility: hidden;
}

.game-card .card-back {
  transform: rotateY(180deg);
}

/* In Codenames Online mode we render revealed cards on the back face.
   The flip animation itself is driven by JS for newly revealed cards
   so we can avoid flipping every revealed card on initial render. */
body.og-mode .game-card {
  perspective: 1100px;
}
body.og-mode .game-card .card-inner {
  transform: rotateY(0deg);
}

/* OG (Codenames Online): selecting a card flips it face-down before confirm */
body.og-mode .game-card .card-inner {
  transition: transform var(--card-select-duration) var(--card-reveal-ease);
}
body.og-mode .game-card.pending-select:not(.revealed):not(.disabled) .card-inner {
  transform: rotateY(180deg);
}

/* Face-down back design (hide word until reveal) */
body.og-mode .game-card:not(.revealed).pending-select .card-back .card-word {
  opacity: 0;
}
body.og-mode .game-card:not(.revealed).pending-select .card-back::before {
  content: "";
  position: absolute;
  inset: 10px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(255,255,255,0.10), rgba(255,255,255,0.02));
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.10);
}
body.og-mode .game-card:not(.revealed).pending-select .card-back::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: repeating-linear-gradient(
    135deg,
    rgba(255,255,255,0.10) 0px,
    rgba(255,255,255,0.10) 10px,
    rgba(0,0,0,0.06) 10px,
    rgba(0,0,0,0.06) 20px
  );
  mix-blend-mode: overlay;
  opacity: 0.35;
}

body.og-mode .game-card.revealed .card-inner {
  transform: rotateY(180deg);
}

body.og-mode .game-card.flip-glow {
  box-shadow: 0 16px 42px rgba(0, 0, 0, 0.45), 0 0 0 2px rgba(255, 255, 255, 0.08) inset;
}

body.og-mode .game-card.pending-select:not(.revealed) .card-back{
  /* A simple "card back" look */
  background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.16), rgba(255,255,255,0.04) 45%, rgba(0,0,0,0.10) 80%),
              linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
}
body.og-mode .game-card.pending-select:not(.revealed) .card-back .card-word{
  opacity: 0;
}
body.og-mode .game-card.pending-select:not(.revealed) .card-back::after{
  content: "";
  position: absolute;
  inset: 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.18);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.20) inset;
}


.game-card:hover:not(.revealed):not(.disabled) {
  border-color: var(--accent);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.game-card.disabled {
  cursor: default;
}

.game-card .card-word {
  font-size: 9.5px;
  font-weight: 700;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  word-break: break-word;
  line-height: 1.2;
}

/* Spymaster View - Color overlay */
.game-card.spymaster-view.card-red {
  background: var(--game-red-bg);
  border-color: var(--game-red-border);
}

.game-card.spymaster-view.card-blue {
  background: var(--game-blue-bg);
  border-color: var(--game-blue-border);
}

.game-card.spymaster-view.card-neutral {
  background: var(--game-neutral-bg);
  border-color: var(--game-neutral-border);
}

.game-card.spymaster-view.card-assassin {
  background: var(--game-assassin-bg);
  border-color: var(--game-assassin-border);
}

.game-card.spymaster-view.card-assassin .card-word {
  color: #ef4444;
}

/* Revealed Cards */
.game-card.revealed {
  cursor: default;
}

.game-card.revealed.card-red {
  background: var(--game-red);
  border-color: var(--game-red);
}

.game-card.revealed.card-blue {
  background: var(--game-blue);
  border-color: var(--game-blue);
}

.game-card.revealed.card-neutral {
  background: var(--game-neutral);
  border-color: var(--game-neutral);
}

.game-card.revealed.card-assassin {
  background: #000;
  border-color: #ef4444;
}

.game-card.revealed .card-word {
  color: #fff;
}

/* Clue Area */
.clue-area {
  padding: 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-bottom: 16px;
}

.current-clue {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size: 16px;
}

.clue-label {
  color: var(--text-dim);
}

.clue-word {
  font-weight: 800;
  font-size: 20px;
  text-transform: uppercase;
}

.clue-number {
  background: var(--accent);
  color: #fff;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 14px;
}

.guesses-left {
  color: var(--text-dim);
  font-size: 13px;
  margin-left: 8px;
}

.clue-form {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

.clue-input {
  flex: 1;
  min-width: 120px;
  margin: 0;
}

.clue-num-input {
  width: 60px;
  margin: 0;
  text-align: center;
}

.operative-actions {
  display: flex;
  justify-content: center;
}

.waiting-message {
  text-align: center;
  color: var(--text-dim);
  font-size: 14px;
  padding: 8px 0;
}

/* Game Log */
.game-log {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 16px;
  max-height: 200px;
  overflow-y: auto;

  /* Single knob: all log sizing scales from this. */
  --log-font-size: 11px;
}

.game-log-title {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.game-log-entries {
  display: flex;
  flex-direction: column;
  gap: 0.45em;
  min-height: 0;
  overflow-y: auto;
}

/* Compact "pill" entries (size scales with font via em units) */
.log-entry {
  position: relative;
  contain: paint;
  box-sizing: border-box;
  width: 100%;
  overflow: hidden;

  font-size: var(--log-font-size, 11px);
line-height: 1.25;

  /* scaled pill geometry */
  padding: 0.35em 0.65em 0.35em 0.85em;
  border-radius: 0.6em;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.03);
  color: rgba(255, 255, 255, 0.92);

  /* keep entries compact while still readable */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  max-height: 3.2em;
  min-height: 1.95em;
}

.log-entry::before {
  content: "";
  position: absolute;
  inset: 0 auto 0 0;
  width: 0.22em;
  border-radius: 0.22em 0 0 0.22em;
  background: rgba(148, 163, 184, 0.35);
}

.log-entry.team-red::before { background: rgba(239, 68, 68, 0.85); }
.log-entry.team-blue::before { background: rgba(59, 130, 246, 0.85); }

/* Entry type tints */
.log-entry.type-clue {
  background: rgba(245, 158, 11, 0.10);
  border-color: rgba(245, 158, 11, 0.22);
}
.log-entry.type-start {
  background: rgba(59, 130, 246, 0.10);
  border-color: rgba(59, 130, 246, 0.20);
}
.log-entry.type-end {
  background: rgba(168, 85, 247, 0.10);
  border-color: rgba(168, 85, 247, 0.20);
}
.log-entry.type-correct {
  background: rgba(34, 197, 94, 0.10);
  border-color: rgba(34, 197, 94, 0.20);
}
.log-entry.type-wrong {
  background: rgba(239, 68, 68, 0.11);
  border-color: rgba(239, 68, 68, 0.22);
}
.log-entry.type-neutral {
  background: rgba(148, 163, 184, 0.08);
  border-color: rgba(148, 163, 184, 0.16);
}
.log-entry.type-assassin {
  background: rgba(239, 68, 68, 0.16);
  border-color: rgba(239, 68, 68, 0.34);
  box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.18) inset, 0 16px 60px rgba(0, 0, 0, 0.55);
}

.log-entry .log-quote {
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  padding: 0 0.2em;
  color: currentColor;
  text-shadow: 0 1px 0 rgba(0,0,0,0.35);
}

/* Log token colors (color specific words, keep base text readable) */
.log-entry .log-token { font-weight: 850; }
.log-entry .log-token.role { color: rgba(226, 232, 240, 0.92); font-weight: 900; }
.log-entry .log-token.action { color: rgba(191, 219, 254, 0.98); }
.log-entry .log-token.result-correct { color: rgba(34, 197, 94, 0.95); }
.log-entry .log-token.result-wrong { color: rgba(239, 68, 68, 0.95); }
.log-entry .log-token.result-neutral { color: rgba(148, 163, 184, 0.95); }
.log-entry .log-token.result-assassin { color: rgba(239, 68, 68, 1); text-shadow: 0 0 10px rgba(239,68,68,0.35); }
.log-entry .log-token.system { color: rgba(168, 85, 247, 0.95); }

.log-entry.type-clue .log-quote { color: rgba(253, 230, 138, 0.98); }
.log-entry.type-correct .log-quote { color: rgba(34, 197, 94, 0.95); }
.log-entry.type-wrong .log-quote { color: rgba(239, 68, 68, 0.95); }
.log-entry.type-neutral .log-quote { color: rgba(226, 232, 240, 0.92); }
.log-entry.type-assassin .log-quote { color: rgba(255, 255, 255, 0.98); }
.log-entry.type-start .log-quote { color: rgba(191, 219, 254, 0.98); }
.log-entry.type-end .log-quote { color: rgba(233, 213, 255, 0.98); }

.log-entry .log-team { font-weight: 700; }
.log-entry .log-team.red { color: var(--game-red); }
.log-entry .log-team.blue { color: var(--game-blue); }

.log-entry .log-clue {
  font-weight: 600;
  text-transform: uppercase;
}

.log-entry .log-result {
  color: var(--text-dim);
}

/* Hover polish */
.log-entry{
  box-shadow: none;
  transition: background 120ms ease;
}
.log-entry:hover{
  background: rgba(255, 255, 255, 0.06);
}

/* Game Actions */
.game-actions {
  display: flex;
  justify-content: center;
  gap: 12px;
}

/* Game End Modal */
.game-end-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.game-end-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 30px;
  text-align: center;
  max-width: 340px;
  width: 100%;
}

.game-end-title {
  font-size: 28px;
  font-weight: 800;
  margin-bottom: 8px;
}

.game-end-title.win { color: var(--green); }
.game-end-title.lose { color: var(--red); }

.game-end-subtitle {
  font-size: 16px;
  color: var(--text-dim);
  margin-bottom: 20px;
}

.game-end-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .game-board {
    gap: 6px;
  }

  .game-card {
    border-radius: 8px;
  }

  .game-card .card-word {
    font-size: 9px;
  }

  .game-teams-display {
    flex-wrap: wrap;
  }

  .game-team {
    padding: 6px 10px;
  }

  .game-team .team-name {
    font-size: 12px;
  }

  .game-team .cards-left {
    font-size: 16px;
  }

  .role-buttons {
    flex-direction: column;
  }

  .role-btn {
    min-width: 100%;
  }

  .clue-form {
    flex-direction: column;
  }

  .clue-input,
  .clue-num-input {
    width: 100%;
  }
}

/* ==================== COMPACT GAME LAYOUT ==================== */
/* No-scroll, full-viewport game experience */

.game-container-compact {
  display: flex;
  flex-direction: column;
  height: calc(100dvh - 120px); /* Account for header + mobile tabs */
  max-height: calc(100dvh - 120px);
  overflow: hidden;
  padding: 8px;
  gap: 8px;
}

/* Compact Header - Single Row */
.game-header-compact {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  flex-shrink: 0;
}

.game-score-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.game-team-compact {
  display: flex;
  align-items: center;
  gap: 6px;
}

.game-team-compact .team-badge {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-dim);
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.game-team-compact .cards-count {
  font-size: 22px;
  font-weight: 800;
  min-width: 24px;
  text-align: center;
}

.game-team-compact.red .cards-count { color: var(--game-red); }
.game-team-compact.blue .cards-count { color: var(--game-blue); }

.game-vs-compact {
  color: var(--text-dim);
  font-size: 11px;
  font-weight: 600;
}

.game-turn-compact {
  display: flex;
  align-items: center;
  gap: 6px;
}

.turn-indicator {
  font-weight: 700;
  font-size: 12px;
  padding: 4px 10px;
  border-radius: 6px;
}

.turn-indicator.red {
  background: var(--game-red-bg);
  color: var(--game-red);
}

.turn-indicator.blue {
  background: var(--game-blue-bg);
  color: var(--game-blue);
}

.turn-role-compact {
  font-size: 11px;
  color: var(--text-dim);
}

/* Role Selection - Compact Horizontal */
.role-selection-compact {
  padding: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  flex-shrink: 0;
}

.role-buttons-compact {
  display: flex;
  gap: 10px;
}

.role-btn-compact {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: var(--surface2);
  border: 2px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s;
}

.role-btn-compact:hover {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.1);
}

.role-btn-compact.selected {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.15);
}

.role-btn-compact.taken {
  opacity: 0.5;
  cursor: not-allowed;
}

.role-btn-compact .role-icon {
  font-size: 24px;
}

.role-btn-compact .role-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
}

.role-btn-compact .role-name {
  font-weight: 700;
  font-size: 14px;
}

.role-btn-compact .role-desc {
  font-size: 11px;
  color: var(--text-dim);
}

/* Game Board Wrapper - Fills Available Space */
.game-board-wrapper {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
  padding: 4px;
}

.game-container-compact .game-board {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-template-rows: repeat(5, 1fr);
  gap: 6px;
  width: 100%;
  max-width: min(100%, calc((100dvh - 280px) * 1.25)); /* Maintain aspect ratio */
  aspect-ratio: 5 / 4;
  margin: 0 auto;
}

.game-container-compact .game-card {
  aspect-ratio: unset;
  height: 100%;
  min-height: 0;
/* fallback */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s;
  position: relative;
  overflow: hidden;
}

.game-container-compact .game-card .card-word {
  font-size: clamp(8px, 2vw, 13px);
  font-weight: 700;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  word-break: break-word;
  line-height: 1.1;
}

/* Compact card hover - subtle scale instead of translate */
.game-container-compact .game-card:hover:not(.revealed):not(.disabled) {
  transform: scale(1.03);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Action Bar - Fixed at Bottom */
.game-action-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  flex-shrink: 0;
}

/* Compact Clue Display */
.clue-display-compact {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.clue-word-compact {
  font-weight: 800;
  font-size: 16px;
  text-transform: uppercase;
  color: var(--text);
}

.clue-number-compact {
  background: var(--accent);
  color: #fff;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 13px;
  flex-shrink: 0;
}

.guesses-left-compact {
  color: var(--text-dim);
  font-size: 12px;
}

/* Compact Clue Form */
.clue-form-compact {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.clue-input-compact {
  flex: 1;
  min-width: 80px;
  padding: 8px 12px !important;
  margin: 0 !important;
}

.clue-num-compact {
  width: 50px;
  padding: 8px !important;
  margin: 0 !important;
  text-align: center;
}

.btn-compact {
  padding: 8px 16px !important;
  font-size: 13px !important;
}

/* Operative Actions */
.operative-actions-compact {
  flex: 1;
  display: flex;
}

/* Waiting Message */
.waiting-compact {
  flex: 1;
  color: var(--text-dim);
  font-size: 13px;
}

/* Game Toolbar */
.game-toolbar {
  display: flex;
  gap: 6px;
  flex-shrink: 0;
}

.btn-icon {
  appearance: none;
  border: none;
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-dim);
  width: 36px;
  height: 36px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-icon:hover {
  background: rgba(255, 255, 255, 0.15);
  color: var(--text);
}

.btn-icon svg {
  width: 18px;
  height: 18px;
}

.btn-danger-icon:hover {
  background: rgba(239, 68, 68, 0.15);
  color: var(--red);
}

/* Game Log Popover */
.game-log-popover {
  position: fixed;
  bottom: 100px;
  right: 20px;
  width: 320px;
  max-width: calc(100vw - 40px);
  max-height: 300px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  z-index: 100;
  display: flex;
  flex-direction: column;
  overflow: hidden;


  /* Default log sizing for this container (desktop). */
  --log-font-size: 10px;
}


/* Game Log Panel (Desktop sidebar) */
.game-log-panel {
  /* On smaller viewports, this panel shares space with Clue History.
     On desktop (>=1025px) flex is overridden with tuned ratios. */
  flex: 1;
  min-height: 0;


  /* Default log sizing for the sidebar panel. */
  --log-font-size: 11px;
}


.game-log-panel .game-log-entries {
  flex: 1;
  overflow-y: auto;
  overscroll-behavior: contain;
  contain: content;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.game-log-panel .log-entry {
  /* Make the pill itself scale down with the smaller font. */
  --log-font-size: 11px;
  padding: 0.30em 0.55em 0.30em 0.75em;
  word-break: break-word;
}

.popover-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.popover-title {
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
}

.btn-close-popover {
  width: 28px;
  height: 28px;
}

.btn-close-popover svg {
  width: 14px;
  height: 14px;
}

.game-log-popover .game-log-entries {
  flex: 1;
  overflow-y: auto;
  overscroll-behavior: contain;
  contain: content;
  padding: 10px 14px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* Game Menu Popover */
.game-menu-popover {
  position: fixed;
  bottom: 100px;
  right: 20px;
  width: 200px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  z-index: 100;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.menu-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 12px;
  font-size: 13px;
  justify-content: flex-start;
  background: transparent;
  border: 1px solid transparent;
}

.menu-btn:hover {
  background: rgba(255, 255, 255, 0.08);
}

.menu-btn.danger {
  color: var(--red);
}

.menu-btn.danger:hover {
  background: rgba(239, 68, 68, 0.1);
}

.menu-btn svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

/* Popover Backdrop */
.popover-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 99;
}

/* ==================== MOBILE COMPACT LAYOUT ==================== */
@media (max-width: 768px) {
  .game-container-compact {
    height: calc(100dvh - 80px);
    max-height: calc(100dvh - 80px);
    padding: 6px;
    gap: 6px;
  }

  .game-header-compact {
    padding: 8px 10px;
    border-radius: 10px;
  }

  .game-score-row {
    gap: 8px;
  }

  .game-team-compact .team-badge {
    display: none; /* Hide team names on mobile, just show scores */
  }

  .game-team-compact .cards-count {
    font-size: 20px;
  }

  .game-turn-compact {
    gap: 4px;
  }

  .turn-indicator {
    font-size: 11px;
    padding: 3px 8px;
  }

  .turn-role-compact {
    font-size: 10px;
  }

  /* Role Selection Mobile */
  .role-selection-compact {
    padding: 10px;
  }

  .role-buttons-compact {
    gap: 8px;
  }

  .role-btn-compact {
    padding: 10px 12px;
  }

  .role-btn-compact .role-icon {
    font-size: 20px;
  }

  .role-btn-compact .role-name {
    font-size: 13px;
  }

  /* Board Mobile */
  .game-board-wrapper {
    padding: 2px;
  }

  .game-container-compact .game-board {
    gap: 4px;
    max-width: min(100%, calc((100dvh - 220px) * 1.25));
  }

  .game-container-compact .game-card {
    border-radius: 6px;
    border-width: 1.5px;
    padding: 2px;
  }

  .game-container-compact .game-card .card-word {
    font-size: clamp(7px, 2.5vw, 11px);
  }

  /* Action Bar Mobile */
  .game-action-bar {
    padding: 8px 10px;
    gap: 8px;
    border-radius: 10px;
  }

  .clue-word-compact {
    font-size: 14px;
  }

  .clue-number-compact {
    width: 22px;
    height: 22px;
    font-size: 12px;
  }

  .guesses-left-compact {
    font-size: 11px;
  }

  .clue-form-compact {
    gap: 6px;
  }

  .clue-input-compact {
    padding: 6px 10px !important;
    font-size: 13px;
  }

  .clue-num-compact {
    width: 44px;
    padding: 6px !important;
  }

  .btn-compact {
    padding: 6px 12px !important;
    font-size: 12px !important;
  }

  .btn-icon {
    width: 32px;
    height: 32px;
    border-radius: 6px;
  }

  .btn-icon svg {
    width: 16px;
    height: 16px;
  }

  /* Popovers Mobile â€” bottom sheet style */
  .game-log-popover,
  .game-menu-popover {
    bottom: 0;
    left: 0;
    right: 0;
    top: auto;
    width: 100%;
    max-width: 100%;
    border-radius: 18px 18px 0 0;
    border: none;
    background: rgba(20, 20, 25, 0.98);
    box-shadow: 0 -12px 48px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
    animation: bottomSheetSlideUp 0.25s ease;
  }

  .game-log-popover {
    max-height: 60vh;
  }

  /* Handle indicator */
  .game-log-popover::before,
  .game-menu-popover::before {
    content: '';
    display: block;
    width: 36px;
    height: 4px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
    margin: 10px auto 2px;
    flex-shrink: 0;
  }

  .game-log-popover .popover-header {
    padding: 10px 18px 12px;
    border-bottom-color: rgba(255, 255, 255, 0.08);
  }

  .game-log-popover .game-log-entries {
    padding: 12px 18px;
    padding-bottom: max(18px, env(safe-area-inset-bottom));
  }

  .game-menu-popover {
    padding: 4px 16px max(16px, env(safe-area-inset-bottom));
  }

  .game-menu-popover .menu-btn {
    padding: 16px 16px;
    font-size: 15px;
    border-radius: 12px;
  }

  .game-menu-popover .menu-btn + .menu-btn {
    margin-top: 2px;
  }

  /* Log entries comfortable sizing on mobile */
  .game-log-popover .log-entry {
  /* On mobile, the log should be tiny AND the pill should shrink with it. */
  --log-font-size: 8px;
  line-height: 1.2;
  padding: 0.30em 0.55em 0.30em 0.75em;
  max-height: 3.0em;
  min-height: 1.8em;
}

  .popover-backdrop {
    background: rgba(0, 0, 0, 0.5);
  }
}

/* Extra small screens */
@media (max-width: 380px) {
  .game-container-compact .game-card .card-word {
    font-size: 7px;
  }

  .clue-word-compact {
    font-size: 12px;
  }

  .btn-compact {
    padding: 6px 10px !important;
  }
}

/* Invites (My Team) */
#invites-list{ display:flex; flex-direction: column; gap: 10px; }
.invite-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding: 12px;
  border-radius: 12px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.10);
}
.invite-left{ min-width: 0; }
.invite-title{ font-weight: 900; font-size: 14px; letter-spacing: 0.2px; }
.invite-sub{ color: var(--text-dim); font-size: 12px; margin-top: 2px; }
.invite-actions{ display:flex; gap: 8px; flex: 0 0 auto; }

/* ==================== ONLINE COUNTER + MODAL ==================== */

.online-counter-btn {
  appearance: none;
  border: none;
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-dim);
  padding: 4px 10px;
  border-radius: 12px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-family: inherit;
  transition: background 0.15s ease, color 0.15s ease;
}

.online-counter-btn:hover {
  background: rgba(255, 255, 255, 0.12);
  color: var(--text);
}

.online-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #22c55e;
  box-shadow: 0 0 6px rgba(34, 197, 94, 0.6);
  animation: pulse-dot 2s ease-in-out infinite;
}

@keyframes pulse-dot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(0.9); }
}

.online-count {
  font-weight: 600;
  color: var(--text);
}

/* Header team pill can overflow on small screens; keep it tidy */
#header-team-pill .online-count{
  max-width: 120px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

@media (max-width: 520px){
  #header-team-pill .online-count{ max-width: 56px; }
  #header-name-pill .online-count{ max-width: 56px; }

  /* Make the top band more compact on small phones */
  .online-counter-btn{ padding: 2px 6px; gap: 4px; font-size: 9px; border-radius: 10px; }
  .online-dot{ width: 6px; height: 6px; }
  .app-header .logo{ font-size: 12px; letter-spacing: 1.6px; }
  .header-user-stack{ gap: 5px; }
  .online-counter-btn svg{ width: 8px; height: 8px; }
  .name-icon svg, .team-icon svg{ width: 10px; height: 10px; }
}

.online-label {
  color: var(--text-dim);
}

/* Name and Team pill icons */
.name-icon,
.team-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-dim);
}

.name-icon svg,
.team-icon svg {
  width: 12px;
  height: 12px;
}

#header-name-pill:hover .name-icon,
#header-team-pill:hover .team-icon {
  color: var(--text);
}

/* Online Users Modal */
.online-modal .modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.online-modal-card {
  position: fixed;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
  width: 90%;
  max-width: 360px;
  max-height: 45vh;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
}

.online-modal-body {
  padding: 16px;
  overflow-y: auto;
  max-height: calc(45vh - 60px);
}

.online-users-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.online-section-title {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
  padding: 8px 0 4px 4px;
  margin-top: 8px;
}

.online-section-title:first-child {
  margin-top: 0;
}

.online-user-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--surface-glass);
  border-radius: 10px;
}

.online-user-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.online-user-dot.online {
  background: #22c55e;
  box-shadow: 0 0 6px rgba(34, 197, 94, 0.5);
}

.online-user-dot.inactive {
  background: #f59e0b;
  box-shadow: 0 0 6px rgba(245, 158, 11, 0.4);
}

.online-user-dot.offline {
  background: #6b7280;
}

.online-user-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text);
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.online-user-team {
  font-size: 11px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text-dim);
  flex-shrink: 0;
  max-width: 140px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.online-user-status {
  font-size: 11px;
  color: var(--text-dim);
  flex-shrink: 0;
}

.online-user-delete {
  width: 18px;
  height: 18px;
  line-height: 18px;
  border-radius: 999px;
  border: none;
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-dim);
  font-size: 14px;
  font-weight: 700;
  padding: 0;
  cursor: pointer;
  flex-shrink: 0;
}

.online-user-delete:hover {
  background: rgba(255, 255, 255, 0.12);
  color: var(--text);
}

.online-user-delete:active {
  transform: scale(0.96);
}

.online-user-row.is-you .online-user-name::after {
  content: ' (you)';
  color: var(--text-dim);
  font-weight: 400;
}

/* Online Modal Tabs */
.online-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  padding: 4px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
}

.online-tab {
  flex: 1;
  padding: 10px 16px;
  border: none;
  background: transparent;
  color: var(--text-dim);
  font-size: 13px;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: background 150ms ease, color 150ms ease;
}

.online-tab:hover {
  background: var(--surface-glass);
  color: var(--text);
}

.online-tab.active {
  background: rgba(59, 130, 246, 0.2);
  color: var(--text);
}

/* Clickable Header Pills */
.header-pill.clickable {
  cursor: pointer;
  transition: background 150ms ease, transform 100ms ease;
}

.header-pill.clickable:hover {
  background: var(--surface-glass);
}

.header-pill.clickable:active {
  transform: scale(0.98);
}

/* Name Change Modal */
.name-change-modal .modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.name-change-modal-card {
  position: fixed !important;
  top: 45% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 1000;
  width: 90%;
  max-width: 260px;
  margin: 0 !important;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
}

/* Name Change Modal animation positioning fix */
.name-change-modal.modal-open .name-change-modal-card {
  transform: translate(-50%, -55%) scale(1) !important;
}

.name-change-modal:not(.modal-open) .name-change-modal-card {
  transform: translate(-50%, -55%) scale(0.95) !important;
}

/* Name change modal head - compact like online modal */
.name-change-modal .modal-head {
  padding: 10px 12px;
  border-bottom: 1px solid var(--border-soft);
}

.name-change-modal .modal-title {
  font-size: 13px;
  font-weight: 600;
}

.name-change-modal .icon-btn {
  width: 24px;
  height: 24px;
  font-size: 14px;
}

/* Name change modal body - compact */
.name-change-modal .modal-body {
  padding: 12px;
}

/* Name change form styling */
.name-change-modal .form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.name-change-modal .field {
  margin: 0;
}

.name-change-modal .label {
  font-size: 11px;
  margin-bottom: 4px;
}

.name-change-modal .input {
  padding: 8px 10px;
  font-size: 13px;
  border-radius: 8px;
}

.name-change-modal .form-actions {
  margin: 0;
}

.name-change-modal .btn.primary {
  width: 100%;
  padding: 8px 12px;
  font-size: 12px;
  border-radius: 8px;
}

/* Teammates Modal */
.teammates-modal .modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.teammates-modal-card {
  position: fixed !important;
  top: 45% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 1000;
  width: 90%;
  max-width: 280px;
  margin: 0 !important;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding-bottom: env(safe-area-inset-bottom);
}

/* Teammates Modal animation positioning fix */
.teammates-modal.modal-open .teammates-modal-card {
  transform: translate(-50%, -55%) scale(1) !important;
}

.teammates-modal:not(.modal-open) .teammates-modal-card {
  transform: translate(-50%, -55%) scale(0.95) !important;
}

/* Teammates modal head - compact like online modal */
.teammates-modal .modal-head {
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

.teammates-modal .modal-title {
  font-size: 13px;
  font-weight: 600;
}

.teammates-modal .icon-btn {
  width: 24px;
  height: 24px;
  font-size: 14px;
}

/* Teammates modal body - compact */
.teammates-modal .modal-body {
  padding: 12px;
  max-height: 50vh;
  overflow-y: auto;
}

.teammates-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.teammate-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 8px;
}

.teammate-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--team-color, #3b82f6) 0%, rgba(59, 130, 246, 0.5) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: white;
  flex-shrink: 0;
}

.teammate-info {
  flex: 1;
  min-width: 0;
}

.teammate-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.teammate-role {
  font-size: 10px;
  color: var(--text-dim);
  margin-top: 1px;
}

.teammate-row.is-you {
  border: 1px solid rgba(59, 130, 246, 0.3);
}

.teammate-row.is-owner .teammate-name::after {
  content: ' (Owner)';
  color: var(--text-dim);
  font-weight: 400;
  font-size: 11px;
}

/* ==================== SETTINGS GEAR + MODAL ==================== */

/* Settings Gear Button */
.settings-gear-btn {
  appearance: none;
  border: none;
  background: transparent;
  color: var(--text-dim);
  width: 30px;
  height: 30px;
  padding: 4px;
  border-radius: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  /* Tighten the gap between Messages and Settings icons. */
  margin-left: 1px;
  flex-shrink: 0;
}

@media (max-width: 520px){
  .settings-gear-btn{ margin-left: 1px; }
}

.settings-gear-btn svg {
  width: 16px;
  height: 16px;
}

.settings-gear-btn:hover {
  background: var(--surface2);
  color: var(--text);
}

.settings-gear-btn:active {
  transform: scale(0.95);
}

/* Team-colored gear when in tournament with team */
body.tournament.has-team-color .settings-gear-btn:hover {
  color: var(--team-accent);
}

/* Settings Modal */
.settings-modal .modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.settings-modal-card {
  position: fixed;
  top: 52%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
  width: 90%;
  /* Slightly smaller than before; content scrolls inside. */
  max-width: 280px;
  max-height: min(62vh, 520px);
  display: flex;
  flex-direction: column;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  overflow: hidden;
}

.settings-modal-body {
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1 1 auto;
  /* Scroll when content exceeds modal size (instead of growing the modal). */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Mobile: slightly smaller settings modal */
@media (max-width: 480px) {
  .settings-modal-card {
    max-width: 260px;
    max-height: min(56vh, 460px);
    top: 54%;
    border-radius: 18px;
  }
  .settings-modal-body {
    padding: 12px;
    gap: 10px;
  }
}


/* Simplified Settings UI */
.settings-simple {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.settings-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  background: var(--surface2);
  border-radius: 12px;
  cursor: pointer;
}

/* Settings rows that are actually buttons (e.g., Admin actions) */
.settings-row-action{
  width: 100%;
  border: 0;
  outline: none;
  text-align: left;
}
.settings-row-meta{
  font-size: 12px;
  font-weight: 700;
  color: var(--text-dim);
}

/* Disabled settings: visible but not clickable */
.settings-row.is-disabled,
.settings-account-actions .btn.is-disabled,
.settings-admin-actions .btn.is-disabled,
.settings-danger-actions .btn.is-disabled{
  opacity: .45;
  cursor: not-allowed;
  pointer-events: none;
}

.settings-row-volume {
  cursor: default;
}

.settings-row-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
}

.settings-row-volume .settings-volume-slider {
  flex: 1;
}

.settings-row-volume .settings-volume-value {
  min-width: 38px;
}

/* Style mode (custom dropdown) */
.settings-style-row{
  cursor: default;
}

.settings-dropdown{
  position: relative;
  /* Keep the control compact so it matches the other settings rows */
  width: 168px;
  min-width: 168px;
}

.settings-dropdown-trigger{
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 9px 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  font-weight: 800;
  font-size: 13px;
  letter-spacing: 0.15px;
  cursor: pointer;
  transition: background .15s ease, border-color .15s ease, transform .08s ease, box-shadow .15s ease;
}

.settings-dropdown-trigger:hover{
  background: var(--surface2);
}

.settings-dropdown-trigger:active{
  transform: translateY(0.5px);
}

.settings-dropdown-trigger:focus-visible{
  outline: none;
  box-shadow: var(--focus-ring);
}

.settings-dropdown-value{
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.settings-dropdown-chevron{
  color: var(--text-dim);
  font-size: 12px;
  transform: translateY(-0.5px);
}

.settings-dropdown[aria-open="true"] .settings-dropdown-trigger{
  border-color: color-mix(in srgb, var(--accent) 60%, var(--border));
  box-shadow: var(--focus-ring);
}

.settings-dropdown-menu{
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  width: 100%;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 6px;
  box-shadow: var(--shadow-md);
  z-index: 9999;
  max-height: 240px;
  overflow: auto;
}

.settings-dropdown-option{
  width: 100%;
  text-align: left;
  appearance: none;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  padding: 9px 9px;
  border-radius: 10px;
  font-weight: 800;
  font-size: 13px;
  letter-spacing: 0.1px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  transition: background .15s ease, border-color .15s ease;
}

.settings-dropdown-option:hover{
  background: var(--surface2);
}

.settings-dropdown-option:focus-visible{
  outline: none;
  box-shadow: var(--focus-ring);
}

.settings-dropdown-option[aria-selected="true"]{
  background: color-mix(in srgb, var(--accent) 18%, transparent);
  border-color: color-mix(in srgb, var(--accent) 38%, var(--border));
}

.settings-dropdown-option[aria-selected="true"]::after{
  content: "âœ“";
  color: var(--accent);
  font-weight: 900;
}

/* Small screens: dropdown should fill available width */
@media (max-width: 420px){
  .settings-dropdown{
    min-width: 0;
    width: 100%;
  }
}

.settings-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-section-title {
  font-size: 14px;
  font-weight: 700;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: 8px;
}

.settings-icon {
  font-size: 16px;
}

.settings-hint {
  font-size: 12px;
  color: var(--text-dim);
  margin-top: -4px;
}

/* Admin section inside Settings modal */
.settings-admin {
  margin-top: 10px;
  padding-top: 12px;
  border-top: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.settings-admin-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.settings-admin-actions .btn {
  width: 100%;
  justify-content: center;
}

/* Danger actions should look like regular full-width settings buttons */
.settings-danger-actions{
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.settings-danger-actions .btn{
  width: 100%;
  justify-content: center;
}

.mono {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}


/* Simplified Settings (compact) */
.settings-simple {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.settings-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  background: var(--surface2);
  border-radius: 12px;
}

.settings-row-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
}

.settings-row-volume .settings-volume-value {
  min-width: 36px;
}

/* Settings Account Actions */
.settings-account-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--border);
}

.settings-account-actions .btn {
  width: 100%;
  justify-content: center;
}

/* Toggle Switch */
.settings-toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: var(--surface2);
  border-radius: 12px;
  cursor: pointer;
}

.settings-toggle-label {
  font-size: 14px;
  color: var(--text);
}

.toggle-switch {
  position: relative;
  width: 48px;
  height: 26px;
  flex-shrink: 0;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: var(--border);
  border-radius: 26px;
}

.toggle-slider::before {
  content: "";
  position: absolute;
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background: var(--text);
  border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
  background: var(--accent);
}

.toggle-switch input:checked + .toggle-slider::before {
  transform: translateX(22px);
}

/* Team-colored toggle when in tournament */
body.tournament.has-team-color .toggle-switch input:checked + .toggle-slider {
  background: var(--team-accent);
}

/* Volume Slider */
.settings-volume-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  background: var(--surface2);
  border-radius: 12px;
}

.settings-volume-label {
  font-size: 14px;
  color: var(--text);
  white-space: nowrap;
}

.settings-volume-slider {
  flex: 1;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--border);
  border-radius: 6px;
  cursor: pointer;
}

.settings-volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  border: 2px solid var(--surface);
}

.settings-volume-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  border: 2px solid var(--surface);
}

body.tournament.has-team-color .settings-volume-slider::-webkit-slider-thumb {
  background: var(--team-accent);
}

body.tournament.has-team-color .settings-volume-slider::-moz-range-thumb {
  background: var(--team-accent);
}

.settings-volume-value {
  font-size: 13px;
  color: var(--text-dim);
  min-width: 40px;
  text-align: right;
}

.settings-test-sound {
  align-self: flex-start;
  margin-top: 4px;
}

/* ==================== ANIMATIONS ==================== */

/* Animation CSS Variables */
:root {
  --anim-duration-fast: 150ms;
  --anim-duration: 200ms;
  --anim-duration-slow: 300ms;
  --anim-duration-slower: 400ms;
  --anim-ease: cubic-bezier(0.4, 0, 0.2, 1);
  --anim-ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --anim-ease-out: cubic-bezier(0, 0, 0.2, 1);
}

/* Disable animations when preference is off */
body.no-animations,
body.no-animations * {
  animation-duration: 0ms !important;
  transition-duration: 0ms !important;
}

/* Base transitions for interactive elements */
.btn {
  transition: background var(--anim-duration-fast) var(--anim-ease),
              border-color var(--anim-duration-fast) var(--anim-ease),
              color var(--anim-duration-fast) var(--anim-ease),
              transform var(--anim-duration-fast) var(--anim-ease),
              box-shadow var(--anim-duration-fast) var(--anim-ease);
}

.btn:active {
  transform: scale(0.97);
}

.btn.primary:hover {
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

body.tournament.has-team-color .btn.primary:hover {
  box-shadow: 0 4px 12px var(--team-glow);
}

/* Tab transitions */
.desktop-tabs .tab,
.mobile-tabs .tab {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration-fast) var(--anim-ease);
}

.mobile-tabs .tab:active {
  transform: scale(0.95);
}

/* Panel/Page transitions */
.panel {
  opacity: 0;
  transform: translateY(8px);
}

.panel.active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity var(--anim-duration-slow) var(--anim-ease),
              transform var(--anim-duration-slow) var(--anim-ease);
}

/* Modal animations */
.modal {
  opacity: 0;
  visibility: hidden;
}

.modal.modal-open {
  opacity: 1;
  visibility: visible;
  transition: opacity var(--anim-duration) var(--anim-ease),
              visibility 0ms;
}

.modal:not(.modal-open) {
  transition: opacity var(--anim-duration) var(--anim-ease),
              visibility 0ms var(--anim-duration);
}

.modal-card {
  transform: scale(0.95) translateY(10px);
  opacity: 0;
}

.modal.modal-open .modal-card {
  transform: scale(1) translateY(0);
  opacity: 1;
  transition: transform var(--anim-duration-slow) var(--anim-ease-bounce),
              opacity var(--anim-duration) var(--anim-ease);
}

.modal:not(.modal-open) .modal-card {
  transition: transform var(--anim-duration) var(--anim-ease),
              opacity var(--anim-duration) var(--anim-ease);
}

.modal-backdrop {
  opacity: 0;
}

.modal.modal-open .modal-backdrop {
  opacity: 1;
  transition: opacity var(--anim-duration) var(--anim-ease);
}

/* Settings modal specific positioning fix */
.settings-modal.modal-open .settings-modal-card {
  transform: translate(-50%, -55%) scale(1);
}

.settings-modal:not(.modal-open) .settings-modal-card {
  transform: translate(-50%, -55%) scale(0.95);
}

/* Online modal specific positioning fix */
.online-modal.modal-open .online-modal-card {
  transform: translate(-50%, -50%) scale(1);
}

.online-modal:not(.modal-open) .online-modal-card {
  transform: translate(-50%, -50%) scale(0.95);
}


/* Profile details modal positioning + size */
.profile-details-modal-card{
  top: 50%;
  left: 50%;
  width: min(560px, 92vw);
  max-width: 560px;
  max-height: calc(100vh - 140px);
}

.profile-details-modal-card .modal-body{
  overflow-y: auto;
}

.profile-details-modal.modal-open .profile-details-modal-card{
  transform: translate(-50%, -50%) scale(1);
}

.profile-details-modal:not(.modal-open) .profile-details-modal-card{
  transform: translate(-50%, -50%) scale(0.95);
}

/* Card hover animations */
.mode-card {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease);
}

.mode-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-md);
}

.mode-card:active {
  transform: translateY(-2px);
}

/* Team card animations */
.team-card {
  transition: border-color var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease);
}

/* Quick Play team column hover */
.quick-team-col.selectable {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration) var(--anim-ease);
}

.quick-team-col.selectable:hover {
  transform: translateY(-2px);
}

.quick-team-col.selectable:active {
  transform: translateY(0);
}

/* Game card animations */
.game-card {
  transition: transform var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease),
              background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease);
}

.game-card:not(.revealed):hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
}

.game-card:not(.revealed):active {
  transform: translateY(-1px) scale(1);
}

/* Card reveal animation - 3D flip */
@keyframes cardReveal {
  0% {
    transform: rotateY(0deg) scale(1);
  }
  30% {
    transform: rotateY(90deg) scale(1.05);
  }
  50% {
    transform: rotateY(90deg) scale(1.05);
  }
  80% {
    transform: rotateY(0deg) scale(1.02);
  }
  100% {
    transform: rotateY(0deg) scale(1);
  }
}

.game-card.revealing {
  animation: cardReveal var(--card-reveal-duration) cubic-bezier(0.4, 0, 0.2, 1);
}

/* =========================
   DARK MODE - Card Guess: Dramatic zoom outward + bright pulse + heavy shadow
========================= */
@keyframes cardGuessDark {
  0% {
    transform: translate(0,0) scale(1);
    filter: brightness(1);
    box-shadow: none;
  }
  6% {
    transform: translate(0,0) scale(0.85);
    filter: brightness(0.7);
  }
  18% {
    transform: translate(var(--guess-tx,0px), var(--guess-ty,0px)) scale(2.4);
    filter: brightness(1.6);
    box-shadow: 0 40px 120px rgba(0,0,0,0.9), 0 0 80px rgba(255,255,255,0.15);
  }
  /* Hold large */
  40% {
    transform: translate(var(--guess-tx,0px), var(--guess-ty,0px)) scale(2.4);
    filter: brightness(1.5);
    box-shadow: 0 40px 120px rgba(0,0,0,0.9), 0 0 80px rgba(255,255,255,0.15);
  }
  /* Bright flash at midpoint */
  50% {
    transform: translate(var(--guess-tx,0px), var(--guess-ty,0px)) scale(2.5);
    filter: brightness(2.2);
    box-shadow: 0 40px 120px rgba(0,0,0,0.9), 0 0 120px rgba(255,255,255,0.3);
  }
  60% {
    transform: translate(calc(var(--guess-tx,0px)*0.5), calc(var(--guess-ty,0px)*0.5)) scale(1.8);
    filter: brightness(1.3);
    box-shadow: 0 30px 80px rgba(0,0,0,0.7);
  }
  78% {
    transform: translate(calc(var(--guess-tx,0px)*0.1), calc(var(--guess-ty,0px)*0.1)) scale(1.15);
    filter: brightness(1.1);
  }
  90% {
    transform: translate(0,0) scale(1.04);
    filter: brightness(1.02);
  }
  100% {
    transform: translate(0,0) scale(1);
    filter: brightness(1);
    box-shadow: none;
  }
}

/* =========================
   LIGHT MODE - Card Guess: Float high + dreamy glow + gentle landing
========================= */
@keyframes cardGuessLight {
  0% {
    transform: translate(0,0) scale(1) rotateZ(0deg);
    filter: brightness(1) blur(0px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    opacity: 1;
  }
  12% {
    transform: translate(0,-40px) scale(1.2) rotateZ(-1deg);
    filter: brightness(1.1);
    box-shadow: 0 50px 80px rgba(0,0,0,0.18);
  }
  28% {
    transform: translate(0,-65px) scale(1.5) rotateZ(0.5deg);
    filter: brightness(1.2);
    box-shadow: 0 70px 100px rgba(0,0,0,0.2);
  }
  /* Hold floating */
  45% {
    transform: translate(0,-65px) scale(1.5) rotateZ(0deg);
    filter: brightness(1.35) blur(2px);
    box-shadow: 0 70px 100px rgba(0,0,0,0.2);
    opacity: 0.8;
  }
  /* Bright dissolve flash */
  55% {
    transform: translate(0,-55px) scale(1.45);
    filter: brightness(1.6) blur(4px);
    opacity: 0.5;
  }
  70% {
    transform: translate(0,-15px) scale(1.08) rotateZ(0deg);
    filter: brightness(1.05) blur(0px);
    opacity: 1;
  }
  85% {
    transform: translate(0,-4px) scale(1.02);
    filter: brightness(1);
  }
  100% {
    transform: translate(0,0) scale(1) rotateZ(0deg);
    filter: brightness(1) blur(0px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    opacity: 1;
  }
}

/* =========================
   COZY MODE - Card Guess: Big pickup off table + swinging wobble + hard slam
========================= */
@keyframes cardGuessCozy {
  0% {
    transform: translate(0,0) scale(1) rotate(0deg);
    filter: brightness(1);
    box-shadow: 0 3px 8px rgba(0,0,0,0.35);
  }
  8% {
    transform: translate(0,-20px) scale(1.3) rotate(-4deg);
    filter: brightness(1.1);
    box-shadow: 0 35px 60px rgba(0,0,0,0.55);
  }
  18% {
    transform: translate(0,-55px) scale(1.65) rotate(5deg);
    filter: brightness(1.2);
    box-shadow: 0 65px 90px rgba(0,0,0,0.6);
  }
  /* Swinging hold at peak */
  30% {
    transform: translate(0,-55px) scale(1.65) rotate(-3deg);
    filter: brightness(1.25);
    box-shadow: 0 65px 90px rgba(0,0,0,0.6);
  }
  40% {
    transform: translate(0,-50px) scale(1.6) rotate(2.5deg);
    filter: brightness(1.3);
  }
  /* Slam down hard */
  52% {
    transform: translate(0,8px) scale(1.05) rotate(-1.5deg);
    filter: brightness(1.4);
    box-shadow: 0 3px 30px rgba(0,0,0,0.7);
  }
  58% {
    transform: translate(0,3px) scale(0.94) rotate(1deg);
    filter: brightness(1.15);
    box-shadow: 0 2px 15px rgba(0,0,0,0.55);
  }
  68% {
    transform: translate(0,-4px) scale(1.03) rotate(-0.4deg);
    filter: brightness(1.08);
  }
  80% {
    transform: translate(0,0) scale(0.99) rotate(0.2deg);
    filter: brightness(1.02);
  }
  100% {
    transform: translate(0,0) scale(1) rotate(0deg);
    filter: brightness(1);
    box-shadow: 0 3px 8px rgba(0,0,0,0.35);
  }
}

/* =========================
   CODENAMES ONLINE - Card Guess: Sharp scale punch + double electric flash
========================= */
@keyframes cardGuessOnline {
  0% {
    transform: translate(0,0) scale(1);
    filter: brightness(1);
    box-shadow: none;
    opacity: 1;
  }
  /* First flash - scale down + white out */
  4% {
    transform: translate(0,0) scale(0.88);
    filter: brightness(3);
    box-shadow: 0 0 60px rgba(255,255,255,0.6);
    opacity: 0.6;
  }
  /* Punch up big */
  12% {
    transform: translate(0,0) scale(1.45);
    filter: brightness(1.8);
    box-shadow: 0 0 50px rgba(255,255,255,0.35);
    opacity: 1;
  }
  /* Hold scaled up */
  28% {
    transform: translate(0,0) scale(1.4);
    filter: brightness(1.2);
    box-shadow: 0 0 30px rgba(255,255,255,0.15);
  }
  /* Second flash pulse */
  38% {
    transform: translate(0,0) scale(1.42);
    filter: brightness(2.5);
    box-shadow: 0 0 70px rgba(255,255,255,0.5);
  }
  48% {
    transform: translate(0,0) scale(1.35);
    filter: brightness(1.1);
    box-shadow: 0 0 20px rgba(255,255,255,0.1);
  }
  /* Settle back */
  70% {
    transform: translate(0,0) scale(1.06);
    filter: brightness(1.05);
  }
  85% {
    transform: translate(0,0) scale(0.98);
    filter: brightness(1);
  }
  100% {
    transform: translate(0,0) scale(1);
    filter: brightness(1);
    box-shadow: none;
    opacity: 1;
  }
}

/* =========================
   Dark mode glow overlays
========================= */
@keyframes cardRevealGlowRedDark {
  0% { box-shadow: none; }
  18% { box-shadow: 0 0 60px rgba(220,38,38,0.8), 0 0 120px rgba(220,38,38,0.4); }
  50% { box-shadow: 0 0 80px rgba(220,38,38,0.6), 0 0 160px rgba(220,38,38,0.25); }
  100% { box-shadow: none; }
}
@keyframes cardRevealGlowBlueDark {
  0% { box-shadow: none; }
  18% { box-shadow: 0 0 60px rgba(37,99,235,0.8), 0 0 120px rgba(37,99,235,0.4); }
  50% { box-shadow: 0 0 80px rgba(37,99,235,0.6), 0 0 160px rgba(37,99,235,0.25); }
  100% { box-shadow: none; }
}
@keyframes cardRevealGlowNeutralDark {
  0% { box-shadow: none; }
  25% { box-shadow: 0 0 50px rgba(161,161,170,0.6), 0 0 90px rgba(161,161,170,0.25); }
  100% { box-shadow: none; }
}
@keyframes cardRevealGlowAssassinDark {
  0% { box-shadow: none; }
  15% { box-shadow: 0 0 80px rgba(220,38,38,1), 0 0 150px rgba(0,0,0,0.8); }
  40% { box-shadow: 0 0 100px rgba(220,38,38,0.6), 0 0 200px rgba(0,0,0,1); }
  100% { box-shadow: none; }
}

/* =========================
   Light mode glow overlays
========================= */
@keyframes cardRevealGlowRedLight {
  0%, 100% { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  30% { box-shadow: 0 30px 60px rgba(201,60,43,0.3), 0 0 40px rgba(201,60,43,0.2); }
  55% { box-shadow: 0 20px 40px rgba(201,60,43,0.15); }
}
@keyframes cardRevealGlowBlueLight {
  0%, 100% { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  30% { box-shadow: 0 30px 60px rgba(26,127,181,0.3), 0 0 40px rgba(26,127,181,0.2); }
  55% { box-shadow: 0 20px 40px rgba(26,127,181,0.15); }
}
@keyframes cardRevealGlowNeutralLight {
  0%, 100% { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  30% { box-shadow: 0 25px 50px rgba(120,120,120,0.25), 0 0 30px rgba(120,120,120,0.15); }
}
@keyframes cardRevealGlowAssassinLight {
  0%, 100% { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  25% { box-shadow: 0 20px 60px rgba(0,0,0,0.45), 0 0 40px rgba(220,38,38,0.3); }
  50% { box-shadow: 0 15px 40px rgba(0,0,0,0.3); }
}

/* =========================
   Cozy mode glow overlays (warm, amber-tinted)
========================= */
@keyframes cardRevealGlowRedCozy {
  0%, 100% { box-shadow: 0 3px 8px rgba(0,0,0,0.35); }
  20% { box-shadow: 0 30px 60px rgba(200,85,58,0.55), 0 0 45px rgba(200,85,58,0.3); }
  50% { box-shadow: 0 15px 35px rgba(200,85,58,0.3); }
}
@keyframes cardRevealGlowBlueCozy {
  0%, 100% { box-shadow: 0 3px 8px rgba(0,0,0,0.35); }
  20% { box-shadow: 0 30px 60px rgba(59,139,235,0.5), 0 0 45px rgba(59,139,235,0.25); }
  50% { box-shadow: 0 15px 35px rgba(59,139,235,0.2); }
}
@keyframes cardRevealGlowNeutralCozy {
  0%, 100% { box-shadow: 0 3px 8px rgba(0,0,0,0.35); }
  25% { box-shadow: 0 25px 50px rgba(212,197,169,0.5), 0 0 30px rgba(212,197,169,0.25); }
}
@keyframes cardRevealGlowAssassinCozy {
  0%, 100% { box-shadow: 0 3px 8px rgba(0,0,0,0.35); }
  20% { box-shadow: 0 20px 60px rgba(58,58,58,0.8), 0 0 50px rgba(200,85,58,0.4); }
  45% { box-shadow: 0 12px 35px rgba(58,58,58,0.6); }
}

/* =========================
   Codenames Online mode glow overlays (electric, vivid)
========================= */
@keyframes cardRevealGlowRedOnline {
  0% { box-shadow: none; }
  5% { box-shadow: 0 0 70px rgba(255,82,65,0.9), 0 0 25px rgba(255,255,255,0.5); }
  20% { box-shadow: 0 0 40px rgba(255,82,65,0.5); }
  38% { box-shadow: 0 0 60px rgba(255,82,65,0.7), 0 0 20px rgba(255,255,255,0.3); }
  100% { box-shadow: none; }
}
@keyframes cardRevealGlowBlueOnline {
  0% { box-shadow: none; }
  5% { box-shadow: 0 0 70px rgba(0,142,224,0.9), 0 0 25px rgba(255,255,255,0.5); }
  20% { box-shadow: 0 0 40px rgba(0,142,224,0.5); }
  38% { box-shadow: 0 0 60px rgba(0,142,224,0.7), 0 0 20px rgba(255,255,255,0.3); }
  100% { box-shadow: none; }
}
@keyframes cardRevealGlowNeutralOnline {
  0% { box-shadow: none; }
  5% { box-shadow: 0 0 60px rgba(175,153,115,0.8), 0 0 20px rgba(255,255,255,0.4); }
  20% { box-shadow: 0 0 30px rgba(175,153,115,0.4); }
  38% { box-shadow: 0 0 45px rgba(175,153,115,0.5); }
  100% { box-shadow: none; }
}
@keyframes cardRevealGlowAssassinOnline {
  0% { box-shadow: none; }
  5% { box-shadow: 0 0 80px rgba(255,50,30,1), 0 0 30px rgba(255,255,255,0.5); }
  20% { box-shadow: 0 0 60px rgba(0,0,0,0.9), 0 0 100px rgba(255,50,30,0.4); }
  50% { box-shadow: 0 0 35px rgba(0,0,0,0.6); }
  100% { box-shadow: none; }
}

/* =========================
   Universal card selection + reveal animation
   - Same across ALL styles
   - Intentionally slow and very smooth
========================= */

@keyframes cardGuessUniversal {
  0% {
    transform: translate(0,0) scale(1);
    filter: brightness(1) blur(0px);
    box-shadow: none;
  }
  /* ease into the motion */
  16% {
    transform: translate(calc(var(--guess-tx,0px) * 0.35), calc(var(--guess-ty,0px) * 0.35)) scale(1.14);
    filter: brightness(1.08) blur(0px);
  }
  /* slow, readable hold */
  46% {
    transform: translate(var(--guess-tx,0px), var(--guess-ty,0px)) scale(1.55);
    filter: brightness(1.18) blur(0px);
  }
  62% {
    transform: translate(var(--guess-tx,0px), var(--guess-ty,0px)) scale(1.55);
    filter: brightness(1.18) blur(0px);
  }
  /* glide back */
  86% {
    transform: translate(calc(var(--guess-tx,0px) * 0.18), calc(var(--guess-ty,0px) * 0.18)) scale(1.06);
    filter: brightness(1.06) blur(0px);
  }
  100% {
    transform: translate(0,0) scale(1);
    filter: brightness(1) blur(0px);
    box-shadow: none;
  }
}

@keyframes cardRevealGlowUniversal {
  0% { box-shadow: none; }
  10% { box-shadow: 0 0 26px var(--reveal-glow, rgba(255,255,255,0.25)), 0 18px 65px rgba(0,0,0,0.55); }
  46% { box-shadow: 0 0 48px var(--reveal-glow-strong, rgba(255,255,255,0.35)), 0 30px 110px rgba(0,0,0,0.60); }
  62% { box-shadow: 0 0 48px var(--reveal-glow-strong, rgba(255,255,255,0.35)), 0 30px 110px rgba(0,0,0,0.60); }
  92% { box-shadow: 0 0 18px var(--reveal-glow, rgba(255,255,255,0.20)), 0 12px 45px rgba(0,0,0,0.40); }
  100% { box-shadow: none; }
}

.game-card.guess-animate {
  animation: cardGuessUniversal var(--card-reveal-duration) var(--card-reveal-ease) forwards,
             cardRevealGlowUniversal var(--card-reveal-duration) ease forwards;
  z-index: 50;
  position: relative;
  transform-origin: var(--guess-ox, 50%) var(--guess-oy, 50%);
  will-change: transform, filter, box-shadow;
}

.game-card.guess-animate.card-red {
  --reveal-glow: rgba(239, 68, 68, 0.45);
  --reveal-glow-strong: rgba(239, 68, 68, 0.70);
}
.game-card.guess-animate.card-blue {
  --reveal-glow: rgba(59, 130, 246, 0.45);
  --reveal-glow-strong: rgba(59, 130, 246, 0.70);
}
.game-card.guess-animate.card-neutral {
  --reveal-glow: rgba(175, 153, 115, 0.40);
  --reveal-glow-strong: rgba(175, 153, 115, 0.62);
}
.game-card.guess-animate.card-assassin {
  --reveal-glow: rgba(255, 60, 45, 0.55);
  --reveal-glow-strong: rgba(255, 60, 45, 0.85);
}

/* Slow selection animation (runs once when you pick a card) */
@keyframes cardSelectUniversal {
  0% { transform: translateY(0) scale(1); filter: brightness(1); }
  22% { transform: translateY(-2px) scale(1.04); filter: brightness(1.06); }
  54% { transform: translateY(-2px) scale(1.08); filter: brightness(1.08); }
  74% { transform: translateY(-1px) scale(1.03); filter: brightness(1.04); }
  100% { transform: translateY(0) scale(1); filter: brightness(1); }
}

.game-card.select-animate {
  animation: cardSelectUniversal var(--card-select-duration) var(--card-reveal-ease) forwards;
  will-change: transform, filter;
}

/* Card pulse animation for hints */
@keyframes cardPulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
  }
}

.game-card.pulse {
  animation: cardPulse 1.5s ease infinite;
}

/* ===== Clue Announcement Overlay - Dramatic Reveal ===== */

@keyframes clueBackdropIn {
  0% { opacity: 0; }
  15% { opacity: 1; }
  85% { opacity: 1; }
  100% { opacity: 1; }
}

@keyframes clueCardSlam {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.25) rotateX(15deg);
  }
  8% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.98) rotateX(-2deg);
  }
  16% {
    transform: translate(-50%, -50%) scale(0.82) rotateX(1deg);
  }
  22% {
    transform: translate(-50%, -50%) scale(0.88) rotateX(0deg);
  }
  28% {
    transform: translate(-50%, -50%) scale(0.85) rotateX(0deg);
  }
  85% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.85) rotateX(0deg);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.85) rotateX(0deg);
  }
}

@keyframes clueGlowPulse {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.1); }
}

@keyframes clueWordReveal {
  0% { opacity: 0; transform: translateY(20px); letter-spacing: 12px; }
  20% { opacity: 1; }
  35% { transform: translateY(0); letter-spacing: 4px; }
  100% { opacity: 1; transform: translateY(0); letter-spacing: 4px; }
}

@keyframes clueNumberPop {
  0% { opacity: 0; transform: scale(0); }
  30% { opacity: 0; transform: scale(0); }
  50% { opacity: 1; transform: scale(1.3); }
  65% { transform: scale(0.95); }
  75% { transform: scale(1.05); }
  85% { transform: scale(1); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes clueDividerGrow {
  0% { width: 0; opacity: 0; }
  25% { opacity: 0; }
  50% { width: 80%; opacity: 1; }
  100% { width: 80%; opacity: 1; }
}

@keyframes clueDismiss {
  0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8) translateY(-30px); }
}

@keyframes clueBgDismiss {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

/* =========================
   Style-specific clue reveal animations
   (Dark mode keeps the existing dramatic slam.)
========================= */

@keyframes clueBackdropLight {
  0% { opacity: 0; }
  20% { opacity: 1; }
  100% { opacity: 1; }
}

@keyframes clueCardLight {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.92) translateY(26px); }
  18% { opacity: 1; transform: translate(-50%, -50%) scale(1.02) translateY(-6px); }
  35% { transform: translate(-50%, -50%) scale(1) translateY(0px); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1) translateY(0px); }
}

@keyframes clueBackdropCozy {
  0% { opacity: 0; backdrop-filter: blur(0px); }
  12% { opacity: 0.7; }
  30% { opacity: 1; backdrop-filter: blur(4px); }
  100% { opacity: 1; backdrop-filter: blur(4px); }
}

@keyframes clueCardCozy {
  0% {
    opacity: 0;
    transform: translate(-50%, -20%) scale(0.3) rotate(-8deg);
    filter: blur(6px);
  }
  10% {
    opacity: 0.6;
    transform: translate(-50%, -55%) scale(0.7) rotate(4deg);
    filter: blur(2px);
  }
  22% {
    opacity: 1;
    transform: translate(-50%, -48%) scale(1.08) rotate(-1.5deg);
    filter: blur(0px);
  }
  32% {
    transform: translate(-50%, -51%) scale(1.02) rotate(0.8deg);
  }
  44% {
    transform: translate(-50%, -50%) scale(0.98) rotate(-0.3deg);
  }
  55% {
    transform: translate(-50%, -50%) scale(1.01) rotate(0.1deg);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
    filter: blur(0px);
  }
}

@keyframes clueBackdropOnline {
  0% { opacity: 0; }
  6% { opacity: 1; }
  100% { opacity: 1; }
}

@keyframes clueCardOnline {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(2.5) rotateX(0deg);
    filter: brightness(3) blur(12px);
  }
  8% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.92) rotateX(0deg);
    filter: brightness(1.4) blur(0px);
  }
  16% {
    transform: translate(-50%, -50%) scale(1.05) rotateX(0deg);
    filter: brightness(1);
  }
  24% {
    transform: translate(-50%, -50%) scale(0.99) rotateX(0deg);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) rotateX(0deg);
    filter: brightness(1) blur(0px);
  }
}

body.light-mode .clue-announcement-backdrop { animation: clueBackdropLight 2.8s ease forwards !important; }
body.light-mode .clue-announcement-card { animation: clueCardLight 2.8s cubic-bezier(0.16, 1, 0.3, 1) forwards !important; }

body.cozy-mode .clue-announcement-backdrop { animation: clueBackdropCozy 3.1s ease forwards !important; }
body.cozy-mode .clue-announcement-card { animation: clueCardCozy 3.1s cubic-bezier(0.16, 1, 0.3, 1) forwards !important; }

body.og-mode .clue-announcement-backdrop { animation: clueBackdropOnline 2.4s ease forwards !important; }
body.og-mode .clue-announcement-card { animation: clueCardOnline 2.4s cubic-bezier(0.16, 1, 0.3, 1) forwards !important; }

/* Style-specific inner clue animations (word/number/divider)
   Dark mode keeps the existing dramatic animations. */

@keyframes clueWordRevealLight {
  0% { opacity: 0; transform: translateY(14px); filter: blur(3px); letter-spacing: 6px; }
  35% { opacity: 1; filter: blur(0px); }
  55% { transform: translateY(0); letter-spacing: 2px; }
  100% { opacity: 1; transform: translateY(0); filter: blur(0px); letter-spacing: 2px; }
}

@keyframes clueNumberPopLight {
  0% { opacity: 0; transform: scale(0.65); filter: blur(2px); }
  35% { opacity: 0; transform: scale(0.65); }
  55% { opacity: 1; transform: scale(1.18); filter: blur(0px); }
  72% { transform: scale(0.98); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes clueDividerGrowLight {
  0% { width: 0; opacity: 0; transform: translateY(2px); }
  40% { opacity: 0; }
  70% { width: 78%; opacity: 1; transform: translateY(0); }
  100% { width: 78%; opacity: 1; }
}

@keyframes clueWordRevealCozy {
  0% { opacity: 0; transform: translateY(30px) scale(0.6) rotate(-3deg); filter: blur(4px); letter-spacing: 14px; }
  20% { opacity: 0.5; transform: translateY(8px) scale(0.9) rotate(1.5deg); filter: blur(1px); }
  38% { opacity: 1; transform: translateY(-3px) scale(1.04) rotate(-0.5deg); filter: blur(0px); letter-spacing: 4px; }
  52% { transform: translateY(1px) scale(0.99) rotate(0.2deg); }
  100% { opacity: 1; transform: translateY(0px) scale(1) rotate(0deg); letter-spacing: 3px; }
}

@keyframes clueNumberPopCozy {
  0% { opacity: 0; transform: scale(0) rotate(-15deg); }
  35% { opacity: 0; transform: scale(0) rotate(-15deg); }
  50% { opacity: 1; transform: scale(1.6) rotate(6deg); }
  62% { transform: scale(0.85) rotate(-3deg); }
  74% { transform: scale(1.12) rotate(1.5deg); }
  86% { transform: scale(0.97) rotate(-0.5deg); }
  100% { opacity: 1; transform: scale(1) rotate(0deg); }
}

@keyframes clueDividerGrowCozy {
  0% { width: 0; opacity: 0; transform: scaleY(3) rotate(-2deg); }
  40% { opacity: 0; width: 0; }
  58% { width: 90%; opacity: 1; transform: scaleY(1.3) rotate(0.5deg); }
  72% { width: 78%; transform: scaleY(1) rotate(0deg); }
  100% { width: 82%; opacity: 1; transform: scaleY(1) rotate(0deg); }
}

@keyframes clueWordRevealOnline {
  0% { opacity: 0; transform: translateX(-20px) scale(1.1); letter-spacing: 0px; filter: brightness(2.5); }
  10% { opacity: 1; transform: translateX(3px) scale(1); filter: brightness(1.6); }
  20% { transform: translateX(0px) scale(1); letter-spacing: 2px; filter: brightness(1); }
  100% { opacity: 1; transform: translateX(0px) scale(1); letter-spacing: 2px; filter: brightness(1); }
}

@keyframes clueNumberPopOnline {
  0% { opacity: 0; transform: scale(0); }
  25% { opacity: 0; transform: scale(0); }
  32% { opacity: 1; transform: scale(1.08); filter: brightness(2); }
  42% { transform: scale(1); filter: brightness(1); }
  100% { opacity: 1; transform: scale(1); filter: brightness(1); }
}

@keyframes clueDividerGrowOnline {
  0% { width: 0; opacity: 0; }
  20% { opacity: 0; width: 0; }
  28% { width: 80%; opacity: 1; }
  36% { width: 74%; }
  100% { width: 76%; opacity: 1; }
}

body.light-mode .clue-announcement-word { animation-name: clueWordRevealLight !important; }
body.light-mode .clue-announcement-number,
body.light-mode .clue-announcement-for { animation-name: clueNumberPopLight !important; }
body.light-mode .clue-announcement-divider { animation-name: clueDividerGrowLight !important; }

body.cozy-mode .clue-announcement-word { animation-name: clueWordRevealCozy !important; }
body.cozy-mode .clue-announcement-number,
body.cozy-mode .clue-announcement-for { animation-name: clueNumberPopCozy !important; }
body.cozy-mode .clue-announcement-divider { animation-name: clueDividerGrowCozy !important; }

body.og-mode .clue-announcement-word { animation-name: clueWordRevealOnline !important; }
body.og-mode .clue-announcement-number,
body.og-mode .clue-announcement-for { animation-name: clueNumberPopOnline !important; }
body.og-mode .clue-announcement-divider { animation-name: clueDividerGrowOnline !important; }

.clue-announcement-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 9999;
  pointer-events: auto;
  cursor: pointer;
}

.clue-announcement-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.65);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  animation: clueBackdropIn 5.5s ease forwards;
}

.clue-announcement-card {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(10, 10, 18, 0.97);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border-radius: 16px;
  padding: 20px 34px;
  text-align: center;
  min-width: 240px;
  animation: clueCardSlam 5.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  perspective: 1000px;
}

.clue-announcement-card.team-red {
  border: 2px solid rgba(220, 38, 38, 0.6);
  box-shadow:
    0 25px 80px rgba(0, 0, 0, 0.7),
    0 0 60px rgba(220, 38, 38, 0.25),
    0 0 120px rgba(220, 38, 38, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.clue-announcement-card.team-blue {
  border: 2px solid rgba(37, 99, 235, 0.6);
  box-shadow:
    0 25px 80px rgba(0, 0, 0, 0.7),
    0 0 60px rgba(37, 99, 235, 0.25),
    0 0 120px rgba(37, 99, 235, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.clue-announcement-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 160%;
  height: 160%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  pointer-events: none;
  animation: clueGlowPulse 2s ease-in-out infinite;
  z-index: -1;
}

.clue-announcement-glow.team-red {
  background: radial-gradient(ellipse, rgba(220, 38, 38, 0.15) 0%, transparent 70%);
}

.clue-announcement-glow.team-blue {
  background: radial-gradient(ellipse, rgba(37, 99, 235, 0.15) 0%, transparent 70%);
}

.clue-announcement-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 3px;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 12px;
  font-weight: 600;
}

.clue-announcement-card.team-red .clue-announcement-label {
  color: rgba(252, 165, 165, 0.7);
}

.clue-announcement-card.team-blue .clue-announcement-label {
  color: rgba(147, 197, 253, 0.7);
}

.clue-announcement-word {
  font-size: 30px;
  font-weight: 900;
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 3px;
  line-height: 1.2;
  /* Make the clue word readable against any scene behind it */
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 18px;
  margin: 0 auto;
  background: linear-gradient(180deg, rgba(0,0,0,0.62), rgba(0,0,0,0.30));
  border: 1px solid rgba(255, 255, 255, 0.14);
  border-radius: 16px;
  box-shadow:
    0 14px 40px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.08);
  max-width: min(82vw, 720px);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  text-shadow: 0 2px 20px rgba(0, 0, 0, 0.6);
  animation: clueWordReveal 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-announcement-word::before{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.00) 55%),
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.08) 0px,
      rgba(255,255,255,0.08) 1px,
      rgba(0,0,0,0.00) 1px,
      rgba(0,0,0,0.00) 6px
    );
  opacity: 0.18;
  pointer-events: none;
  mix-blend-mode: overlay;
}

.clue-announcement-divider {
  height: 3px;
  margin: 12px auto;
  border-radius: 2px;
  animation: clueDividerGrow 1.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-announcement-divider.team-red {
  background: linear-gradient(90deg, transparent, rgba(220, 38, 38, 0.8), transparent);
}

.clue-announcement-divider.team-blue {
  background: linear-gradient(90deg, transparent, rgba(37, 99, 235, 0.8), transparent);
}

.clue-announcement-number-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.clue-announcement-for {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.4);
  font-weight: 500;
  text-transform: lowercase;
  font-style: italic;
  animation: clueNumberPop 1.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-announcement-number {
  font-size: 24px;
  font-weight: 900;
  margin-top: 0;
  animation: clueNumberPop 1.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-announcement-number.team-red {
  color: #ef4444;
  text-shadow: 0 0 30px rgba(239, 68, 68, 0.5);
}

.clue-announcement-number.team-blue {
  color: #3b82f6;
  text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
}

.clue-announcement-overlay.clue-announcement-dismissing .clue-announcement-card {
  animation: clueDismiss 0.6s cubic-bezier(0.4, 0, 1, 1) forwards;
}

.clue-announcement-overlay.clue-announcement-dismissing .clue-announcement-backdrop {
  animation: clueBgDismiss 0.6s ease forwards;
}

@media (max-width: 768px) {
  .clue-announcement-card {
    padding: 22px 36px;
    min-width: 240px;
  }
  .clue-announcement-word {
    font-size: 28px;
  }
  .clue-announcement-number {
    font-size: 24px;
  }
}

@media (max-width: 480px) {
  .clue-announcement-card {
    padding: 18px 24px;
    min-width: 200px;
  }
  .clue-announcement-word {
    font-size: 22px;
    letter-spacing: 2px;
  }
  .clue-announcement-number {
    font-size: 20px;
  }
}


/* =========================
   Non-dark clue reveal variants
   - Light / Cozy / OG modes avoid any card "box" and avoid blurred backdrops.
   - Dark mode remains the only style with the black card + blur.
========================= */



/* Improve clue readability during non-dark animations (no dark-mode card/blur) */
.clue-variant-light .clue-light-container::before,
.clue-variant-cozy .clue-cozy-container::before,
.clue-variant-og .clue-og-container::before{
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: min(720px, 92vw);
  height: min(220px, 34vh);
  border-radius: 26px;
  background: rgba(255,255,255,0.16);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 18px 70px rgba(0,0,0,0.25);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  opacity: 0;
  animation: clueChipIn 1.05s var(--card-reveal-ease) forwards;
  pointer-events: none;
}

/* OG runs on a dark background; give the chip a slightly darker tint */
.clue-variant-og .clue-og-container::before{
  background: rgba(0,0,0,0.28);
  border: 1px solid rgba(255,255,255,0.10);
}

@keyframes clueChipIn {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.98); }
  28% { opacity: 0.92; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 0.92; transform: translate(-50%, -50%) scale(1); }
}

/* Shared: keep overlay click-to-dismiss but visually transparent for non-dark variants */
.clue-variant-light,
.clue-variant-cozy,
.clue-variant-og {
  background: transparent;
}

/* ---------- LIGHT MODE: clean typography + underline draw + badge ---------- */
.clue-variant-light.team-red { --clue-accent: #ef4444; --clue-accent-soft: rgba(239, 68, 68, 0.20); }
.clue-variant-light.team-blue { --clue-accent: #3b82f6; --clue-accent-soft: rgba(59, 130, 246, 0.20); }

.clue-variant-light .clue-light-container {
  position: absolute;
  left: 50%;
  top: 18%;
  transform: translate(-50%, 0);
  text-align: center;
  pointer-events: none;
}

.clue-variant-light .clue-light-label {
  font-size: 12px;
  letter-spacing: 6px;
  text-transform: uppercase;
  opacity: 0.7;
  transform: translateY(-6px);
  animation: clueLightLabel 2.9s ease forwards;
}

.clue-variant-light .clue-light-word {
  font-size: clamp(40px, 6vw, 68px);
  font-weight: 900;
  letter-spacing: 10px;
  text-transform: uppercase;
  line-height: 1.0;
  text-shadow: 0 10px 40px rgba(0,0,0,0.15);
  color: var(--text, #111);
  animation: clueLightWord 2.9s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-variant-light .clue-light-row {
  margin-top: 10px;
  display: inline-flex;
  align-items: center;
  gap: 12px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 4px;
  opacity: 0;
  animation: clueLightRow 2.9s ease forwards;
}

.clue-variant-light .clue-light-for {
  font-size: 12px;
  opacity: 0.65;
}

.clue-variant-light .clue-light-num {
  font-size: 16px;
  color: var(--clue-accent);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 2px solid var(--clue-accent);
  box-shadow: 0 10px 30px var(--clue-accent-soft);
  transform: rotate(-14deg);
  animation: clueLightBadge 2.9s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-variant-light .clue-light-underline {
  height: 3px;
  width: min(560px, 86vw);
  margin: 16px auto 0;
  background: linear-gradient(90deg, transparent, var(--clue-accent), transparent);
  transform: scaleX(0);
  transform-origin: center;
  opacity: 0;
  filter: drop-shadow(0 12px 22px var(--clue-accent-soft));
  animation: clueLightUnderline 2.9s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes clueLightLabel {
  0% { opacity: 0; transform: translateY(10px); }
  18% { opacity: 0.75; transform: translateY(0px); }
  100% { opacity: 0.75; transform: translateY(0px); }
}

@keyframes clueLightWord {
  0% { opacity: 0; transform: translateY(10px) scale(0.99); letter-spacing: 12px; filter: blur(0px); }
  16% { opacity: 1; transform: translateY(0px) scale(1); letter-spacing: 10px; filter: blur(0px); }
  46% { opacity: 1; transform: translateY(0px) scale(1); letter-spacing: 10px; }
  100% { opacity: 1; transform: translateY(0px) scale(1); letter-spacing: 10px; }
}

@keyframes clueLightRow {
  0% { opacity: 0; transform: translateY(8px); }
  20% { opacity: 1; transform: translateY(0px); }
  100% { opacity: 1; transform: translateY(0px); }
}

@keyframes clueLightBadge {
  0% { transform: scale(0.7) rotate(-18deg); opacity: 0; }
  14% { transform: scale(1.08) rotate(-8deg); opacity: 1; }
  32% { transform: scale(1) rotate(-10deg); opacity: 1; }
  100% { transform: scale(1) rotate(-10deg); opacity: 1; }
}

@keyframes clueLightUnderline {
  0% { opacity: 0; transform: scaleX(0); }
  44% { opacity: 0; transform: scaleX(0); }
  62% { opacity: 1; transform: scaleX(1); }
  100% { opacity: 1; transform: scaleX(1); }
}

.clue-announcement-overlay.clue-announcement-dismissing.clue-variant-light .clue-light-container {
  animation: clueLightDismiss 0.55s ease forwards;
}

@keyframes clueLightDismiss {
  to { opacity: 0; transform: translate(-50%, -8px); }
}

/* ---------- COZY MODE: hand-drawn scribble ring + warm wobble ---------- */
.clue-variant-cozy.team-red { --clue-accent: #d4734e; --clue-accent-soft: rgba(212, 115, 78, 0.24); }
.clue-variant-cozy.team-blue { --clue-accent: #5aa3e8; --clue-accent-soft: rgba(90, 163, 232, 0.22); }

.clue-variant-cozy .clue-cozy-container {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  pointer-events: none;
  animation: clueCozyFloatIn 3.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-variant-cozy .clue-cozy-label {
  font-size: 12px;
  letter-spacing: 4px;
  text-transform: lowercase;
  opacity: 0.75;
  margin-bottom: 6px;
}

.clue-variant-cozy .clue-cozy-word {
  text-shadow: 0 10px 40px rgba(0,0,0,0.30);
  font-size: clamp(34px, 6vw, 58px);
  font-weight: 900;
  letter-spacing: 6px;
  text-transform: uppercase;
  color: var(--text, #fff);
  text-shadow: 0 8px 26px rgba(0,0,0,0.35);
  animation: clueCozyWobble 1.25s ease-in-out 0.35s both;
}

.clue-variant-cozy .clue-cozy-pill {
  margin: 14px auto 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 84px;
  height: 84px;
  border-radius: 999px;
  border: 2px dashed var(--clue-accent);
  box-shadow: 0 16px 34px var(--clue-accent-soft);
  color: var(--clue-accent);
  text-transform: lowercase;
  font-weight: 900;
  opacity: 0;
  animation: clueCozyBadge 3.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-variant-cozy .clue-cozy-for {
  font-size: 13px;
  opacity: 0.85;
  transform: rotate(-4deg);
}

.clue-variant-cozy .clue-cozy-num {
  font-size: 22px;
  transform: rotate(6deg);
}

.clue-variant-cozy .clue-cozy-scribble {
  position: absolute;
  left: 50%;
  top: 50%;
  width: min(280px, 78vw);
  height: min(280px, 78vw);
  transform: translate(-50%, -50%) rotate(-6deg);
  pointer-events: none;
  filter: drop-shadow(0 18px 34px rgba(0,0,0,0.25));
}

.clue-variant-cozy .clue-cozy-path,
.clue-variant-cozy .clue-cozy-path2 {
  fill: none;
  stroke: var(--clue-accent);
  stroke-width: 3.2;
  stroke-linecap: round;
  stroke-linejoin: round;
  opacity: 0.9;
  stroke-dasharray: 800;
  stroke-dashoffset: 800;
  animation: clueCozyDraw 1.25s ease 0.12s forwards;
}

.clue-variant-cozy .clue-cozy-path2 {
  opacity: 0.55;
  stroke-width: 2.4;
  animation-delay: 0.2s;
}

@keyframes clueCozyDraw {
  to { stroke-dashoffset: 0; }
}

@keyframes clueCozyFloatIn {
  0% { opacity: 0; transform: translate(-50%, -42%) scale(0.92) rotate(-2deg); }
  14% { opacity: 1; transform: translate(-50%, -52%) scale(1.02) rotate(1deg); }
  26% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
}

@keyframes clueCozyWobble {
  0% { transform: translateY(10px) rotate(-2deg); opacity: 0; }
  45% { transform: translateY(-2px) rotate(1.4deg); opacity: 1; }
  70% { transform: translateY(1px) rotate(-0.6deg); }
  100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
}

@keyframes clueCozyBadge {
  0% { opacity: 0; transform: scale(0.7) rotate(-18deg); }
  18% { opacity: 1; transform: scale(1.06) rotate(6deg); }
  36% { opacity: 1; transform: scale(1) rotate(0deg); }
  100% { opacity: 1; transform: scale(1) rotate(0deg); }
}

.clue-announcement-overlay.clue-announcement-dismissing.clue-variant-cozy .clue-cozy-container {
  animation: clueCozyDismiss 0.65s ease forwards;
}
@keyframes clueCozyDismiss {
  to { opacity: 0; transform: translate(-50%, -58%) scale(0.92) rotate(2deg); }
}

/* ---------- OG MODE: scanline + glitch word + rotating emblem ---------- */
.clue-variant-og.team-red { --clue-accent: #ff6b5a; --clue-accent-soft: rgba(255, 107, 90, 0.24); }
.clue-variant-og.team-blue { --clue-accent: #40b4ff; --clue-accent-soft: rgba(64, 180, 255, 0.22); }

.clue-variant-og .clue-og-container {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  pointer-events: none;
  animation: clueOgIn 3.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.clue-variant-og .clue-og-label {
  font-size: 11px;
  letter-spacing: 6px;
  text-transform: uppercase;
  opacity: 0.6;
  margin-bottom: 8px;
}

.clue-variant-og .clue-og-word {
  text-shadow: 0 14px 60px rgba(0,0,0,0.55);
  filter: none;
  position: relative;
  font-size: clamp(38px, 6vw, 64px);
  font-weight: 900;
  letter-spacing: 8px;
  text-transform: uppercase;
  color: #eaf2ff;
  text-shadow:
    0 0 24px var(--clue-accent-soft),
    0 14px 40px rgba(0,0,0,0.35);
  animation: clueOgWord 3.2s ease forwards;
}

.clue-variant-og .clue-og-word::before,
.clue-variant-og .clue-og-word::after {
  content: attr(data-text);
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  pointer-events: none;
  opacity: 0;
}

.clue-variant-og .clue-og-word::before {
  color: var(--clue-accent);
  transform: translateX(-2px);
  mix-blend-mode: screen;
  animation: clueOgGlitch1 1.15s ease 0.25s both;
}

.clue-variant-og .clue-og-word::after {
  color: #7dd3fc;
  transform: translateX(2px);
  mix-blend-mode: screen;
  animation: clueOgGlitch2 1.15s ease 0.3s both;
}

.clue-variant-og .clue-og-meta {
  margin-top: 12px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font-weight: 900;
  letter-spacing: 4px;
  text-transform: uppercase;
  opacity: 0;
  animation: clueOgMeta 3.2s ease forwards;
}

.clue-variant-og .clue-og-for {
  font-size: 12px;
  opacity: 0.6;
}

.clue-variant-og .clue-og-num {
  font-size: 20px;
  color: var(--clue-accent);
  text-shadow: 0 0 18px var(--clue-accent-soft);
}

.clue-variant-og .clue-og-emblem {
  width: 26px;
  height: 26px;
  border: 2px solid var(--clue-accent);
  border-radius: 999px;
  box-shadow: 0 0 22px var(--clue-accent-soft);
  clip-path: polygon(50% 0%, 86% 10%, 100% 50%, 86% 90%, 50% 100%, 14% 90%, 0% 50%, 14% 10%);
  animation: clueOgSpin 1.4s linear 0.6s infinite;
}

.clue-variant-og .clue-og-scan {
  position: absolute;
  left: 50%;
  top: -40px;
  width: min(780px, 96vw);
  height: 3px;
  transform: translateX(-50%);
  background: linear-gradient(90deg, transparent, var(--clue-accent), transparent);
  opacity: 0;
  filter: drop-shadow(0 10px 22px var(--clue-accent-soft));
  animation: clueOgScan 1.45s ease 0.2s both;
}

@keyframes clueOgIn {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(1.18); }
  10% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

@keyframes clueOgWord {
  0% { opacity: 0; transform: translateY(10px); filter: brightness(2.2); }
  14% { opacity: 1; transform: translateY(0px); filter: brightness(1.2); }
  100% { opacity: 1; transform: translateY(0px); filter: brightness(1); }
}

@keyframes clueOgMeta {
  0% { opacity: 0; transform: translateY(10px); }
  20% { opacity: 1; transform: translateY(0px); }
  100% { opacity: 1; transform: translateY(0px); }
}

@keyframes clueOgScan {
  0% { opacity: 0; transform: translateX(-50%) translateY(0px); }
  18% { opacity: 1; }
  100% { opacity: 0; transform: translateX(-50%) translateY(210px); }
}

@keyframes clueOgSpin {
  to { transform: rotate(360deg); }
}

@keyframes clueOgGlitch1 {
  0% { opacity: 0; clip-path: inset(0 0 100% 0); }
  20% { opacity: 0.9; clip-path: inset(10% 0 70% 0); }
  35% { clip-path: inset(55% 0 20% 0); }
  52% { clip-path: inset(25% 0 55% 0); }
  70% { opacity: 0.6; clip-path: inset(65% 0 10% 0); }
  100% { opacity: 0; clip-path: inset(0 0 100% 0); }
}

@keyframes clueOgGlitch2 {
  0% { opacity: 0; clip-path: inset(0 0 100% 0); }
  18% { opacity: 0.75; clip-path: inset(40% 0 40% 0); }
  33% { clip-path: inset(12% 0 72% 0); }
  50% { clip-path: inset(68% 0 12% 0); }
  74% { opacity: 0.45; clip-path: inset(30% 0 50% 0); }
  100% { opacity: 0; clip-path: inset(0 0 100% 0); }
}

.clue-announcement-overlay.clue-announcement-dismissing.clue-variant-og .clue-og-container {
  animation: clueOgDismiss 0.65s ease forwards;
}
@keyframes clueOgDismiss {
  to { opacity: 0; transform: translate(-50%, -54%) scale(0.96); }
}

/* =========================
   Cozy mode clue card visual overrides
   Warm parchment card, earth-tone accents
========================= */
body.cozy-mode .clue-announcement-backdrop {
  background: rgba(18, 12, 6, 0.7) !important;
  backdrop-filter: blur(4px) !important;
  -webkit-backdrop-filter: blur(4px) !important;
}
body.cozy-mode .clue-announcement-card {
  background: linear-gradient(170deg, #3a2a18 0%, #2a1e12 100%) !important;
  border-radius: 14px !important;
  border: 2px solid rgba(212, 197, 169, 0.35) !important;
  box-shadow:
    0 20px 60px rgba(0, 0, 0, 0.6),
    inset 0 1px 0 rgba(255, 232, 200, 0.12),
    inset 0 -1px 0 rgba(0, 0, 0, 0.3) !important;
}
body.cozy-mode .clue-announcement-card.team-red {
  border-color: rgba(200, 85, 58, 0.5) !important;
  box-shadow:
    0 20px 60px rgba(0, 0, 0, 0.6),
    0 0 40px rgba(200, 85, 58, 0.15),
    inset 0 1px 0 rgba(255, 200, 160, 0.1) !important;
}
body.cozy-mode .clue-announcement-card.team-blue {
  border-color: rgba(59, 139, 235, 0.5) !important;
  box-shadow:
    0 20px 60px rgba(0, 0, 0, 0.6),
    0 0 40px rgba(59, 139, 235, 0.15),
    inset 0 1px 0 rgba(180, 210, 255, 0.1) !important;
}
body.cozy-mode .clue-announcement-glow.team-red {
  background: radial-gradient(ellipse, rgba(200, 85, 58, 0.2) 0%, transparent 65%);
}
body.cozy-mode .clue-announcement-glow.team-blue {
  background: radial-gradient(ellipse, rgba(59, 139, 235, 0.2) 0%, transparent 65%);
}
body.cozy-mode .clue-announcement-label {
  color: rgba(212, 197, 169, 0.6) !important;
}
body.cozy-mode .clue-announcement-word {
  text-shadow: 0 2px 16px rgba(0, 0, 0, 0.6) !important;
}
body.cozy-mode .clue-announcement-divider.team-red {
  background: linear-gradient(90deg, transparent, rgba(200, 85, 58, 0.7), transparent) !important;
}
body.cozy-mode .clue-announcement-divider.team-blue {
  background: linear-gradient(90deg, transparent, rgba(59, 139, 235, 0.7), transparent) !important;
}
body.cozy-mode .clue-announcement-number.team-red {
  color: #d4734e !important;
  text-shadow: 0 0 20px rgba(200, 85, 58, 0.4) !important;
}
body.cozy-mode .clue-announcement-number.team-blue {
  color: #5aa3e8 !important;
  text-shadow: 0 0 20px rgba(59, 139, 235, 0.4) !important;
}

/* =========================
   Codenames Online clue card visual overrides
   Sharp digital UI card, gradient borders, CNO palette
========================= */
body.og-mode .clue-announcement-backdrop {
  /* Strong vignette so clue text is always legible */
  background:
    radial-gradient(1100px 700px at 50% 45%, rgba(0,0,0,0.50) 0%, rgba(0,0,0,0.88) 70%),
    rgba(0, 0, 0, 0.82) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
}
body.og-mode .clue-announcement-card {
  background: linear-gradient(180deg, rgba(20, 30, 50, 0.98) 0%, rgba(10, 15, 28, 0.99) 100%) !important;
  border-radius: 20px !important;
  border: 2px solid rgba(255, 255, 255, 0.2) !important;
  box-shadow:
    0 30px 80px rgba(0, 0, 0, 0.8),
    0 0 1px rgba(255, 255, 255, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.08) !important;
  padding: 24px 40px !important;
}
body.og-mode .clue-announcement-card.team-red {
  border-color: rgba(255, 82, 65, 0.6) !important;
  box-shadow:
    0 30px 80px rgba(0, 0, 0, 0.8),
    0 0 50px rgba(255, 82, 65, 0.2),
    0 0 100px rgba(255, 82, 65, 0.08),
    inset 0 1px 0 rgba(255, 200, 180, 0.1) !important;
}
body.og-mode .clue-announcement-card.team-blue {
  border-color: rgba(0, 142, 224, 0.6) !important;
  box-shadow:
    0 30px 80px rgba(0, 0, 0, 0.8),
    0 0 50px rgba(0, 142, 224, 0.2),
    0 0 100px rgba(0, 142, 224, 0.08),
    inset 0 1px 0 rgba(180, 230, 255, 0.1) !important;
}
body.og-mode .clue-announcement-glow.team-red {
  background: radial-gradient(ellipse, rgba(255, 82, 65, 0.18) 0%, transparent 65%);
}
body.og-mode .clue-announcement-glow.team-blue {
  background: radial-gradient(ellipse, rgba(0, 142, 224, 0.18) 0%, transparent 65%);
}
body.og-mode .clue-announcement-label {
  color: rgba(255, 255, 255, 0.45) !important;
  letter-spacing: 4px !important;
}
body.og-mode .clue-announcement-word {
  letter-spacing: 4px !important;
  background: linear-gradient(180deg, rgba(0,0,0,0.70), rgba(0,0,0,0.34)) !important;
  border-color: rgba(255,255,255,0.18) !important;
  box-shadow:
    0 16px 48px rgba(0,0,0,0.66),
    inset 0 1px 0 rgba(255,255,255,0.10) !important;
  text-shadow: 0 2px 24px rgba(0, 0, 0, 0.7) !important;
}
body.og-mode .clue-announcement-divider.team-red {
  background: linear-gradient(90deg, transparent, rgba(255, 82, 65, 0.8), transparent) !important;
  height: 2px !important;
}
body.og-mode .clue-announcement-divider.team-blue {
  background: linear-gradient(90deg, transparent, rgba(0, 142, 224, 0.8), transparent) !important;
  height: 2px !important;
}
body.og-mode .clue-announcement-number.team-red {
  color: #ff6b5a !important;
  text-shadow: 0 0 25px rgba(255, 82, 65, 0.5) !important;
}
body.og-mode .clue-announcement-number.team-blue {
  color: #40b4ff !important;
  text-shadow: 0 0 25px rgba(0, 142, 224, 0.5) !important;
}

/* Input focus animations */
.input {
  transition: border-color var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease),
              background var(--anim-duration) var(--anim-ease);
}

.input:focus {
  box-shadow: var(--focus-ring);
}

body.tournament.has-team-color .input:focus {
  box-shadow: 0 0 0 3px var(--team-glow);
}

/* Toggle switch animation */
.toggle-slider {
  transition: background var(--anim-duration) var(--anim-ease);
}

.toggle-slider::before {
  transition: transform var(--anim-duration) var(--anim-ease-bounce);
}

/* Badge pulse animation */
@keyframes badgePulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
}

.badge:not(:empty) {
  animation: badgePulse 2s ease-in-out infinite;
}

/* Chat message slide in */
@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.chat-msg {
  animation: messageSlideIn var(--anim-duration) var(--anim-ease);
}

/* Launch screen animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.launch-card {
  animation: fadeInUp var(--anim-duration-slower) var(--anim-ease);
}

/* Spots counter animation */
@keyframes countPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.spots-number {
  transition: transform var(--anim-duration) var(--anim-ease);
}

.spots-number.updated {
  animation: countPulse var(--anim-duration-slow) var(--anim-ease);
}

/* Settings icon hover animation */
.settings-gear-btn svg {
  transition: transform var(--anim-duration-slow) var(--anim-ease),
              color var(--anim-duration) var(--anim-ease);
}

.settings-gear-btn:hover svg {
  transform: scale(1.06);
}

/* Game turn indicator pulse */
@keyframes turnPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

.game-turn-display {
  transition: background var(--anim-duration) var(--anim-ease),
              color var(--anim-duration) var(--anim-ease);
}

.game-turn-display.your-turn {
  animation: turnPulse 1.5s ease-in-out infinite;
}

/* Timer urgency animation */
@keyframes timerUrgent {
  0%, 100% {
    color: var(--red);
    transform: scale(1);
  }
  50% {
    color: #ff6b6b;
    transform: scale(1.05);
  }
}

.timer-display.urgent {
  animation: timerUrgent 0.5s ease infinite;
}

/* Role button hover */
.role-btn {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease);
}

.role-btn:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
}

.role-btn:active {
  transform: translateY(-2px);
}

/* Deck card picker animation */
.qp-deck-card {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration) var(--anim-ease);
}

.qp-deck-card:hover {
  transform: translateY(-2px);
}

.qp-deck-card:active {
  transform: translateY(0);
}

/* Win/Lose celebration animation */
@keyframes celebrationBounce {
  0%, 100% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.1);
  }
  50% {
    transform: scale(0.95);
  }
  75% {
    transform: scale(1.05);
  }
}

.game-end-title.win {
  animation: celebrationBounce 0.6s var(--anim-ease-bounce);
}

@keyframes defeatShake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  75% {
    transform: translateX(5px);
  }
}

.game-end-title.lose {
  animation: defeatShake 0.4s var(--anim-ease);
}

/* Ripple effect for buttons */
.btn {
  position: relative;
  overflow: hidden;
}

.btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
  transform: scale(0);
  opacity: 0;
  pointer-events: none;
}

.btn.ripple::after {
  animation: rippleEffect var(--anim-duration-slow) var(--anim-ease-out);
}

@keyframes rippleEffect {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

/* Skeleton loading animation */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  background: linear-gradient(90deg, var(--surface2) 25%, var(--border) 50%, var(--surface2) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 8px;
}

/* Notification pop animation */
@keyframes notificationPop {
  0% {
    transform: scale(0) translateY(20px);
    opacity: 0;
  }
  50% {
    transform: scale(1.1) translateY(-5px);
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

.notification-toast {
  animation: notificationPop var(--anim-duration-slow) var(--anim-ease-bounce);
}

/* ==================== EXPANDED GAME LAYOUT ==================== */
/* Advanced full-screen layout with sidebars */

.game-container-expanded {
  display: flex;
  flex-direction: column;
  height: calc(100dvh - 64px);
  max-height: calc(100dvh - 64px);
  overflow: hidden;
  padding: 12px 20px;
  gap: 8px;
  background: var(--bg);
  /* Isolate painting to prevent Chrome compositing artifacts from
     card transforms, backdrop-filters, and 3D animations. */
  contain: paint;
}

/* On mobile, avoid vh math that can hide the in-game top bar behind Safari UI.
   Let the flex layout decide the available height. */
@media (max-width: 768px){
  .game-container-expanded{
    height: auto;
    max-height: none;
    flex: 1 1 auto;
    padding: 10px 12px;
  }

  /* Mobile: allow the in-game view to scroll vertically when needed.
     This prevents content getting "trapped" on smaller phones and
     avoids iOS Safari scroll lock issues. */
  .panel-game.game-active{
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Let the active game container participate in scrolling. */
  .panel-game.game-active .panel-inner,
  #game-board-container{
    min-height: 0;
  }

  /* The game layout manages most things internally, but the center column
     should be scrollable on small screens so the action bar and board are
     always reachable. */
  .game-center-area{
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y;
  }
  .game-center-area .game-board-wrapper{
    align-items: flex-start;
    justify-content: flex-start;
  }
}

/* Enhanced Game Header */
.game-header-expanded {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  padding: 6px 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  flex-shrink: 0;
}

/* Desktop Top Bar (Score centered, team names left/right) */
.game-topbar {
  display: flex;
  align-items: center;
  width: 100%;
  gap: 12px;
}

.topbar-team {
  flex: 1 1 0;
  display: flex;
  min-width: 0;
  /* Center the roster block within its half of the header so names sit between the edge and the score */
  justify-content: center;
}

.topbar-team-names {
  --topbar-name-size: 12px;
  --topbar-name-gap-x: 6px;
  --topbar-name-gap-y: 4px;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  column-gap: calc(var(--topbar-name-gap-x) + 4px);
  row-gap: var(--topbar-name-gap-y);
  font-size: var(--topbar-name-size);
  font-weight: 650;
  line-height: 1.05;
  min-width: 0;
  width: auto;
  max-width: 100%;
  align-items: center;
  justify-content: center;
  text-align: center;
}

/* When teams are small, spread names out more across the available half so it feels airy */
.topbar-team-names.spread {
  width: 100%;
  justify-content: space-between;
}

/* When a team has only a couple of players, give names extra breathing room. */
.topbar-team-names.spread {
  width: 100%;
  justify-content: space-between;
}

/* Team name colors */
.topbar-team-red .topbar-player { color: var(--game-red); }
.topbar-team-blue .topbar-player { color: var(--game-blue); }

/* Legacy: keep class present but no longer switches layout */
.topbar-team-names.cols-2 { display: flex; }

.topbar-player {
  /* Render as a clean text button (the markup uses <button> for a11y/click targets) */
  appearance: none;
  background: transparent;
  border: 0;
  padding: 0;
  font: inherit;
  line-height: inherit;
  cursor: default;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-dim);
}

.topbar-player.profile-link {
  cursor: pointer;
}

.topbar-player.is-me {
  /* Rectangle highlight (not a pill) */
  padding: 2px 8px;
  border-radius: 4px;
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.06) inset;
}

.topbar-team-red .topbar-player.is-me {
  background: rgba(239, 68, 68, 0.14);
  border: 1px solid rgba(239, 68, 68, 0.45);
}

.topbar-team-blue .topbar-player.is-me {
  background: rgba(59, 130, 246, 0.14);
  border: 1px solid rgba(59, 130, 246, 0.45);
}

/* In 2-column mode we still center the names within the team half */
.topbar-team-names.cols-2 { justify-content: center; }

.topbar-center {
  flex: 0 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-width: 150px;
}

.topbar-score {
  display: flex;
  align-items: baseline;
  justify-content: center;
  gap: 10px;
  padding: 0 8px;
}

.topbar-score-num {
  font-size: 22px;
  font-weight: 900;
  font-variant-numeric: tabular-nums;
  letter-spacing: 0.5px;
}

.topbar-score-num.red { color: var(--game-red); }
.topbar-score-num.blue { color: var(--game-blue); }

.topbar-score-sep {
  font-size: 13px;
  font-weight: 800;
  color: var(--text-dim);
  text-transform: uppercase;
}

.topbar-timer {
  width: 120px;
  margin-top: 4px;
}

/* New top strip: turn status + team roster popovers */
.topbar-team {
  position: relative;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  padding: 6px 8px;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.02);
}

.topbar-team-red { justify-content: flex-start; }
.topbar-team-blue { justify-content: flex-end; }

/* Turn strip highlighting: tint the active team half */
.game-topbar.turn-red #topbar-red {
  background: rgba(239, 68, 68, 0.18);
  border-color: rgba(239, 68, 68, 0.36);
  box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.18) inset, 0 16px 44px rgba(0, 0, 0, 0.35);
}
.game-topbar.turn-red #topbar-blue {
  background: rgba(255, 255, 255, 0.015);
  border-color: rgba(255, 255, 255, 0.06);
}
.game-topbar.turn-blue #topbar-blue {
  background: rgba(59, 130, 246, 0.18);
  border-color: rgba(59, 130, 246, 0.36);
  box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.18) inset, 0 16px 44px rgba(0, 0, 0, 0.35);
}
.game-topbar.turn-blue #topbar-red {
  background: rgba(255, 255, 255, 0.015);
  border-color: rgba(255, 255, 255, 0.06);
}

.topbar-team.is-active .topbar-team-status {
  color: rgba(255, 255, 255, 0.96);
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.35);
}

.topbar-team-status {
  font-size: 13px;
  font-weight: 900;
  letter-spacing: 0.3px;
  text-transform: uppercase;
  color: rgba(255, 255, 255, 0.9);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.topbar-team-red .topbar-team-status { text-align: left; }
.topbar-team-blue .topbar-team-status { text-align: right; }

.topbar-team-icon {
  width: 34px;
  height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(0, 0, 0, 0.25);
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
  flex: 0 0 auto;
}

.topbar-team-icon svg {
  width: 18px;
  height: 18px;
  stroke: rgba(255, 255, 255, 0.9);
  fill: none;
  stroke-width: 2.1;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.topbar-team-icon:hover {
  transform: translateY(-1px) scale(1.03);
  box-shadow: 0 10px 26px rgba(0, 0, 0, 0.45);
}

.topbar-team-icon.red { border-color: rgba(239, 68, 68, 0.35); }
.topbar-team-icon.blue { border-color: rgba(59, 130, 246, 0.35); }

.topbar-team-icon.red:hover { box-shadow: 0 10px 26px rgba(239, 68, 68, 0.14), 0 10px 26px rgba(0,0,0,0.45); }
.topbar-team-icon.blue:hover { box-shadow: 0 10px 26px rgba(59, 130, 246, 0.14), 0 10px 26px rgba(0,0,0,0.45); }

/* Popover */
.team-popover {
  position: absolute;
  top: calc(100% + 10px);
  width: 320px;
  max-width: min(360px, calc(100vw - 28px));
  padding: 12px;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.10);
  background: rgba(10, 10, 12, 0.82);
  backdrop-filter: blur(12px);
  box-shadow: 0 26px 90px rgba(0, 0, 0, 0.6);
  opacity: 0;
  transform: translateY(-6px) scale(0.98);
  pointer-events: none;
  transition: opacity 0.16s ease, transform 0.16s ease;
  z-index: 120;
}

.team-popover-red { left: 0; transform-origin: top left; }
.team-popover-blue { right: 0; transform-origin: top right; }

.topbar-team:hover .team-popover,
.topbar-team:focus-within .team-popover,
.topbar-team.popover-open .team-popover {
  opacity: 1;
  transform: translateY(0px) scale(1);
  pointer-events: auto;
}

.team-popover-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.team-popover-title {
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  color: rgba(255, 255, 255, 0.88);
}

.team-popover-sub {
  font-size: 11px;
  font-weight: 700;
  color: rgba(148, 163, 184, 0.9);
}

.team-popover-section {
  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.03);
}

.team-popover-section + .team-popover-section {
  margin-top: 10px;
}

.team-popover-role {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  color: rgba(255, 255, 255, 0.82);
}

.team-popover-player {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.02);
  color: rgba(255, 255, 255, 0.92);
}

.team-popover-player + .team-popover-player { margin-top: 6px; }

.team-popover-name {
  font-weight: 850;
  font-size: 13px;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.team-popover-badge {
  flex: 0 0 auto;
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.86);
}

.team-popover-player.spymaster {
  border-color: rgba(245, 158, 11, 0.35);
  background: rgba(245, 158, 11, 0.08);
  box-shadow: 0 0 0 1px rgba(245, 158, 11, 0.14) inset;
}

.team-popover-player.spymaster .team-popover-badge {
  border-color: rgba(245, 158, 11, 0.35);
  background: rgba(245, 158, 11, 0.10);
  color: rgba(253, 230, 138, 0.95);
}

.team-popover-player.operative {
  border-color: rgba(148, 163, 184, 0.18);
}

.team-popover-player.is-me {
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.12) inset, 0 12px 30px rgba(0,0,0,0.35);
}

.topbar-timer .timer-text {
  font-size: 13px;
  font-weight: 700;
}

.topbar-timer .timer-bar {
  height: 3px;
  border-radius: 999px;
}

/* Mobile: keep the top strip (icons left/right + centered score) */
@media (max-width: 720px) {
  .game-header-expanded { padding: 6px 10px; }

  .game-topbar { gap: 8px; }

  /* Keep team blocks visible so the user can open rosters from the top strip */
  .topbar-team {
    display: flex;
    flex: 1 1 0;
    padding: 6px 8px;
    gap: 8px;
    border-radius: 14px;
  }

  .topbar-team-status {
    font-size: 11px;
    letter-spacing: 0.35px;
    max-width: 118px;
  }

  .topbar-team-icon {
    width: 32px;
    height: 32px;
  }

  .topbar-center { min-width: 0; }
  .topbar-score-num { font-size: 20px; }
  .topbar-score { gap: 8px; }

  /* On mobile the roster popover becomes a bottom sheet */
  .team-popover {
    position: fixed;
    left: max(12px, env(safe-area-inset-left));
    right: max(12px, env(safe-area-inset-right));
    bottom: max(12px, env(safe-area-inset-bottom));
    top: auto;
    width: auto;
    max-width: none;
    max-height: min(72dvh, 520px);
    overflow: auto;
    transform: translateY(10px) scale(0.98);
    transform-origin: bottom center;
  }

  .team-popover-red,
  .team-popover-blue {
    left: max(12px, env(safe-area-inset-left));
    right: max(12px, env(safe-area-inset-right));
  }
}

/* Close button inside roster popover (useful on touch) */
.team-popover-close {
  width: 30px;
  height: 30px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.92);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.12s ease, background 0.12s ease;
}

.team-popover-close:active {
  transform: scale(0.96);
  background: rgba(255, 255, 255, 0.10);
}


.game-score-section {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
}

.game-team-expanded {
  display: flex;
  align-items: center;
  gap: 10px;
}

.game-team-expanded .team-badge {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-dim);
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.game-team-expanded .cards-count {
  font-size: 24px;
  font-weight: 800;
  min-width: 32px;
  text-align: center;
}

.game-team-expanded.red .cards-count { color: var(--game-red); }
.game-team-expanded.blue .cards-count { color: var(--game-blue); }

.game-center-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  min-width: 80px;
}

.game-vs-expanded {
  color: var(--text-dim);
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 2px;
}

/* Timer Display */
.game-timer-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  width: 100%;
}

.timer-bar {
  width: 100%;
  height: 2px;
  background: var(--surface2);
  border-radius: 2px;
  overflow: hidden;
}

.timer-fill {
  height: 100dvh;
  height: 100vh; /* fallback */
  background: var(--accent);
  border-radius: 2px;
  transition: width 1s linear, background 0.3s;
  width: 100%;
}

.timer-fill.warning { background: var(--gold); }
.timer-fill.danger { background: var(--red); animation: timerPulse 0.5s ease infinite; }

@keyframes timerPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.timer-text {
  font-size: 18px;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
}

.timer-text.warning { color: var(--gold); }
.timer-text.danger { color: var(--red); }

.game-turn-expanded {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-left: 16px;
  border-left: 1px solid var(--border);
}

.turn-phase {
  font-size: 13px;
  color: var(--text-dim);
}

/* Main Game Layout - 3 Columns */
.game-main-layout {
  flex: 1;
  display: grid;
  grid-template-columns: 230px 1fr 260px;
  gap: 14px;
  min-height: 0;
  overflow: hidden;
}

/* Sidebars */
.game-sidebar {
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 0;
  overflow: hidden;
}

.game-sidebar-left { grid-column: 1; }
.game-sidebar-right { grid-column: 3; }

/* Sidebar Panels */
.sidebar-panel {
  display: flex;
  flex-direction: column;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  min-height: 0;
}

.sidebar-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  background: var(--surface);
}

.sidebar-panel-title {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: var(--text-dim);
}

/* Team Roster Panel */
.team-roster-panel {
  flex: 0 0 auto;
  max-height: 40%;
}

.team-roster-content {
  padding: 8px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.roster-team {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.roster-team-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding-bottom: 4px;
  border-bottom: 1px solid var(--border);
}

.roster-team-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.roster-team-dot.red { background: var(--game-red); }
.roster-team-dot.blue { background: var(--game-blue); }

.roster-team-name {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
}

.roster-players {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.roster-player {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  background: var(--surface2);
  border-radius: 8px;
  font-size: 13px;
  border: 1px solid transparent;
  transition: border-color 0.15s;
}

.roster-player-name {
  flex: 1;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.roster-player-role {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
  text-transform: uppercase;
}

.roster-player-role.spymaster {
  background: rgba(250, 204, 21, 0.2);
  color: var(--gold);
}

.roster-player-role.operative {
  background: rgba(59, 130, 246, 0.2);
  color: var(--accent);
}

.roster-player.current-turn {
  border: 1px solid var(--accent);
  background: rgba(59, 130, 246, 0.1);
}

/* Clue History Panel */
.clue-history-panel {
  flex: 1;
  min-height: 100px;
}

.clue-history-content {
  flex: 1;
  padding: 8px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.clue-history-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px;
  background: var(--surface2);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.clue-history-item.red { border-left-color: var(--game-red); }
.clue-history-item.blue { border-left-color: var(--game-blue); }

.clue-history-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.clue-history-team {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.clue-history-team.red { color: var(--game-red); }
.clue-history-team.blue { color: var(--game-blue); }

.clue-history-number {
  font-size: 11px;
  font-weight: 700;
  padding: 2px 8px;
  background: var(--surface);
  border-radius: 10px;
}

.clue-history-word {
  font-size: 16px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* New: visually separate clue vs guesses */
.clue-history-clue{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.clue-chip{
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;
  border-radius: 10px;
  background: var(--surface);
  border: 1px solid var(--border);
  font-size: 13px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.9px;
}

.clue-chip.red{ border-color: rgba(239,68,68,0.45); box-shadow: 0 0 0 1px rgba(239,68,68,0.10) inset; }
.clue-chip.blue{ border-color: rgba(59,130,246,0.45); box-shadow: 0 0 0 1px rgba(59,130,246,0.10) inset; }

.clue-chip-count{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 36px;
  padding: 4px 10px;
  border-radius: 999px;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.10);
  font-size: 12px;
  font-weight: 800;
  color: var(--text);
}

.clue-history-results {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
}

.guess-chip {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 999px;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.10);
}

.guess-chip.correct { color: var(--green); }
.guess-chip.wrong { color: var(--red); }
.guess-chip.neutral { color: var(--text-dim); }
.guess-chip.assassin { color: #fff; background: rgba(239, 68, 68, 0.35); border-color: rgba(239,68,68,0.45); }

.clue-history-empty {
  color: var(--text-dim);
  font-size: 11px;
  text-align: center;
  padding: 16px 12px;
  font-style: italic;
}

/* Game Center Area */
.game-center-area {
  grid-column: 2;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-height: 0;
  overflow: hidden;
}

.game-center-area .game-board-wrapper {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
  padding: 2px 0;
}

.game-center-area .game-board {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-template-rows: repeat(5, 1fr);
  gap: 7px;
  width: 100%;
  aspect-ratio: 5 / 4;
  max-width: min(100%, calc((100dvh - 220px) * 1.2));
  max-height: 100%;
}

.game-center-area .game-card {
  aspect-ratio: unset;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px 10px;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
  position: relative;
  overflow: hidden;
  min-width: 0;
  min-height: 0;
}

.game-center-area .game-card .card-word {
  font-size: clamp(10px, 1.4vw, 15px);
  font-weight: 700;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  word-break: normal;
  overflow-wrap: break-word;
  line-height: 1.25;
}

.game-center-area .game-card:hover:not(.revealed):not(.disabled) {
  border-color: var(--accent);
  transform: scale(1.03);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.35);
  z-index: 2;
}

/* Card Tags */
.card-tag {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 700;
  pointer-events: none;
  z-index: 5;
  box-shadow: var(--tag-shadow, 0 2px 10px rgba(0,0,0,0.35));
  border: 1px solid var(--tag-border, rgba(255,255,255,0.18));
}

.card-tag.tag-yes {
  background: var(--tag-yes-bg, rgba(34, 197, 94, 0.9));
  color: var(--tag-yes-fg, #fff);
}

.card-tag.tag-maybe {
  background: var(--tag-maybe-bg, rgba(250, 204, 21, 0.9));
  color: var(--tag-maybe-fg, #000);
}

.card-tag.tag-no {
  background: var(--tag-no-bg, rgba(239, 68, 68, 0.9));
  color: var(--tag-no-fg, #fff);
}

.card-tag svg {
  width: 10px;
  height: 10px;
}


/* AI tags are a little subtler (human tags always take precedence) */
.card-tag.ai {
  opacity: 0.6;
  transform: scale(0.92);
  filter: saturate(0.85);
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.25) inset;
}

/* Card Vote Indicators */
.card-votes {
  position: absolute;
  bottom: 4px;
  left: 4px;
  right: 4px;
  display: flex;
  justify-content: center;
  gap: 2px;
  pointer-events: none;
  z-index: 5;
}

.card-vote-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--accent);
  opacity: 0.8;
}

.card-vote-dot.my-vote {
  background: var(--gold);
  box-shadow: 0 0 4px var(--gold);
}

/* Card Tag Mode */
.game-card.tag-mode {
  cursor: crosshair;
}

.game-card.tag-mode:hover {
  border-color: var(--gold) !important;
}

/* Card Tag Legend */
.card-tag-legend {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 5px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  flex-shrink: 0;
}

.tag-legend-title {
  font-size: 12px;
  color: var(--text-dim);
  font-weight: 500;
}

.tag-legend-items {
  display: flex;
  gap: 6px;
}

.tag-btn {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: 2px solid var(--border);
  background: var(--surface2);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s;
}

.tag-btn:hover {
  border-color: var(--text-dim);
}

.tag-btn.active {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.2);
}

.tag-btn svg {
  width: 16px;
  height: 16px;
}

.tag-btn.tag-yes { color: var(--green); }
.tag-btn.tag-maybe { color: var(--gold); }
.tag-btn.tag-no { color: var(--red); }
.tag-btn.tag-clear { color: var(--text-dim); }

.tag-legend-hint {
  font-size: 11px;
  color: var(--text-dim);
}

/* Expanded Action Bar */
.game-center-area .game-action-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 7px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  flex-shrink: 0;
}

.clue-display-expanded {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clue-label {
  font-size: 13px;
  color: var(--text-dim);
}

.clue-word-expanded {
  font-size: 20px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.clue-number-expanded {
  width: 32px;
  height: 32px;
  background: var(--accent);
  color: #fff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 16px;
}

.guesses-left-expanded {
  font-size: 13px;
  color: var(--text-dim);
}

.clue-form-expanded {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  max-width: 500px;
}

.clue-input-expanded {
  flex: 1;
  margin: 0;
}

.clue-num-expanded {
  width: 60px;
  margin: 0;
  text-align: center;
}

.operative-actions-expanded {
  display: flex;
  gap: 10px;
}

.waiting-expanded {
  font-size: 13px;
  color: var(--text-dim);
  font-style: italic;
}

/* Operative Chat Panel */
.operative-chat-panel {
  flex: 1;
  min-height: 140px;

  /* Team palette (JS adds chat-team-red / chat-team-blue when switching views) */
  --chat-accent: var(--game-blue);
  --chat-accent-bg: var(--game-blue-bg);
  --chat-accent-border: var(--game-blue-border);
}

.operative-chat-panel.chat-team-red {
  --chat-accent: var(--game-red);
  --chat-accent-bg: var(--game-red-bg);
  --chat-accent-border: var(--game-red-border);
}

.operative-chat-panel.chat-team-blue {
  --chat-accent: var(--game-blue);
  --chat-accent-bg: var(--game-blue-bg);
  --chat-accent-border: var(--game-blue-border);
}

.chat-privacy-badge {
  font-size: 9px;
  padding: 3px 8px;
  background: rgba(34, 197, 94, 0.15);
  color: var(--green);
  border-radius: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

.chat-privacy-badge.spymaster-visible {
  background: rgba(250, 204, 21, 0.2);
  color: var(--gold);
}

.operative-chat-messages {
  flex: 1;
  padding: 8px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.chat-empty-state {
  color: var(--text-dim);
  font-size: 11px;
  text-align: center;
  padding: 16px 10px;
}

.chat-message {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px 10px;
  background: var(--surface2);
  border-radius: 8px;
  border: 1px solid transparent;
}

.chat-message.my-message {
  background: var(--chat-accent-bg);
  border-color: var(--chat-accent-border);
}

.chat-message-header {
  display: flex;
  align-items: center;
  gap: 6px;
}

.chat-sender {
  font-size: 11px;
  font-weight: 600;
}

.chat-sender.red { color: var(--game-red); }
.chat-sender.blue { color: var(--game-blue); }

.chat-time {
  font-size: 10px;
  color: var(--text-dim);
}

.chat-text {
  font-size: 13px;
  line-height: 1.4;
  word-break: break-word;
}

.operative-chat-form {
  display: flex;
  gap: 8px;
  padding: 8px;
  border-top: 1px solid var(--border);
}

.operative-chat-form .chat-input {
  flex: 1;
  margin: 0;
  padding: 8px 12px;
}

.chat-send-btn {
  width: 36px;
  height: 36px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.chat-send-btn svg {
  width: 16px;
  height: 16px;
}

/* Make operative chat controls match the currently viewed team palette */
.operative-chat-panel .chat-send-btn {
  background: var(--chat-accent);
  border-color: var(--chat-accent);
}

.operative-chat-panel .chat-send-btn:hover {
  filter: brightness(1.05);
}

.operative-chat-panel .chat-input:focus,
.operative-chat-panel .chat-input:focus-visible {
  outline: none;
  border-color: var(--chat-accent-border);
  box-shadow: 0 0 0 3px var(--chat-accent-bg);
}

/* Voting Panel */
.voting-panel {
  flex: 0 0 auto;
  max-height: 32%;
}

.voting-content {
  flex: 1;
  padding: 8px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.voting-empty-state {
  color: var(--text-dim);
  font-size: 11px;
  text-align: center;
  padding: 12px 10px;
  font-style: italic;
}

.voting-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  background: var(--surface2);
  border-radius: 8px;
  border: 1px solid transparent;
  cursor: pointer;
  transition: border-color 0.15s;
}

.voting-item:hover {
  border-color: var(--border);
}

.voting-word {
  flex: 1;
  font-size: 13px;
  font-weight: 600;
  text-transform: uppercase;
}

.voting-count {
  display: flex;
  align-items: center;
  gap: 4px;
}

.voting-dots {
  display: flex;
  gap: 3px;
}

.voting-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--accent);
}

.voting-dot.my-vote {
  background: var(--gold);
  box-shadow: 0 0 4px var(--gold);
}

.voting-number {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-dim);
  min-width: 20px;
  text-align: right;
}

.voting-hint {
  font-size: 10px;
  color: var(--text-dim);
  text-align: center;
  padding: 6px 10px;
  border-top: 1px solid var(--border);
}

.btn-small {
  width: 24px;
  height: 24px;
  padding: 0;
}

.btn-small svg {
  width: 12px;
  height: 12px;
}

/* Sidebar Toggle State */
.game-sidebar.collapsed {
  display: none;
}

/* Mobile Layout */
@media (max-width: 1024px) {
  .game-main-layout {
    grid-template-columns: 1fr;
  }

.game-sidebar-left,
.game-sidebar-right {
  display: flex;
  position: fixed;
  top: 0;
  bottom: 0;
  width: min(86vw, 392px);
  max-width: calc(100vw - 56px);
  background: rgba(20, 20, 25, 0.96);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 100;
  padding: max(12px, env(safe-area-inset-top, 0px)) 12px max(12px, env(safe-area-inset-bottom, 0px));
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 18px 60px rgba(0, 0, 0, 0.65), 0 0 0 1px rgba(255, 255, 255, 0.04) inset;
  /* On mobile/tablet, the sidebar is an off-canvas sheet.
     Allow the sheet itself to scroll vertically (iOS Safari needs this)
     while still keeping internal panels scrollable. */
  overflow-y: auto;
  overflow-x: hidden;
  flex-direction: column;
  gap: 10px;
  -webkit-overflow-scrolling: touch;

  /* Closed state (off-canvas) */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition:
    transform 0.28s cubic-bezier(0.2, 0.9, 0.2, 1),
    opacity 0.20s ease,
    visibility 0s linear 0.28s;
  will-change: transform, opacity;
}

.game-sidebar-left {
  left: 0;
  right: auto;
  border-radius: 0 18px 18px 0;
  transform: translateX(calc(-100% - 16px));
}

.game-sidebar-right {
  right: 0;
  left: auto;
  border-radius: 18px 0 0 18px;
  transform: translateX(calc(100% + 16px));
}

.game-sidebar-left.mobile-visible,
.game-sidebar-right.mobile-visible {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateX(0);
  transition:
    transform 0.28s cubic-bezier(0.2, 0.9, 0.2, 1),
    opacity 0.20s ease,
    visibility 0s;
}

/* Edge handle (no top handle; direction-aware) */
.game-sidebar-left.mobile-visible::after,
.game-sidebar-right.mobile-visible::after {
  content: '';
  position: absolute;
  top: 50%;
  width: 4px;
  height: 52px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.18);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.25) inset;
  transform: translateY(-50%);
  pointer-events: none;
}

.game-sidebar-left.mobile-visible::after { right: 8px; }
.game-sidebar-right.mobile-visible::after { left: 8px; }

  /* Panels keep their card feel, but get a "glass" treatment */
  .game-sidebar.mobile-visible .sidebar-panel {
    background: rgba(255, 255, 255, 0.04);
    border-color: rgba(255, 255, 255, 0.10);
    border-radius: 14px;
    overflow: hidden;
    min-height: 0;
  }

  .game-sidebar.mobile-visible .sidebar-panel-header {
    padding: 10px 12px;
    border-bottom-color: rgba(255, 255, 255, 0.08);
    background: transparent;
  }

  .game-sidebar.mobile-visible .sidebar-panel-title {
    font-size: 12px;
  }

  .game-sidebar.mobile-visible .team-roster-content,
  .game-sidebar.mobile-visible .clue-history-content,
  .game-sidebar.mobile-visible .operative-chat-messages,
  .game-sidebar.mobile-visible .voting-content {
    padding: 10px 12px;
  }

  .game-sidebar.mobile-visible .operative-chat-form {
    padding: 10px 12px;
    border-top-color: rgba(255, 255, 255, 0.08);
  }

  .game-sidebar.mobile-visible .voting-hint {
    padding: 8px 12px 10px;
    border-top-color: rgba(255, 255, 255, 0.08);
  }

  /* Keep the sidebar itself from scrolling; let panels scroll smoothly */
  .game-sidebar.mobile-visible {
    overflow: hidden;
  }

  .game-sidebar.mobile-visible .team-roster-panel {
    max-height: 40%;
  }

  .game-sidebar.mobile-visible .voting-panel {
    max-height: 35%;
  }

  /* Comfortable touch targets in side sheets */
  .game-sidebar.mobile-visible .roster-player {
    padding: 10px 12px;
    font-size: 14px;
  }

  .game-sidebar.mobile-visible .roster-player-role {
    font-size: 11px;
    padding: 3px 8px;
  }

  .game-sidebar.mobile-visible .roster-team-name {
    font-size: 12px;
  }

  .game-sidebar.mobile-visible .clue-history-item {
    padding: 12px 12px;
  }

  .game-sidebar.mobile-visible .clue-history-word {
    font-size: 17px;
  }

  .game-sidebar.mobile-visible .chat-message {
    padding: 10px 12px;
  }

  .game-sidebar.mobile-visible .chat-text {
    font-size: 14px;
  }

  .game-sidebar.mobile-visible .chat-input {
    font-size: 15px;
    padding: 10px 12px;
  }

  .game-sidebar.mobile-visible .voting-item {
    padding: 12px 12px;
  }

  .game-sidebar.mobile-visible .voting-word {
    font-size: 14px;
  }

  /* Extra bottom padding for safe area */
  .game-sidebar.mobile-visible .sidebar-panel:last-child {
    padding-bottom: env(safe-area-inset-bottom, 12px);
  }
.game-center-area {
    grid-column: 1;
  }

  .game-container-expanded {
    height: calc(100dvh - 60px);
    max-height: calc(100dvh - 60px);
    padding: 8px;
    gap: 8px;
  }

  .game-header-expanded {
    padding: 8px 14px;
    flex-direction: column;
    gap: 4px;
  }

  .game-turn-expanded {
    padding-left: 0;
    border-left: none;
    justify-content: center;
  }

  .game-team-expanded .cards-count {
    font-size: 24px;
  }

  .game-team-expanded .team-badge {
    font-size: 11px;
    max-width: 80px;
  }

  .game-center-area .game-card .card-word {
    font-size: clamp(8px, 2.5vw, 12px);
  }

  .card-tag-legend {
    flex-wrap: wrap;
    gap: 8px;
  }

  .tag-legend-hint {
    width: 100%;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .game-score-section {
    gap: 12px;
  }

  .game-team-expanded .team-badge {
    display: none;
  }

  .game-center-area .game-action-bar {
    flex-wrap: wrap;
    justify-content: center;
  }

  .clue-form-expanded {
    flex-wrap: wrap;
    justify-content: center;
  }

  .clue-form-expanded .btn {
    width: 100%;
  }
}

/* Wide screen layout */
@media (min-width: 1600px) {
  .game-main-layout {
    grid-template-columns: 260px 1fr 280px;
  }
}

@media (min-width: 1920px) {
  .game-main-layout {
    grid-template-columns: 280px 1fr 300px;
    gap: 18px;
  }

  .game-container-expanded {
    padding: 16px 24px;
  }

  .game-center-area .game-card .card-word {
    font-size: 15px;
  }
}

/* Bottom sheet slide-up animation (shared by sidebars & popovers on mobile) */
@keyframes bottomSheetSlideUp {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Side sheet slide-in animations (mobile sidebars) */
@keyframes sideSheetInLeft {
  from { opacity: 0; transform: translateX(calc(-100% - 16px)); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes sideSheetInRight {
  from { opacity: 0; transform: translateX(calc(100% + 16px)); }
  to { opacity: 1; transform: translateX(0); }
}

/* Sidebar backdrop for mobile */
.sidebar-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.52);
  z-index: 99;

  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.20s ease, visibility 0s linear 0.20s;
}

.sidebar-backdrop.visible {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition: opacity 0.20s ease, visibility 0s;
}


@keyframes backdropFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ==================== PROFILE POPUP ==================== */
/* Clickable name styling */
.profile-link {
  cursor: pointer;
  transition: all 0.15s ease;
  border-bottom: 1px dashed transparent;
  text-decoration: none;
  display: inline;
}

.profile-link:hover {
  border-bottom-color: currentColor;
}

/* Teams page: disable profile-link click targets (page uses its own interactions) */
#panel-teams .profile-link {
  pointer-events: none;
  cursor: default;
  border-bottom: none;
}
#panel-teams .profile-link:hover,
#panel-players .profile-link:hover {
  border-bottom-color: transparent;
  opacity: 1;
}

/* Small inline link-style button */
.link-btn {
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: var(--accent);
  cursor: pointer;
  text-decoration: underline;
  text-decoration-style: dashed;
  text-underline-offset: 3px;
}
.link-btn.subtle {
  color: var(--text-dim);
  text-decoration-color: rgba(255,255,255,0.25);
}
.link-btn.subtle:hover {
  color: var(--text);
  text-decoration-color: rgba(255,255,255,0.5);
}

.profile-more-details {
  margin-top: 10px;
  font-size: 12px;
}

.profile-details-modal-card {
  max-width: 420px;
  max-height: 80vh;
}

/* Keep the details modal content scrollable (same centered positioning as settings) */
#profile-details-modal .settings-modal-body {
  max-height: calc(80vh - 70px);
  overflow-y: auto;
}

/* If the online legend isn't populated, don't reserve space */
#online-status-legend:empty {
  display: none;
}

/* Specific context overrides for profile links */
.team-list-members .profile-link {
  border-bottom: none;
}

.team-list-members .profile-link:hover {
  text-decoration: underline;
  text-decoration-style: dashed;
}

.online-user-name.profile-link:hover,
.online-user-team-inline.profile-link:hover {
  opacity: 0.85;
}

.chat-who .profile-link:hover {
  opacity: 0.85;
}


/* Online list: underline only the text, not the full flex line */
.online-user-name.profile-link {
  border-bottom: none;
}
.online-user-name.profile-link:hover {
  text-decoration: underline;
  text-decoration-style: dashed;
  text-underline-offset: 4px;
}

/* Profile Popup Container */
.profile-popup {
  position: fixed;
  z-index: 2000;
  pointer-events: none;
}

.profile-popup.visible {
  pointer-events: auto;
}

.profile-popup-card {
  background: rgba(20, 20, 25, 0.98);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 14px;
  box-shadow: 0 12px 48px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  min-width: 280px;
  max-width: 340px;
  overflow: hidden;
  animation: profilePopupIn 0.2s ease;
}

/* =========================
   Admin Logs Popup
========================= */
.logs-popup {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 18px;
}

.logs-popup-card {
  min-width: 420px;
  max-width: 720px;
  width: min(720px, calc(100vw - 36px));
  max-height: 75vh;
}

.logs-subtitle {
  font-size: 12px;
  color: var(--text-dim);
  margin-top: -2px;
}

.logs-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: 58vh;
  overflow-y: auto;
  padding-right: 4px;
}

.log-row {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.log-top {
  display: flex;
  align-items: center;
  gap: 10px;
}

.log-badge {
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(59, 130, 246, 0.12);
  color: var(--accent);
  flex-shrink: 0;
}

.log-badge.rename { background: rgba(59, 130, 246, 0.12); color: var(--accent); }
.log-badge.request { background: rgba(250, 204, 21, 0.12); color: var(--gold); }
.log-badge.invite { background: rgba(168, 85, 247, 0.12); color: rgba(216, 180, 254, 0.95); }
.log-badge.join { background: rgba(34, 197, 94, 0.12); color: var(--green); }
.log-badge.leave { background: rgba(239, 68, 68, 0.12); color: var(--red); }
.log-badge.admin { background: rgba(148, 163, 184, 0.12); color: rgba(226, 232, 240, 0.95); }

/* =========================
   Admin: Assign players modal
========================= */

.admin-assign-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 10px 0 8px;
}

.admin-assign-modal .modal-card.admin-assign-card {
  width: min(920px, calc(100vw - 28px));
  max-height: min(84vh, 720px);
}

.admin-assign-body {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.admin-assign-controls {
  display: flex;
  align-items: center;
  gap: 10px;
}

.admin-assign-search {
  flex: 1;
}

.admin-assign-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding-right: 2px;
  max-height: 56vh;
}

.admin-assign-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.07);
}

.admin-assign-left {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 180px;
}

.admin-assign-name {
  font-weight: 700;
  letter-spacing: 0.2px;
}

.admin-assign-meta {
  font-size: 12px;
  opacity: 0.85;
}

.admin-assign-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.admin-assign-select {
  min-width: 220px;
}

.admin-assign-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
}

.admin-assign-dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: rgba(148, 163, 184, 0.7);
}

@media (max-width: 620px) {
  .admin-assign-modal .modal-card.admin-assign-card {
    width: calc(100vw - 16px);
    max-height: 90vh;
  }
  .admin-assign-row {
    flex-direction: column;
    align-items: stretch;
  }
  .admin-assign-right {
    justify-content: space-between;
  }
  .admin-assign-select {
    width: 100%;
    min-width: 0;
  }
}

.log-tag{
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  flex-shrink: 0;
}

.log-tag.history{
  background: rgba(148, 163, 184, 0.10);
  color: rgba(226, 232, 240, 0.92);
}

.log-message {
  font-size: 13px;
  font-weight: 650;
  line-height: 1.25;
  overflow: hidden;
  text-overflow: ellipsis;
}

.log-meta {
  font-size: 11px;
  color: var(--text-dim);
  display: flex;
  align-items: center;
  gap: 8px;
}

.log-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
}

@media (max-width: 768px) {
  .logs-popup {
    align-items: flex-end;
    justify-content: center;
    padding: 0;
  }
  .logs-popup-card {
    min-width: 100%;
    width: 100%;
    max-width: 100%;
    border-radius: 18px 18px 0 0;
    max-height: 72vh;
    overflow-y: auto;
  }
  .logs-list {
    max-height: 60vh;
  }
}

@keyframes profilePopupIn {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.profile-popup-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  gap: 10px;
}

.profile-popup-title {
  font-size: 15px;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
}

.profile-popup-close {
  width: 26px;
  height: 26px;
  font-size: 18px;
  flex-shrink: 0;
}

.profile-popup-body {
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Profile Stats Section */
.profile-stats {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.profile-actions{
  display:flex;
  gap: 10px;
}

.profile-actions .btn{
  width: 100%;
  justify-content: center;
}

.profile-stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  font-size: 12px;
}

.profile-stat-label {
  color: var(--text-dim);
  flex-shrink: 0;
}

.profile-stat-value {
  font-weight: 600;
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.profile-stat-value.highlight {
  color: var(--accent);
}

.profile-stat-value.success {
  color: var(--green);
}

.profile-stat-value.warning {
  color: var(--gold);
}

.profile-stat-value.danger {
  color: var(--red);
}

/* Profile Members List */
.profile-members {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.profile-members-title {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
  margin-bottom: 4px;
}

.profile-member {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 6px;
  font-size: 12px;
}

.profile-member-name {
  flex: 1;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.profile-member-badge {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
  text-transform: uppercase;
  background: rgba(59, 130, 246, 0.15);
  color: var(--accent);
}

.profile-member-badge.leader {
  background: rgba(250, 204, 21, 0.15);
  color: var(--gold);
}

/* Profile Status Badge */
.profile-status {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
}

.profile-status.eligible {
  background: rgba(34, 197, 94, 0.12);
  border: 1px solid rgba(34, 197, 94, 0.3);
  color: var(--green);
}

.profile-status.not-eligible {
  background: rgba(239, 68, 68, 0.12);
  border: 1px solid rgba(239, 68, 68, 0.3);
  color: var(--red);
}

.profile-status.online {
  background: rgba(34, 197, 94, 0.12);
  border: 1px solid rgba(34, 197, 94, 0.3);
  color: var(--green);
}

.profile-status.offline {
  background: rgba(113, 113, 122, 0.12);
  border: 1px solid rgba(113, 113, 122, 0.3);
  color: var(--text-dim);
}

.profile-status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: currentColor;
}

/* Profile Section Divider */
.profile-divider {
  height: 1px;
  background: rgba(255, 255, 255, 0.08);
  margin: 4px 0;
}

/* Profile Backdrop (mobile) */
.profile-popup-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1999;
}

/* Mobile Styles */
@media (max-width: 768px) {
  .profile-popup {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding: 0;
    background: transparent;
  }

  .profile-popup.visible {
    pointer-events: auto;
  }

  .profile-popup-card {
    width: 100%;
    max-width: 100%;
    min-width: 100%;
    border-radius: 18px 18px 0 0;
    max-height: 70vh;
    overflow-y: auto;
    animation: profilePopupSlideUp 0.25s ease;
  }

  @keyframes profilePopupSlideUp {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .profile-popup-header {
    padding: 16px 18px;
    position: sticky;
    top: 0;
    background: rgba(20, 20, 25, 0.98);
    z-index: 1;
  }

  .profile-popup-title {
    font-size: 17px;
  }

  .profile-popup-body {
    padding: 18px;
    padding-bottom: 32px;
  }

  .profile-stat-row {
    font-size: 14px;
    padding: 4px 0;
  }

  .profile-member {
    padding: 10px 12px;
    font-size: 14px;
  }
}



/* Small helper text under labels (Profile popup) */
.profile-stat-sub{
  display:block;
  font-size: 11px;
  opacity: 0.75;
  margin-top: 2px;
  line-height: 1.25;
}

/* =========================
   Auth Loading Screen
========================= */
.auth-loading-screen {
  position: fixed;
  inset: 0;
  z-index: 10000;
  background: var(--bg);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 1;
  transition: opacity 0.4s ease, visibility 0.4s ease;
}

.auth-loading-screen.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.auth-loading-content {
  text-align: center;
}

/* Loading text shared styles */
.auth-loading-title {
  display: block;
  font-size: 28px;
  font-weight: 700;
  letter-spacing: 4px;
  color: var(--text);
  margin-bottom: 8px;
}

.auth-loading-subtitle {
  display: block;
  font-size: 14px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
}

/* Animated dots */
.auth-dots span {
  animation: authDotPulse 1.4s ease-in-out infinite;
  opacity: 0;
}

.auth-dots span:nth-child(1) { animation-delay: 0s; }
.auth-dots span:nth-child(2) { animation-delay: 0.2s; }
.auth-dots span:nth-child(3) { animation-delay: 0.4s; }

@keyframes authDotPulse {
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
}

/* Desktop Animation: 3x3 Grid of Cards */
.auth-loading-desktop {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 32px;
}

.auth-loading-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  width: 140px;
  height: 140px;
}

.auth-loading-card {
  width: 40px;
  height: 40px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 6px;
  animation: authCardPulse 2.4s ease-in-out infinite;
  animation-delay: calc(var(--delay) * 0.1s);
}

.auth-loading-card.accent {
  background: var(--accent);
  border-color: var(--accent);
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
}

@keyframes authCardPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.08);
    opacity: 1;
  }
}

.auth-loading-card.accent {
  animation: authCardAccentPulse 2.4s ease-in-out infinite;
  animation-delay: calc(var(--delay) * 0.1s);
}

@keyframes authCardAccentPulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  }
  50% {
    transform: scale(1.12);
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.6);
  }
}

/* Mobile Animation: Orbit with Logo */
.auth-loading-mobile {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 24px;
}

.auth-mobile-orbit {
  position: relative;
  width: 100px;
  height: 100px;
}

.auth-orbit-ring {
  position: absolute;
  inset: 0;
  border: 2px solid var(--border);
  border-radius: 50%;
  animation: authOrbitRingSpin 3s linear infinite;
}

.auth-orbit-ring::before {
  content: '';
  position: absolute;
  top: -4px;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 8px;
  background: var(--accent);
  border-radius: 50%;
  box-shadow: 0 0 12px var(--accent);
}

@keyframes authOrbitRingSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.auth-orbit-dot {
  position: absolute;
  width: 6px;
  height: 6px;
  background: var(--green);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  animation: authOrbitDot 2s ease-in-out infinite;
  box-shadow: 0 0 10px var(--green);
}

@keyframes authOrbitDot {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.5);
    opacity: 0.6;
  }
}

.auth-mobile-logo {
  position: absolute;
  inset: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.auth-mobile-logo svg {
  width: 36px;
  height: 36px;
  color: var(--text-dim);
}

.auth-rect {
  fill: none;
  stroke-width: 1.5;
  animation: authRectFill 2s ease-in-out infinite;
}

.auth-rect-1 { animation-delay: 0s; }
.auth-rect-2 { animation-delay: 0.3s; }
.auth-rect-3 { animation-delay: 0.6s; }
.auth-rect-4 { animation-delay: 0.9s; }

@keyframes authRectFill {
  0%, 100% {
    fill: transparent;
    stroke: var(--text-dim);
  }
  50% {
    fill: rgba(59, 130, 246, 0.2);
    stroke: var(--accent);
  }
}

/* Show mobile, hide desktop on small screens */
@media (max-width: 768px) {
  .auth-loading-desktop { display: none; }
  .auth-loading-mobile { display: flex; }

  .auth-loading-title {
    font-size: 22px;
    letter-spacing: 3px;
  }

  .auth-loading-subtitle {
  font-size: 12px;
  }
}

/* =========================
   Custom Confirm Dialog
========================= */
.confirm-dialog-backdrop {
  position: fixed;
  inset: 0;
  z-index: 10001;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  opacity: 1;
  transition: opacity 0.25s ease;
}

.confirm-dialog-backdrop.hidden {
  opacity: 0;
  pointer-events: none;
}

.confirm-dialog {
  position: fixed;
  inset: 0;
  z-index: 10002;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  opacity: 1;
  transition: opacity 0.25s ease;
}

.confirm-dialog.hidden {
  opacity: 0;
  pointer-events: none;
}

.confirm-dialog-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 32px;
  max-width: 380px;
  width: 100%;
  text-align: center;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
  transform: scale(1);
  transition: transform 0.25s ease;
}

.confirm-dialog.hidden .confirm-dialog-card {
  transform: scale(0.95);
}

.confirm-dialog-icon {
  width: 56px;
  height: 56px;
  margin: 0 auto 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface2);
  border-radius: 50%;
  color: var(--accent);
}

.confirm-dialog-icon svg {
  width: 28px;
  height: 28px;
}

.confirm-dialog-title {
  font-size: 20px;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 12px;
  letter-spacing: 0.5px;
}

.confirm-dialog-message {
  font-size: 14px;
  color: var(--text-dim);
  margin: 0 0 28px;
  line-height: 1.5;
}

.confirm-dialog-message #confirm-dialog-name {
  color: var(--accent);
  font-weight: 600;
}

.confirm-dialog-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.confirm-dialog-actions .btn {
  flex: 1;
  padding: 12px 24px;
  font-size: 14px;
  font-weight: 500;
  border-radius: 8px;
  min-width: 100px;
}

.confirm-dialog-actions .btn.danger {
  background: var(--red);
  color: #fff;
  border-color: var(--red);
}

.confirm-dialog-actions .btn.danger:hover {
  background: #c0392b;
  border-color: #c0392b;
}

/* Mobile: more compact confirm dialog */
@media (max-width: 480px) {
  .confirm-dialog {
    padding: 16px;
  }

  .confirm-dialog-card {
    padding: 20px 16px;
    max-width: 300px;
    border-radius: 12px;
  }

  .confirm-dialog-icon {
    width: 40px;
    height: 40px;
    margin-bottom: 12px;
  }

  .confirm-dialog-icon svg {
    width: 20px;
    height: 20px;
  }

  .confirm-dialog-title {
    font-size: 16px;
    margin-bottom: 8px;
  }

  .confirm-dialog-message {
    font-size: 13px;
    margin-bottom: 16px;
    line-height: 1.4;
  }

  .confirm-dialog-actions {
    gap: 8px;
  }

  .confirm-dialog-actions .btn {
    padding: 10px 12px;
    font-size: 13px;
    min-width: 80px;
  }
}

/* =========================
   Quick Play gate (live game chooser)
========================= */

body.qp-gate-open .app {
  filter: blur(10px);
  transform: scale(0.995);
  pointer-events: none;
  user-select: none;
}

.qp-gate {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 10000;
}

.qp-gate.hidden {
  display: none;
}

.qp-gate-card {
  width: min(520px, 100%);
  border-radius: 16px;
  background: rgba(18, 22, 34, 0.92);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
  padding: 22px 20px;
  text-align: center;
}

.qp-gate-title {
  font-size: 20px;
  font-weight: 700;
  letter-spacing: 0.2px;
  margin-bottom: 6px;
}

.qp-gate-sub {
  font-size: 13px;
  color: var(--text-dim);
  margin-bottom: 18px;
}

.qp-gate-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.qp-gate-actions .btn.disabled,
.qp-gate-actions .btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

@media (min-width: 520px) {
  .qp-gate-actions {
    flex-direction: row;
  }
  .qp-gate-actions .btn {
    flex: 1;
  }
}

@media (prefers-reduced-motion: reduce) {
  .game-sidebar-left,
  .game-sidebar-right,
  .sidebar-backdrop {
    transition: none !important;
    animation: none !important;
  }
}


@media (min-width: 1025px) {
  /* Slightly smaller board/cards on desktop to keep focus on the whole grid */
  .game-center-area .game-board {
    max-width: min(720px, 100%, calc((100dvh - 220px) * 1.05));
    gap: 6px;
  }

  .game-center-area .game-card {
    padding: 5px 8px;
    border-radius: 9px;
  }

  .game-center-area .game-card .card-word {
    font-size: clamp(9px, 1vw, 13px);
  }

  /* Remove the separate Players box on desktop (names live in the top bar) */
  .team-roster-panel { display: none; }

  /* Desktop left column: Clue History + Game Log */
  .clue-history-panel { flex: 1.15; min-height: 0; }
  .game-log-panel { flex: 0.85; min-height: 0; }

  /* Game log lives in the sidebar on desktop, so hide the floating popover trigger */
  #game-log-toggle { display: none !important; }
  .game-log-popover { display: none !important; }

  .clue-history-content {
    padding: 12px;
    gap: 10px;
  }

  .clue-history-item {
    padding: 12px;
    border-radius: 10px;
  }

  .clue-chip { font-size: 15px; letter-spacing: 1.1px; }
  .clue-history-team { font-size: 11px; }
  .clue-history-number { font-size: 12px; }
  .guess-chip { font-size: 11px; padding: 3px 8px; }
}

/* Mobile quick action row (Clue History / Chat / Players) */
.mobile-game-actions {
  display: none;
  width: 100%;
  flex: 0 0 100%;
  justify-content: center;
  align-items: center;
  gap: 10px;
  padding: 2px 0;
}

@media (max-width: 1024px) {
  .mobile-game-actions { display: flex; }
}

/* Players popup (mobile) */
.players-popup {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: none;
}

.players-popup.visible { display: block; }

.players-popup-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(10px);
  opacity: 0;
  transition: opacity 180ms ease;
}

.players-popup.visible .players-popup-backdrop { opacity: 1; }

.players-popup-card {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.98);
  width: min(92vw, 380px);
  max-height: min(72vh, 560px);
  overflow: hidden;
  border-radius: 16px;
  background: rgba(20, 20, 24, 0.92);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 16px 50px rgba(0, 0, 0, 0.6);
  opacity: 0;
  transition: transform 200ms ease, opacity 200ms ease;
}

.players-popup.visible .players-popup-card {
  transform: translate(-50%, -50%) scale(1);
  opacity: 1;
}

.players-popup-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.players-popup-title {
  font-weight: 800;
  letter-spacing: 0.3px;
}

.players-popup-body {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  padding: 12px 12px 14px;
  overflow: auto;
  max-height: calc(min(72vh, 560px) - 52px);
}

.players-popup-team {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.players-popup-team-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: var(--text-dim);
}

.players-popup-team-title .dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  display: inline-block;
}

.players-popup-team-title .dot.red { background: var(--game-red); }
.players-popup-team-title .dot.blue { background: var(--game-blue); }

.players-popup-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.players-popup-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 9px 10px;
  min-height: 34px;
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.06);
  color: var(--text);
}

.players-popup-item.red { box-shadow: 0 0 0 1px rgba(239, 68, 68, 0.12) inset; }
.players-popup-item.blue { box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.12) inset; }

.players-popup-item.is-me {
  border-color: rgba(255, 255, 255, 0.16);
  background: rgba(255, 255, 255, 0.06);
}

.players-popup-item .pp-name {
  font-weight: 750;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.players-popup-item .pp-role {
  font-size: 11px;
  color: var(--text-dim);
  flex: 0 0 auto;
}

.players-popup-item.empty {
  justify-content: center;
  color: var(--text-dim);
}

/* Accessibility: visually hidden */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;}

.game-header-meta{position:absolute;width:0;height:0;overflow:hidden;}

/* ==================== THEME CONSISTENCY + RESPONSIVE POLISH ==================== */

/* Consistent focus ring across dark/light */
.btn:focus-visible,
button:focus-visible,
.mode-card:focus-visible,
.online-counter-btn:focus-visible,
.tab:focus-visible{
  outline: none;
  box-shadow: var(--focus-ring);
}

/* Auth + Launch cards: ensure consistent shadow in light/dark */
.auth-card,
.launch-signed-as,
.mode-card{
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;
}

/* Mobile: tighten top padding and keep launch content centered */
@media (max-width: 520px){
  .launch-screen{ padding: 18px 14px; }
  .launch-card{ min-height: clamp(460px, 70vh, 680px); }
  .launch-signed-as{ max-width: 100%; }
}


/* =========================
   Header icons + Messages drawer
========================= */
.header-icon-btn{
  position: relative;
  width: 30px;
  height: 30px;
  border-radius: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  /* Keep header icons tight (Messages + Settings) */
  margin-right: 1px;
  background: transparent;
  border: 1px solid var(--border-soft);
  color: var(--text);
  transition: transform .12s ease, background .12s ease, border-color .12s ease, opacity .12s ease;
}
.header-icon-btn svg{ width: 14px; height: 14px; }
.header-icon-btn:hover{ background: var(--panel); border-color: var(--border); transform: translateY(-1px); }
.header-icon-btn:active{ transform: translateY(0); }
.header-icon-btn.disabled{ opacity: .45; pointer-events: none; }

@media (max-width: 520px){
  /* Make the Messages icon a bit more compact on small screens */
  .header-icon-btn{ width: 24px; height: 24px; border-radius: 8px; margin-right: 1px; }
  .header-icon-btn svg{ width: 12px; height: 12px; }
}

.icon-badge{
  position: absolute;
  top: -6px;
  right: -6px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  border-radius: 999px;
  font-size: 11px;
  line-height: 18px;
  border: 2px solid var(--bg);
  background: var(--accent);
  color: #fff;
}

/* Tournament play shortcut button removed (tournament has no Play tab). */

/* Drawer shell */
.drawer-backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.40);
  backdrop-filter: blur(2px);
  z-index: 1200;
}

.drawer{
  position: fixed;
  top: env(safe-area-inset-top);
  right: 0;
  height: calc(100dvh - env(safe-area-inset-top));
  height: calc(100vh - env(safe-area-inset-top)); /* fallback */
  width: min(420px, 94vw);
  background: var(--bg);
  border-left: 1px solid var(--border);
  box-shadow: -24px 0 60px rgba(0,0,0,.25);
  transform: translateX(102%);
  transition: transform .18s ease;
  z-index: 1210;
  display: flex;
  flex-direction: column;
  padding-bottom: 0;
}
.drawer.open{ transform: translateX(0); }

.drawer-header{
  display:flex;
  align-items:center;
  justify-content: space-between;
  padding: 14px 14px 10px 14px;
  border-bottom: 1px solid var(--border-soft);
}
.drawer-title{
  font-size: 15px;
  font-weight: 700;
  letter-spacing: .2px;
}
.drawer-body{
  padding: 12px;
  padding-bottom: calc(22px + env(safe-area-inset-bottom));
  /* Let the chat card manage its own scrolling; prevents double-scroll glitches. */
  overflow: hidden;
  flex: 1 1 auto;
  min-height: 0;
  display:flex;
  flex-direction: column;
}

.drawer-chat-card{ margin-top: 12px; }

/* Drawer chat sizing (fill the remaining device height) */
.drawer .chat-card.drawer-chat-card{
  position: relative;
  flex: 1 1 auto;
  min-height: 0;
  height: 100%;
  max-height: none;
  /* Override panel defaults */
  gap: 12px;
  /* Keep the composer comfortably above iOS bottom bars */
  padding-bottom: calc(56px + env(safe-area-inset-bottom));
}
.drawer .chat-card.drawer-chat-card .chat-messages{
  flex: 1 1 auto;
  min-height: 0;
}

/* Make the drawer feel like the in-game operator sidebar on mobile: not full width */
@media (max-width: 768px){
  .drawer{
    width: min(420px, 86vw);
  }
  .drawer .chat-card.drawer-chat-card{
    padding-bottom: calc(24px + env(safe-area-inset-bottom) + 92px);
  }
  .drawer-backdrop{
    backdrop-filter: blur(3px);
  }
}

/* Cozy + Codenames Online: chat drawer becomes a compact bottom-left popover */
body.cozy-mode .chat-drawer,
body.og-mode .chat-drawer{
  top: auto;
  right: auto;
  left: calc(16px + env(safe-area-inset-left));
  bottom: calc(16px + env(safe-area-inset-bottom));
  height: min(520px, calc(100dvh - 140px));
  height: min(520px, calc(100vh - 140px)); /* fallback */
  width: min(360px, calc(100vw - 32px));
  border-left: none;
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: 0 18px 70px rgba(0,0,0,.38);
  transform: translateY(110%);
  transition: transform .18s ease;
}

body.cozy-mode .chat-drawer.open,
body.og-mode .chat-drawer.open{
  transform: translateY(0);
}

body.cozy-mode #chat-drawer-backdrop,
body.og-mode #chat-drawer-backdrop{
  background: rgba(0,0,0,.28);
  backdrop-filter: blur(2px);
}

@media (max-width: 520px){
  body.cozy-mode .chat-drawer,
  body.og-mode .chat-drawer{
    width: min(360px, calc(100vw - 24px));
    left: calc(12px + env(safe-area-inset-left));
    bottom: calc(12px + env(safe-area-inset-bottom));
    border-radius: 16px;
  }
}


/* Cozy + Codenames Online: chat pops up from the bottom-left (in-game) */
body.cozy-mode .chat-drawer,
body.og-mode .chat-drawer{
  top: auto;
  right: auto;
  left: calc(16px + env(safe-area-inset-left));
  bottom: calc(16px + env(safe-area-inset-bottom));

  width: min(360px, calc(100vw - 32px));
  height: min(520px, calc(100dvh - 180px));
  height: min(520px, calc(100vh - 180px));

  border-left: none;
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: 0 18px 70px rgba(0,0,0,.38);

  transform: translateY(110%);
  transition: transform .18s ease, box-shadow .18s ease;
}

body.cozy-mode .chat-drawer.open,
body.og-mode .chat-drawer.open{
  transform: translateY(0);
}

body.cozy-mode .drawer-backdrop,
body.og-mode .drawer-backdrop{
  background: rgba(0,0,0,.32);
  backdrop-filter: blur(3px);
}

@media (max-width: 520px){
  body.cozy-mode .chat-drawer,
  body.og-mode .chat-drawer{
    width: calc(100vw - 24px);
    left: 12px;
    bottom: calc(12px + env(safe-area-inset-bottom));
    height: min(520px, calc(100dvh - 160px));
  }
}


/* Cozy & Codenames Online: chat pops from bottom-left */
body.cozy-mode .chat-drawer,
body.og-mode .chat-drawer{
  top: auto;
  right: auto;
  left: calc(18px + env(safe-area-inset-left));
  bottom: calc(18px + env(safe-area-inset-bottom));
  width: min(360px, calc(100vw - 36px));
  height: min(520px, calc(100dvh - 170px));
  height: min(520px, calc(100vh - 170px));
  border-left: none;
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: 0 18px 70px rgba(0,0,0,.35);
  transform: translateY(110%);
  transition: transform .18s ease, box-shadow .18s ease;
}
body.cozy-mode .chat-drawer.open,
body.og-mode .chat-drawer.open{
  transform: translateY(0);
}
body.cozy-mode .drawer-backdrop#chat-drawer-backdrop,
body.og-mode .drawer-backdrop#chat-drawer-backdrop{
  background: rgba(0,0,0,.26);
  backdrop-filter: blur(2px);
}
@media (max-width: 520px){
  body.cozy-mode .chat-drawer,
  body.og-mode .chat-drawer{
    width: calc(100vw - 28px);
    left: 14px;
    bottom: calc(14px + env(safe-area-inset-bottom));
  }
}

/* OG (Codenames Online style) â€” Desktop Messages drawer should match the Dark placement
   (right-side sliding drawer). Keep the bottom-left popover behavior for mobile. */
@media (min-width: 769px){
  body.og-mode .chat-drawer{
    top: env(safe-area-inset-top);
    right: 0;
    left: auto;
    bottom: auto;
    height: calc(100dvh - env(safe-area-inset-top));
    height: calc(100vh - env(safe-area-inset-top)); /* fallback */
    width: min(420px, 94vw);
    border-radius: 0;
    border: none;
    border-left: 1px solid var(--border);
    box-shadow: -24px 0 60px rgba(0,0,0,.25);
    transform: translateX(102%);
    transition: transform .18s ease;
  }

  body.og-mode .chat-drawer.open{ transform: translateX(0); }

  body.og-mode #chat-drawer-backdrop{
    background: rgba(0,0,0,.40);
    backdrop-filter: blur(2px);
  }
}

/* Cozy â€” Desktop Messages drawer should also match the Dark placement
   (right-side sliding drawer). Keep the bottom-left popover behavior for mobile. */
@media (min-width: 769px){
  body.cozy-mode .chat-drawer{
    top: env(safe-area-inset-top);
    right: 0;
    left: auto;
    bottom: auto;
    height: calc(100dvh - env(safe-area-inset-top));
    height: calc(100vh - env(safe-area-inset-top)); /* fallback */
    width: min(420px, 94vw);
    border-radius: 0;
    border: none;
    border-left: 1px solid var(--border);
    box-shadow: -24px 0 60px rgba(0,0,0,.25);
    transform: translateX(102%);
    transition: transform .18s ease;
  }

  body.cozy-mode .chat-drawer.open{ transform: translateX(0); }

  body.cozy-mode #chat-drawer-backdrop{
    background: rgba(0,0,0,.40);
    backdrop-filter: blur(2px);
  }
}


.chat-personal-picker-wrap{ position: relative; flex: 1; }
.chat-personal-picker{
  width: 100%;
  text-align: left;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  cursor: pointer;
}
.chat-personal-picker:after{
  content: "â–¾";
  opacity: .75;
}
.chat-personal-popover{
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  right: 0;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: var(--shadow-lg);
  padding: 10px;
  z-index: 5;
}
.chat-personal-search{ width: 100%; margin-bottom: 8px; }
.chat-personal-list{
  max-height: 240px;
  overflow:auto;
  display:flex;
  flex-direction: column;
  gap: 6px;
}
.chat-personal-item{
  display:flex;
  align-items:center;
  justify-content: space-between;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid transparent;
  background: rgba(255,255,255,.02);
  cursor: pointer;
}
body.light-mode .chat-personal-item{ background: rgba(40,70,100,.05); }
.chat-personal-item:hover{ border-color: var(--border); background: var(--bg); }
.chat-personal-item.active{
  border-color: color-mix(in srgb, var(--accent) 55%, var(--border));
  background: color-mix(in srgb, var(--accent) 12%, var(--panel));
}
.chat-personal-item small{
  opacity: .7;
}

/* Personal messages (iMessage-style inbox) */
.dm-inbox{
  display:flex;
  flex-direction: column;
  gap: 14px;
  flex: 1 1 auto;
  min-height: 0;
}
.dm-inbox-header{
  display:flex;
  align-items:center;
  justify-content: flex-start;
  gap: 10px;
  padding: 0 2px;
  border: none;
  background: transparent;
  margin-bottom: 18px; /* extra space between New and first thread */
}

/* Make the Personal inbox header behave like a single "New" action */
.dm-inbox-title-btn{
  width: 100%;
  justify-content: center;
  border-radius: 14px;
  height: 44px;
  padding: 0 14px;
  font-weight: 900;
  letter-spacing: .2px;
  background: color-mix(in srgb, var(--surface2) 88%, transparent);
  border: 1px solid var(--border-soft);
  box-shadow: none;
}
.dm-inbox-title-btn::before{
  content: "+";
  margin-right: 10px;
  font-size: 18px;
  font-weight: 900;
  line-height: 1;
  opacity: .9;
}
.dm-inbox-title{
  font-weight: 900;
  font-size: 13px;
  letter-spacing: .2px;
  color: var(--text);
}

.dm-thread-list{
  display:flex;
  flex-direction: column;
  gap: 14px;
  overflow:auto;
  padding: 0 2px 2px;
  flex: 1 1 auto;
  min-height: 0;
}

.dm-thread-row{
  width: 100%;
  text-align: left;
  background: color-mix(in srgb, var(--surface2) 92%, var(--panel));
  border: 1px solid var(--border-soft);
  border-radius: 14px;
  padding: 12px 14px;
  color: var(--text);
  cursor: pointer;
  display:flex;
  gap: 10px;
  align-items: center;
  transition: transform .10s ease, background .12s ease, border-color .12s ease;
}
.dm-thread-row:hover{
  border-color: var(--border);
  background: color-mix(in srgb, var(--panel) 80%, var(--bg));
  transform: translateY(-1px);
}
.dm-thread-row:active{ transform: translateY(0); }
.dm-thread-row.unread{
  border-color: color-mix(in srgb, var(--accent) 45%, var(--border));
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent) 14%, transparent);
}
.dm-avatar{
  width: 34px;
  height: 34px;
  border-radius: 999px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 900;
  font-size: 13px;
  color: var(--text);
  background: color-mix(in srgb, var(--accent) 18%, var(--surface2));
  border: 1px solid color-mix(in srgb, var(--accent) 24%, var(--border-soft));
  flex: 0 0 auto;
}
.dm-thread-main{ min-width: 0; width: 100%; }
.dm-thread-top{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
}
.dm-thread-name{
  font-weight: 900;
  font-size: 15px;
  color: var(--text);
  min-width: 0;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.dm-thread-preview{
  font-size: 13px;
  color: var(--muted);
  margin-top: 2px;
  min-width: 0;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.dm-preview-muted{ opacity: .55; }
.dm-unread-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: var(--accent);
  box-shadow: 0 0 0 2px var(--bg);
  flex: 0 0 auto;
}

.dm-thread-bar{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 10px;
  border: 1px solid var(--border);
  background: var(--surface2);
  border-radius: 14px;
}
.dm-thread-title{
  flex: 1 1 auto;
  min-width: 0;
  text-align: center;
  font-weight: 900;
  font-size: 13px;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.dm-back-btn{
  width: 34px;
  height: 34px;
  border-radius: 12px;
  border: 1px solid var(--border-soft);
  background: transparent;
  color: var(--text);
}
.dm-new-btn{
  height: 34px;
  padding: 0 12px;
  border-radius: 12px;
}

.dm-new-popover{
  position: absolute;
  inset: 64px 12px 12px 12px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: var(--shadow-lg);
  display:flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
  z-index: 10;
}
.dm-new-header{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
}
.dm-new-title{ font-weight: 900; font-size: 13px; }
.dm-new-list{
  overflow:auto;
  display:flex;
  flex-direction: column;
  gap: 8px;
  flex: 1 1 auto;
  min-height: 0;
}
.dm-new-item{
  width:100%;
  text-align:left;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid var(--border-soft);
  background: var(--panel);
  color: var(--text);
  cursor:pointer;
}
.dm-new-item:hover{ border-color: var(--border); background: var(--surface2); }


/* Responsive: make Messages drawer match the in-game operator sidebar feel */
@media (max-width: 520px){
  .drawer{
    width: min(78vw, 360px);
    max-width: 78vw;
    border-left: 1px solid color-mix(in srgb, var(--border) 65%, transparent);
    border-radius: 18px 0 0 18px;
    background: color-mix(in srgb, var(--bg) 92%, transparent);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  .drawer-header{ padding: 14px 12px 10px 12px; }
  .drawer-body{ padding: 12px; }
}


/* Tournament: remove Play tab */
body.tournament .desktop-tabs .tab[data-panel="panel-game"],
body.tournament .mobile-tabs .tab[data-panel="panel-game"]{ display:none !important; }

/* =========================
   AI PLAYER STYLES
========================= */

/* +AI Button in lobby role headers */
.ai-add-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 900;
  letter-spacing: 0.5px;
  padding: 2px 8px;
  margin-left: 6px;
  border-radius: 999px;
  border: 1px solid rgba(140, 120, 255, 0.35);
  background: rgba(140, 120, 255, 0.12);
  color: rgba(180, 170, 255, 0.95);
  cursor: pointer;
  transition: all 0.15s ease;
  vertical-align: middle;
  line-height: 1.4;
}
.ai-add-btn:hover{
  background: rgba(140, 120, 255, 0.25);
  border-color: rgba(140, 120, 255, 0.55);
  color: #fff;
  transform: scale(1.05);
}
.ai-add-btn:active{
  transform: scale(0.97);
}

/* AI Player in lobby - status glow */
.quick-player.ai-player{
  position: relative;
}

.quick-player.ai-status-green{
  border-color: rgba(45, 210, 120, 0.45);
  box-shadow: 0 0 8px rgba(45, 210, 120, 0.15), 0 0 0 1px rgba(45, 210, 120, 0.10) inset;
}
.quick-player.ai-status-yellow{
  border-color: rgba(240, 200, 40, 0.45);
  box-shadow: 0 0 8px rgba(240, 200, 40, 0.15), 0 0 0 1px rgba(240, 200, 40, 0.10) inset;
}
.quick-player.ai-status-red{
  border-color: rgba(240, 60, 60, 0.45);
  box-shadow: 0 0 8px rgba(240, 60, 60, 0.15), 0 0 0 1px rgba(240, 60, 60, 0.10) inset;
}

/* AI badge (HELPER / AUTO) */
.ai-badge{
  font-size: 9px;
  letter-spacing: 0.6px;
  font-weight: 900;
  padding: 2px 6px;
  border-radius: 999px;
  flex: 0 0 auto;
  line-height: 1.3;
}
.ai-badge-helper{
  background: rgba(100, 180, 255, 0.15);
  color: rgba(130, 200, 255, 0.95);
  border: 1px solid rgba(100, 180, 255, 0.25);
}
.ai-badge-autonomous{
  background: rgba(140, 120, 255, 0.15);
  color: rgba(180, 170, 255, 0.95);
  border: 1px solid rgba(140, 120, 255, 0.25);
}

/* AI ready status badge overrides */
.quick-player-badge.ai-ready-green{
  color: rgba(180, 255, 220, 0.95);
  border-color: rgba(45, 210, 120, 0.45);
  background: rgba(45, 210, 120, 0.18);
}
.quick-player-badge.ai-ready-yellow{
  color: rgba(255, 230, 130, 0.95);
  border-color: rgba(240, 200, 40, 0.45);
  background: rgba(240, 200, 40, 0.14);
}
.quick-player-badge.ai-ready-red{
  color: rgba(255, 150, 150, 0.95);
  border-color: rgba(240, 60, 60, 0.45);
  background: rgba(240, 60, 60, 0.14);
}
.quick-player-badge.ai-ready-none{
  color: rgba(180, 180, 200, 0.7);
  border-color: rgba(180, 180, 200, 0.2);
  background: rgba(180, 180, 200, 0.06);
  animation: ai-pulse 1.5s ease-in-out infinite;
}
@keyframes ai-pulse{
  0%,100%{ opacity:1; }
  50%{ opacity:0.5; }
}

/* AI remove button */
.ai-remove-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  font-size: 13px;
  font-weight: 700;
  line-height: 1;
  border-radius: 50%;
  border: 1px solid rgba(255, 80, 80, 0.25);
  background: rgba(255, 80, 80, 0.08);
  color: rgba(255, 120, 120, 0.8);
  cursor: pointer;
  flex: 0 0 auto;
  transition: all 0.15s ease;
  padding: 0;
}
.ai-remove-btn:hover{
  background: rgba(255, 80, 80, 0.25);
  border-color: rgba(255, 80, 80, 0.5);
  color: #fff;
}

/* AI Mode Selection Modal */
.ai-mode-modal-card{
  max-width: 440px;
  width: 100%;
}
.ai-mode-subtitle{
  font-size: 13px;
  color: var(--text-dim);
  margin-bottom: 14px;
  text-align: center;
}
.ai-mode-cards{
  display: flex;
  gap: 12px;
}
.ai-mode-card{
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 18px 14px;
  border-radius: 14px;
  border: 1.5px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
  cursor: pointer;
  transition: all 0.18s ease;
  text-align: center;
}
.ai-mode-card:hover:not(:disabled){
  border-color: rgba(140, 120, 255, 0.45);
  background: rgba(140, 120, 255, 0.08);
  transform: translateY(-2px);
}
.ai-mode-card:active:not(:disabled){
  transform: translateY(0);
}
.ai-mode-card:disabled{
  opacity: 0.35;
  cursor: not-allowed;
}
.ai-mode-icon{
  font-size: 28px;
  line-height: 1;
}
.ai-mode-title{
  font-size: 14px;
  font-weight: 800;
  letter-spacing: 0.2px;
}
.ai-mode-desc{
  font-size: 11px;
  color: var(--text-dim);
  line-height: 1.5;
}
.ai-mode-status{
  text-align: center;
  font-size: 12px;
  color: var(--text-dim);
  margin-top: 12px;
  min-height: 18px;
}

/* AI player indicators in topbar */
.ai-topbar-player{
  position: relative;
}
.ai-topbar-player::after{
  content: '';
  display: inline-block;
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: rgba(140, 120, 255, 0.7);
  margin-left: 3px;
  vertical-align: middle;
}

/* AI sender in chat - subtle indicator */
.ai-chat-sender{
  position: relative;
}

/* Light mode overrides */
body.light-mode .ai-add-btn{
  border-color: rgba(80, 60, 180, 0.25);
  background: rgba(80, 60, 180, 0.08);
  color: rgba(70, 50, 170, 0.85);
}
body.light-mode .ai-add-btn:hover{
  background: rgba(80, 60, 180, 0.14);
  color: rgb(55, 35, 155);
}
body.light-mode .ai-badge-helper{
  background: rgba(40, 110, 200, 0.10);
  color: rgba(25, 85, 175, 0.88);
  border-color: rgba(40, 110, 200, 0.22);
}
body.light-mode .ai-badge-autonomous{
  background: rgba(80, 60, 180, 0.10);
  color: rgba(65, 45, 165, 0.88);
  border-color: rgba(80, 60, 180, 0.22);
}
body.light-mode .ai-mode-card:hover:not(:disabled){
  border-color: rgba(80, 60, 180, 0.30);
  background: rgba(80, 60, 180, 0.06);
}

/* Mobile responsive */
@media (max-width: 600px){
  .ai-add-btn{ font-size: 9px; padding: 1px 6px; margin-left: 4px; }
  .ai-mode-cards{ flex-direction: column; }
  .ai-badge{ font-size: 8px; padding: 1px 5px; }
  .ai-remove-btn{ width: 16px; height: 16px; font-size: 11px; }
}
/* â”€â”€â”€ AI Traits Popup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.ai-traits-popup{
  padding: 4px 0;
}
.ai-traits-header{
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 20px;
}
.ai-traits-avatar{
  width: 48px;
  height: 48px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(140, 120, 255, 0.3), rgba(140, 120, 255, 0.08));
  border: 1px solid rgba(140, 120, 255, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: 14px;
  color: rgba(140, 120, 255, 0.9);
  letter-spacing: 0.5px;
  flex-shrink: 0;
}
.ai-traits-info{
  display: flex;
  flex-direction: column;
  gap: 3px;
}
.ai-traits-name{
  font-weight: 900;
  font-size: 16px;
  color: var(--text);
}
.ai-traits-subtitle{
  display: flex;
  align-items: center;
  gap: 8px;
}
.ai-traits-role{
  font-size: 11px;
  font-weight: 800;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.4px;
}
.ai-traits-team{
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  padding: 2px 7px;
  border-radius: 6px;
}
.ai-traits-team.red{
  color: var(--game-red);
  background: var(--game-red-bg);
  border: 1px solid var(--game-red-border);
}
.ai-traits-team.blue{
  color: var(--game-blue);
  background: var(--game-blue-bg);
  border: 1px solid var(--game-blue-border);
}
.ai-traits-section-title{
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 14px;
}
.ai-traits-bars{
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.ai-trait-row{
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.ai-trait-label-row{
  display: flex;
  justify-content: space-between;
  align-items: baseline;
}
.ai-trait-label{
  font-size: 13px;
  font-weight: 800;
  color: rgba(255, 255, 255, 0.88);
}
.ai-trait-value{
  font-size: 12px;
  font-weight: 700;
  color: var(--text-dim);
  font-variant-numeric: tabular-nums;
}
.ai-trait-bar-bg{
  width: 100%;
  height: 8px;
  border-radius: 99px;
  background: rgba(255, 255, 255, 0.08);
  overflow: hidden;
}
.ai-trait-bar-fill{
  height: 100%;
  border-radius: 99px;
  transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  opacity: 0.85;
}
.ai-trait-range-labels{
  display: flex;
  justify-content: space-between;
  font-size: 9px;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.3);
  letter-spacing: 0.3px;
  text-transform: uppercase;
}

/* Clickable popover rows */
.team-popover-player.is-ai{
  cursor: pointer;
  transition: background 0.15s ease;
}
.team-popover-player.is-ai:hover{
  background: rgba(140, 120, 255, 0.1);
}

/* Light mode overrides for traits popup */
body.light-mode .ai-traits-section-title{
  color: var(--text-dim);
}
body.light-mode .ai-trait-label{
  color: var(--text);
}
body.light-mode .ai-trait-bar-bg{
  background: rgba(40,70,100,0.10);
}
body.light-mode .ai-traits-avatar{
  background: linear-gradient(135deg, rgba(80, 60, 180, 0.12), rgba(80, 60, 180, 0.04));
  border-color: rgba(80, 60, 180, 0.25);
  color: rgba(65, 45, 165, 0.88);
}
body.light-mode .ai-trait-range-labels{
  color: var(--text-dim);
}

/* Ensure guess animations can expand outward without clipping */
.game-board-wrapper,
.game-board,
.game-center-area {
  overflow: visible;
}


/* ==================== COMPREHENSIVE LIGHT MODE ==================== */
/* Inspired by Codenames Online: soft blue-gray palette, warm & readable */

/* --- Header & Mode Switcher --- */
body.light-mode .header-mode-switcher {
  background: rgba(40,70,100,0.08);
  border-color: rgba(40,70,100,0.14);
}
body.light-mode .header-mode-switcher .mode-btn:hover {
  background: rgba(40,70,100,0.10);
}
body.light-mode .header-mode-switcher .mode-btn.active {
  background: var(--accent);
  color: #fff;
}

/* --- Team Color Row / Color Pickers --- */
body.light-mode .team-color-row {
  border-color: rgba(40,70,100,0.12);
  background: var(--surface);
}
body.light-mode .color-input,
body.light-mode .team-color-input {
  border-color: var(--border);
}

/* --- Team Card "my team" glow --- */
body.light-mode .team-card.my-team {
  box-shadow: 0 0 0 1px rgba(40,70,100,0.12), 0 8px 24px rgba(30,55,85,0.10);
}

/* --- Editable team name --- */
body.light-mode .team-name.editable {
  border-bottom-color: rgba(40,70,100,0.25);
}

/* --- Error Box --- */
body.light-mode .error-box {
  background: rgba(201, 60, 43, 0.08);
  border-color: var(--red);
}
body.light-mode .error-box ul {
  color: var(--red);
}

/* --- Hint Error --- */
body.light-mode .hint.error {
  color: var(--red);
}

/* --- Quick Play Settings --- */
body.light-mode .qp-settings-open {
  background: linear-gradient(135deg, rgba(45,125,210,0.18), rgba(120,80,200,0.14));
  border-color: rgba(40,70,100,0.16);
}
body.light-mode .qp-settings-open:hover {
  background: linear-gradient(135deg, rgba(45,125,210,0.24), rgba(120,80,200,0.20));
}
body.light-mode .qp-settings-banner {
  background: linear-gradient(135deg, rgba(45,125,210,0.12), rgba(201,60,43,0.08));
  border-color: rgba(40,70,100,0.12);
}
body.light-mode .qp-settings-emoji {
  background: rgba(40,70,100,0.06);
  border-color: rgba(40,70,100,0.12);
}
body.light-mode .qp-setting {
  border-color: rgba(40,70,100,0.12);
  background: var(--surface);
}

/* --- Quick Settings Modal --- */
body.light-mode #quick-settings-modal .modal-card {
  background: var(--card);
}
body.light-mode #quick-settings-modal .modal-head {
  background: linear-gradient(135deg, rgba(45,125,210,0.12), rgba(120,80,200,0.08));
  border-bottom-color: var(--border);
}
body.light-mode #quick-settings-modal .icon-btn:hover {
  background: rgba(40,70,100,0.08);
}

/* --- Modal Backdrop (secondary) --- */
body.light-mode .modal-backdrop {
  background: rgba(30,50,75,0.45);
}
body.light-mode .popover-backdrop {
  background: rgba(30,50,75,0.20);
}

/* --- Game End Overlay --- */
body.light-mode .game-end-overlay {
  background: rgba(30,50,75,0.50);
}

/* --- Buttons --- */
body.light-mode .btn {
  background: var(--surface);
  border-color: var(--border);
}
body.light-mode .btn.primary {
  background: var(--accent);
  border-color: rgba(45,125,210,0.45);
  color: #fff;
}
body.light-mode .btn.danger {
  background: rgba(201,60,43,0.10);
  border-color: rgba(201,60,43,0.35);
  color: var(--red);
}
body.light-mode .btn.danger:hover {
  background: rgba(201,60,43,0.18);
}
body.light-mode .btn.success {
  background: rgba(26,154,72,0.10);
  border-color: rgba(26,154,72,0.35);
  color: var(--green);
}
body.light-mode .btn.success:hover {
  background: rgba(26,154,72,0.18);
}
body.light-mode .btn.invites-btn {
  background: rgba(184,117,20,0.10);
  border-color: rgba(184,117,20,0.35);
  color: var(--gold);
}
body.light-mode .btn.invites-btn:hover {
  background: rgba(184,117,20,0.18);
}
body.light-mode .btn.logout {
  background: rgba(201,60,43,0.08);
  border-color: rgba(201,60,43,0.28);
}
body.light-mode .btn.logout:hover {
  background: rgba(201,60,43,0.15);
}

/* --- Icon Buttons --- */
body.light-mode .icon-btn {
  border-color: var(--border);
  background: var(--surface);
}
body.light-mode .icon-btn.danger {
  border-color: rgba(201,60,43,0.35);
  background: rgba(201,60,43,0.08);
}

/* --- Game Toolbar btn-icon --- */
body.light-mode .btn-icon {
  background: rgba(40,70,100,0.08);
}
body.light-mode .btn-icon:hover {
  background: rgba(40,70,100,0.14);
  color: var(--text);
}
body.light-mode .btn-danger-icon:hover {
  background: rgba(201,60,43,0.12);
  color: var(--red);
}

/* --- Menu Button --- */
body.light-mode .menu-btn:hover {
  background: rgba(40,70,100,0.08);
}
body.light-mode .menu-btn.danger:hover {
  background: rgba(201,60,43,0.08);
}

/* --- Game Card --- */
body.light-mode .game-card {
  background: var(--surface);
  border-color: var(--border);
}
body.light-mode .game-card:hover:not(.revealed):not(.disabled) {
  box-shadow: 0 4px 16px rgba(30,55,85,0.14);
}
body.light-mode .game-container-compact .game-card:hover:not(.revealed):not(.disabled) {
  box-shadow: 0 2px 10px rgba(30,55,85,0.14);
}
body.light-mode .game-center-area .game-card:hover:not(.revealed):not(.disabled) {
  box-shadow: 0 4px 20px rgba(30,55,85,0.16);
}

/* Revealed cards - white text stays on colored backgrounds */
body.light-mode .game-card.revealed.card-red {
  background: var(--game-red);
  border-color: var(--game-red);
}
body.light-mode .game-card.revealed.card-blue {
  background: var(--game-blue);
  border-color: var(--game-blue);
}
body.light-mode .game-card.revealed.card-neutral {
  background: var(--game-neutral);
  border-color: var(--game-neutral);
}
body.light-mode .game-card.revealed.card-assassin {
  background: #1a1a1f;
  border-color: var(--red);
}
body.light-mode .game-card.revealed .card-word {
  color: #fff;
}

/* Spymaster view */
body.light-mode .game-card.spymaster-view.card-red {
  background: var(--game-red-bg);
  border-color: var(--game-red-border);
}
body.light-mode .game-card.spymaster-view.card-blue {
  background: var(--game-blue-bg);
  border-color: var(--game-blue-border);
}
body.light-mode .game-card.spymaster-view.card-neutral {
  background: var(--game-neutral-bg);
  border-color: var(--game-neutral-border);
}
body.light-mode .game-card.spymaster-view.card-assassin {
  background: var(--game-assassin-bg);
  border-color: var(--game-assassin-border);
}
body.light-mode .game-card.spymaster-view.card-assassin .card-word {
  color: var(--red);
}

/* --- Card Tags --- */
body.light-mode .card-tag.ai {
  box-shadow: 0 0 0 1px rgba(40,70,100,0.20) inset;
}

/* --- Mode Card --- */
body.light-mode .mode-card:hover {
  box-shadow: 0 8px 24px rgba(30,55,85,0.12);
}

/* --- Lobby Name Check --- */
body.light-mode .lobby-name-check {
  background: rgba(184,117,20,0.08);
  border-color: rgba(184,117,20,0.25);
}

/* --- Game Log Entries --- */
body.light-mode .log-entry {
  border-color: rgba(40,70,100,0.10);
  background: rgba(40,70,100,0.04);
  color: var(--text);
}
body.light-mode .log-entry:hover {
  background: rgba(40,70,100,0.08);
}
body.light-mode .log-entry::before {
  background: rgba(94,115,137,0.35);
}
body.light-mode .log-entry.team-red::before { background: rgba(201,60,43,0.80); }
body.light-mode .log-entry.team-blue::before { background: rgba(26,127,181,0.80); }

body.light-mode .log-entry.type-clue {
  background: rgba(184,117,20,0.08);
  border-color: rgba(184,117,20,0.18);
}
body.light-mode .log-entry.type-start {
  background: rgba(45,125,210,0.08);
  border-color: rgba(45,125,210,0.18);
}
body.light-mode .log-entry.type-end {
  background: rgba(120,80,200,0.08);
  border-color: rgba(120,80,200,0.18);
}
body.light-mode .log-entry.type-correct {
  background: rgba(26,154,72,0.08);
  border-color: rgba(26,154,72,0.18);
}
body.light-mode .log-entry.type-wrong {
  background: rgba(201,60,43,0.08);
  border-color: rgba(201,60,43,0.18);
}
body.light-mode .log-entry.type-neutral {
  background: rgba(94,115,137,0.06);
  border-color: rgba(94,115,137,0.14);
}
body.light-mode .log-entry.type-assassin {
  background: rgba(201,60,43,0.12);
  border-color: rgba(201,60,43,0.28);
  box-shadow: 0 0 0 1px rgba(201,60,43,0.12) inset;
}

/* Log tokens */
body.light-mode .log-entry .log-token.role { color: var(--text); }
body.light-mode .log-entry .log-token.action { color: var(--accent); }
body.light-mode .log-entry .log-token.result-correct { color: var(--green); }
body.light-mode .log-entry .log-token.result-wrong { color: var(--red); }
body.light-mode .log-entry .log-token.result-neutral { color: var(--text-dim); }
body.light-mode .log-entry .log-token.result-assassin { color: var(--red); text-shadow: none; }
body.light-mode .log-entry .log-token.system { color: rgb(120,80,200); }

body.light-mode .log-entry .log-quote { text-shadow: none; }
body.light-mode .log-entry.type-clue .log-quote { color: var(--gold); }
body.light-mode .log-entry.type-correct .log-quote { color: var(--green); }
body.light-mode .log-entry.type-wrong .log-quote { color: var(--red); }
body.light-mode .log-entry.type-neutral .log-quote { color: var(--text-dim); }
body.light-mode .log-entry.type-assassin .log-quote { color: var(--red); }
body.light-mode .log-entry.type-start .log-quote { color: var(--accent); }
body.light-mode .log-entry.type-end .log-quote { color: rgb(120,80,200); }

/* --- Top Bar --- */
body.light-mode .topbar-team {
  border-color: rgba(40,70,100,0.12);
  background: rgba(40,70,100,0.04);
}
body.light-mode .topbar-team-status {
  color: var(--text);
}
body.light-mode .topbar-team.is-active .topbar-team-status {
  text-shadow: none;
}
body.light-mode .topbar-player.is-me {
  box-shadow: 0 0 0 1px rgba(40,70,100,0.10) inset;
}

/* Turn strip highlighting */
body.light-mode .game-topbar.turn-red #topbar-red {
  background: rgba(201,60,43,0.12);
  border-color: rgba(201,60,43,0.32);
  box-shadow: 0 0 0 1px rgba(201,60,43,0.12) inset, 0 8px 28px rgba(30,55,85,0.10);
}
body.light-mode .game-topbar.turn-red #topbar-blue {
  background: rgba(40,70,100,0.03);
  border-color: rgba(40,70,100,0.08);
}
body.light-mode .game-topbar.turn-blue #topbar-blue {
  background: rgba(26,127,181,0.12);
  border-color: rgba(26,127,181,0.32);
  box-shadow: 0 0 0 1px rgba(26,127,181,0.12) inset, 0 8px 28px rgba(30,55,85,0.10);
}
body.light-mode .game-topbar.turn-blue #topbar-red {
  background: rgba(40,70,100,0.03);
  border-color: rgba(40,70,100,0.08);
}

/* Team icon buttons (roster popover triggers) */
body.light-mode .topbar-team-icon {
  border-color: rgba(40,70,100,0.18);
  background: rgba(40,70,100,0.08);
}
body.light-mode .topbar-team-icon svg {
  stroke: var(--text);
}
body.light-mode .topbar-team-icon:hover {
  box-shadow: 0 6px 18px rgba(30,55,85,0.12);
}
body.light-mode .topbar-team-icon.red { border-color: rgba(201,60,43,0.35); }
body.light-mode .topbar-team-icon.blue { border-color: rgba(26,127,181,0.35); }
body.light-mode .topbar-team-icon.red:hover {
  box-shadow: 0 6px 18px rgba(201,60,43,0.12);
}
body.light-mode .topbar-team-icon.blue:hover {
  box-shadow: 0 6px 18px rgba(26,127,181,0.12);
}

/* --- Team Popover --- */
body.light-mode .team-popover {
  border-color: var(--border);
  background: rgba(237,241,246,0.92);
  backdrop-filter: blur(16px);
  box-shadow: 0 16px 48px rgba(30,55,85,0.18);
}

/* --- Clue Chip & Guess Chip --- */
body.light-mode .clue-chip-count {
  background: rgba(40,70,100,0.08);
  border-color: rgba(40,70,100,0.14);
}
body.light-mode .guess-chip {
  background: rgba(40,70,100,0.06);
  border-color: rgba(40,70,100,0.12);
}
body.light-mode .guess-chip.assassin {
  color: #fff;
  background: rgba(201,60,43,0.30);
  border-color: rgba(201,60,43,0.40);
}

/* --- Game Log Popover & Menu Popover --- */
body.light-mode .game-log-popover {
  box-shadow: 0 8px 32px rgba(30,55,85,0.16);
}
body.light-mode .game-menu-popover {
  box-shadow: 0 8px 32px rgba(30,55,85,0.16);
}

/* --- Pill badges --- */
body.light-mode .pill {
  background: var(--surface);
}

/* --- Prize badge --- */
body.light-mode .prize-badge {
  background: var(--gold);
  color: #fff;
}
body.light-mode .mobile-header .prize-badge {
  background: var(--gold);
  color: #fff;
}

/* --- Active Game Banner --- */
body.light-mode .game-active-banner {
  background: rgba(26,154,72,0.08);
  border-color: rgba(26,154,72,0.25);
}

/* --- Challenge row (incoming) --- */
body.light-mode .challenge-row.incoming {
  border-color: rgba(184,117,20,0.30);
  background: rgba(184,117,20,0.06);
}

/* --- Scrollbar --- */
body.light-mode ::-webkit-scrollbar-thumb {
  background: rgba(40,70,100,0.22);
}

/* --- Modal close button --- */
body.light-mode .modal-head .icon-btn {
  border-color: rgba(201,60,43,0.30);
  background: rgba(201,60,43,0.08);
}

/* --- Player Status badges --- */
body.light-mode .player-status {
  background: rgba(40,70,100,0.05);
}

/* --- Chat messages container --- */
body.light-mode .chat-card .chat-messages {
  background: rgba(40,70,100,0.03);
  border-color: rgba(40,70,100,0.10);
}

/* --- Accordion --- */
body.light-mode .accordion summary:hover {
  background: rgba(40,70,100,0.05);
}

/* --- Desktop Tab active state --- */
body.light-mode .desktop-tabs .tab.active {
  background: rgba(45,125,210,0.12);
  border-color: rgba(45,125,210,0.30);
}

/* --- Toggle slider (unchecked) --- */
body.light-mode .toggle-slider {
  background: rgba(40,70,100,0.22);
}

/* --- Role buttons --- */
body.light-mode .role-btn:hover,
body.light-mode .role-btn-compact:hover {
  background: rgba(45,125,210,0.08);
}
body.light-mode .role-btn.selected,
body.light-mode .role-btn-compact.selected {
  background: rgba(45,125,210,0.14);
}

/* --- Game Card hover shadow (mode-card) --- */
body.light-mode .mode-card {
  box-shadow: 0 2px 8px rgba(30,55,85,0.06);
}
body.light-mode .mode-card:hover {
  box-shadow: 0 8px 24px rgba(30,55,85,0.14);
  background: rgba(45,125,210,0.06);
}

/* --- Pending-select card --- */
body.light-mode .game-card.pending-select:not(.revealed):not(.disabled) {
  box-shadow: 0 0 0 2px rgba(45,125,210,0.25);
}

/* --- Tag buttons --- */
body.light-mode .tag-btn.active {
  background: rgba(45,125,210,0.14);
}

/* --- Roster players --- */
body.light-mode .roster-player.current-turn {
  background: rgba(45,125,210,0.08);
}

/* --- Operative chat discussion area --- */
body.light-mode .operative-chat-panel {
  border-color: var(--border);
}

/* --- Settings row action-button hover --- */
body.light-mode .settings-row:hover {
  background: var(--surface);
}



/* --- Settings style dropdown (light mode) --- */
body.light-mode .settings-dropdown-option:hover{
  background: rgba(0,0,0,0.04);
}
body.light-mode .settings-dropdown-option[aria-selected="true"]{
  background: rgba(45,125,210,0.12);
  border-color: rgba(45,125,210,0.28);
}
/* --- Topbar timer --- */
body.light-mode .topbar-timer {
  color: var(--text-dim);
}

/* --- Spymaster & Operative role pills --- */
body.light-mode .roster-player-role.spymaster {
  background: rgba(184,117,20,0.14);
  color: var(--gold);
}
body.light-mode .roster-player-role.operative {
  background: rgba(45,125,210,0.14);
  color: var(--accent);
}

/* --- Team glow frame --- */
body.light-mode.tournament.has-team-color::after {
  opacity: 0.55;
}

/* --- Clue number badges --- */
body.light-mode .clue-number,
body.light-mode .clue-number-compact,
body.light-mode .clue-number-expanded {
  background: var(--accent);
  color: #fff;
}

/* --- Sidebar panels --- */
body.light-mode .sidebar-panel {
  background: var(--surface);
  border-color: var(--border);
}
body.light-mode .sidebar-panel-header {
  background: var(--surface);
  border-bottom-color: var(--border);
}

/* --- Clue history items --- */
body.light-mode .clue-history-item {
  background: var(--surface);
}
body.light-mode .clue-chip.red {
  border-color: rgba(201,60,43,0.35);
  box-shadow: 0 0 0 1px rgba(201,60,43,0.08) inset;
}
body.light-mode .clue-chip.blue {
  border-color: rgba(26,127,181,0.35);
  box-shadow: 0 0 0 1px rgba(26,127,181,0.08) inset;
}

/* --- Game Container Expanded BG --- */
body.light-mode .game-container-expanded {
  background: var(--bg);
}

/* --- Mobile sidebar overlays --- */
body.light-mode .game-sidebar-left.mobile-visible::after,
body.light-mode .game-sidebar-right.mobile-visible::after {
  background: rgba(30,50,75,0.25);
}

/* --- Tab Empty State --- */
body.light-mode .tab-empty {
  border-color: rgba(40,70,100,0.18);
  background: rgba(40,70,100,0.04);
}

/* --- Tab Warning --- */
body.light-mode .tab-warning {
  background: rgba(184,117,20,0.08);
  border-color: rgba(184,117,20,0.22);
}

/* --- Quick Play Lobby --- */
body.light-mode .quick-lobby-inner {
  background: var(--surface);
  border-color: var(--border);
  box-shadow: var(--shadow-md);
}
body.light-mode .quick-team-col {
  background: rgba(40,70,100,0.06);
  border-color: rgba(40,70,100,0.12);
}
body.light-mode .quick-team-col.red { border-color: rgba(201,60,43,0.22); }
body.light-mode .quick-team-col.blue { border-color: rgba(26,127,181,0.22); }
body.light-mode .quick-team-col.selected {
  box-shadow: 0 0 0 2px rgba(40,70,100,0.10) inset;
}
body.light-mode .quick-team-col.red.selected {
  border-color: rgba(201,60,43,0.40);
  box-shadow: 0 0 0 2px rgba(201,60,43,0.12) inset;
}
body.light-mode .quick-team-col.blue.selected {
  border-color: rgba(26,127,181,0.40);
  box-shadow: 0 0 0 2px rgba(26,127,181,0.12) inset;
}
body.light-mode .quick-team-col.selectable:focus {
  box-shadow: 0 0 0 2px rgba(40,70,100,0.14);
}
body.light-mode .quick-team-count {
  background: rgba(40,70,100,0.06);
  border-color: rgba(40,70,100,0.12);
}
body.light-mode .quick-team-dot.spectator {
  background: var(--text-dim);
  box-shadow: none;
}
body.light-mode .quick-role-divider {
  background: rgba(40,70,100,0.12);
}
body.light-mode .quick-seat-choice:focus {
  box-shadow: 0 0 0 2px rgba(40,70,100,0.14);
}
body.light-mode .quick-team-col.red .quick-seat-choice.selected {
  color: var(--game-red);
}
body.light-mode .quick-team-col.blue .quick-seat-choice.selected {
  color: var(--game-blue);
}

/* --- Quick Player Cards --- */
body.light-mode .quick-player {
  background: rgba(40,70,100,0.04);
  border-color: rgba(40,70,100,0.10);
}
body.light-mode .quick-player.ready {
  border-color: rgba(26,154,72,0.32);
  box-shadow: 0 0 0 1px rgba(26,154,72,0.08) inset;
}
body.light-mode .quick-player-badge {
  border-color: rgba(40,70,100,0.14);
  background: rgba(40,70,100,0.06);
}
body.light-mode .quick-player.ready .quick-player-badge {
  color: var(--green);
  border-color: rgba(26,154,72,0.30);
  background: rgba(26,154,72,0.08);
}
body.light-mode .quick-status-chip.not-ready {
  background: rgba(40,70,100,0.08);
  color: var(--text-dim);
}

/* --- Quick Play Deck Cards --- */
body.light-mode .qp-deck-card {
  border-color: rgba(40,70,100,0.14);
  background: var(--surface);
}
body.light-mode .qp-deck-card:hover {
  background: var(--surface2);
}
body.light-mode .qp-deck-card[aria-checked="true"],
body.light-mode .qp-deck-card.selected {
  border-color: rgba(45,125,210,0.45);
  box-shadow: 0 0 0 3px rgba(45,125,210,0.12), var(--shadow-sm);
  background: linear-gradient(135deg, rgba(45,125,210,0.08), rgba(120,80,200,0.06));
}
body.light-mode .qp-deck-emoji {
  background: rgba(40,70,100,0.06);
  border-color: rgba(40,70,100,0.12);
}

/* --- Quick Play Setting Input --- */
body.light-mode .qp-setting .setting-input {
  background: var(--surface);
  border-color: var(--border);
}

/* --- Quick Play Negotiation --- */
body.light-mode .qp-negotiation {
  border-color: var(--border);
  background: radial-gradient(1200px 260px at 10% 0%, rgba(201,60,43,0.08), transparent 60%),
              radial-gradient(1200px 260px at 90% 0%, rgba(26,127,181,0.08), transparent 60%),
              var(--surface);
  box-shadow: var(--shadow-md);
}
body.light-mode .qp-neg-chip {
  border-color: rgba(40,70,100,0.16);
  background: rgba(40,70,100,0.06);
}
body.light-mode .qp-neg-chip::before {
  background: var(--text-dim);
}
body.light-mode .qp-neg-team {
  border-color: rgba(40,70,100,0.12);
  background: var(--surface);
}
body.light-mode .qp-neg-team.red {
  background: linear-gradient(135deg, rgba(201,60,43,0.06), var(--surface));
}
body.light-mode .qp-neg-team.blue {
  background: linear-gradient(135deg, rgba(26,127,181,0.06), var(--surface));
}
body.light-mode .qp-neg-team[data-accepted="true"] {
  border-color: rgba(26,154,72,0.28);
}
body.light-mode .qp-neg-team[data-accepted="true"] .qp-neg-team-state {
  color: var(--green);
}
body.light-mode .qp-neg-pill {
  border-color: rgba(40,70,100,0.14);
  background: rgba(40,70,100,0.06);
}

/* --- Quick Rules Bar --- */
body.light-mode .quick-rules-bar {
  border-color: var(--border);
  background: radial-gradient(900px 220px at 20% 0%, rgba(120,80,200,0.06), transparent 60%),
              radial-gradient(900px 220px at 80% 0%, rgba(20,184,166,0.06), transparent 60%),
              var(--card);
}
body.light-mode .qp-rules-badge {
  border-color: rgba(40,70,100,0.16);
  background: rgba(40,70,100,0.06);
}
body.light-mode .qp-rules-badge::before {
  background: var(--text-dim);
}

/* --- Modal Card (quick play) --- */
body.light-mode .modal-card {
  box-shadow: 0 20px 70px rgba(30,55,85,0.18);
}

/* --- Team Color Dots --- */
body.light-mode .team-color-dot {
  box-shadow: 0 0 0 1px rgba(40,70,100,0.20);
}
body.light-mode .team-color-dot.muted {
  background: var(--text-dim);
}

/* --- Team List Item (mine) --- */
body.light-mode .team-list-item.is-mine {
  border-color: rgba(40,70,100,0.12);
  box-shadow: 0 0 0 1px rgba(40,70,100,0.06);
}
body.light-mode .team-list-count {
  background: rgba(40,70,100,0.06);
}

/* --- My Team Footer --- */
body.light-mode .myteam-footer {
  border-top-color: rgba(40,70,100,0.12);
}

/* --- Floating Chat Button --- */
body.light-mode .floating-chat {
  background: rgba(45,125,210,0.12);
  border-color: rgba(45,125,210,0.28);
  box-shadow: var(--shadow-sm);
}

/* --- Team Badge --- */
body.light-mode .team-badge {
  background: rgba(40,70,100,0.06);
}
body.light-mode .state-pill {
  background: rgba(40,70,100,0.06);
}

/* --- Player Status --- */
body.light-mode .player-status.busy {
  border-color: rgba(40,70,100,0.14);
}

/* --- Link Button Subtle --- */
body.light-mode .link-btn.subtle {
  text-decoration-color: rgba(40,70,100,0.30);
}
body.light-mode .link-btn.subtle:hover {
  text-decoration-color: rgba(40,70,100,0.55);
}

/* --- Invite Card --- */
body.light-mode .invite-card {
  border-color: rgba(40,70,100,0.12);
}

/* --- Chat messages container --- */
body.light-mode .chat-card .chat-messages {
  background: rgba(40,70,100,0.03);
  border-color: rgba(40,70,100,0.10);
}

/* --- Confirm Icon Button --- */
body.light-mode .confirm-icon-btn {
  border-color: var(--border);
  background: var(--surface);
}

/* --- Mode Modal Backdrop --- */
body.light-mode .mode-modal {
  background: rgba(30,50,75,0.38);
}

/* Quick Lobby: AI remove + traits */
.quick-player { position: relative; }
.quick-player.is-ai { padding-right: 34px; }
.quick-remove-ai {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  width: 24px;
  height: 24px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.22);
  background: rgba(0,0,0,0.25);
  color: inherit;
  cursor: pointer;
  line-height: 1;
}
.quick-remove-ai:hover { background: rgba(0,0,0,0.4); }
.ai-traits-link { text-decoration: underline dotted; text-underline-offset: 3px; }

/* Spectator chat: read-only toggle */
.operative-chat-form.spectator-readonly .chat-send-btn {
  opacity: 0.45;
  pointer-events: none;
}

/* ==============================================
   OG CODENAMES UI MODE
   Replicates the official Codenames Online look.
   Activated via body.cozy-mode class.
============================================== */

/* --- OG Variables --- */
body.cozy-mode {
  --bg: #1B2838;
  --surface: #1e3044;
  --surface2: #233a50;
  --card: #1e3044;
  --border: #2a4560;
  --text: #ffffff;
  --text-dim: #8ba4be;
  --accent: #3B8BEB;
  --green: #4CAF50;
  --gold: #FFD54F;
  --red: #C8553A;
  --shadow-lg: 0 18px 50px rgba(0, 0, 0, 0.5);
  --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.4);
  --shadow-sm: 0 4px 14px rgba(0, 0, 0, 0.3);
  --focus-ring: 0 0 0 3px rgba(59, 139, 235, 0.35);
  --game-red: #C8553A;
  --game-red-bg: rgba(200, 85, 58, 0.13);
  --game-red-border: rgba(200, 85, 58, 0.38);
  --game-blue: #3B8BEB;
  --game-blue-bg: rgba(59, 139, 235, 0.13);
  --game-blue-border: rgba(59, 139, 235, 0.38);
  --game-neutral: #D4C5A9;
  --game-neutral-bg: rgba(212, 197, 169, 0.14);
  --game-neutral-border: rgba(212, 197, 169, 0.35);
  --game-assassin: #3A3A3A;
  --game-assassin-bg: rgba(58, 58, 58, 0.82);
  --game-assassin-border: rgba(58, 58, 58, 0.45);

  /* In-game markings tuned for Cozy */
  --tag-yes-bg: rgba(76, 175, 80, 0.86);
  --tag-maybe-bg: rgba(255, 213, 79, 0.85);
  --tag-no-bg: rgba(200, 85, 58, 0.86);
  --tag-yes-fg: #0b1a10;
  --tag-maybe-fg: #1b1405;
  --tag-no-fg: #fff;
  --tag-border: rgba(255, 255, 255, 0.16);
  --tag-shadow: 0 2px 12px rgba(0,0,0,0.38);
}

/* --- OG Background --- */
body.cozy-mode {
  background-color: #1B2838;
  background-image: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 3px,
    rgba(255, 255, 255, 0.015) 3px,
    rgba(255, 255, 255, 0.015) 4px
  );
}

body.cozy-mode .game-container-expanded {
  background: transparent;
}

/* --- Hide standard elements in OG mode --- */
body.cozy-mode .game-header-expanded {
  display: none;
}

body.cozy-mode .clue-history-panel,
body.cozy-mode .game-log-panel {
  display: none !important;
}

/* On desktop, Cozy uses the OG side panels, so we hide the standard chat panel.
   On mobile we keep the standard chat available via the mobile sidebar toggle. */
@media (min-width: 769px) {
  body.cozy-mode .operative-chat-panel {
    display: none !important;
  }
}

/* --- OG Top Bar --- */
.og-topbar {
  display: none;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  flex-shrink: 0;
}

body.cozy-mode .og-topbar {
  display: flex;
}

.og-topbar-left,
.og-topbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.og-topbar-btn {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 8px;
  color: #fff;
  font-size: 13px;
  font-weight: 600;
  padding: 6px 14px;
  cursor: pointer;
  transition: background 0.15s;
  line-height: 1.2;
}

.og-topbar-btn:hover {
  background: rgba(255, 255, 255, 0.14);
}

.og-topbar-icon-btn {
  padding: 6px 10px;
}

.og-topbar-svg {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

.og-topbar-icon-btn svg {
  width: 16px;
  height: 16px;
}

.og-topbar-count {
  font-weight: 400;
  opacity: 0.7;
}

/* --- OG Phase Banner --- */
.og-phase-banner {
  display: none;
  text-align: center;
  padding: 14px 0 8px;
}

body.cozy-mode .og-phase-banner {
  display: block;
}

.og-phase-text {
  font-size: 18px;
  font-weight: 800;
  color: #ffffff;
  text-transform: uppercase;
  letter-spacing: 2px;
}

/* --- OG Game Board --- */
body.cozy-mode .game-board {
  gap: 10px;
  margin-bottom: 12px;
}

/* --- OG Game Cards: Base (unrevealed, operative view) --- */
body.cozy-mode .game-card {
  background: #D4C5A9;
  border: 2px solid #c4b494;
  border-radius: 10px;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  aspect-ratio: 1.75;
}

body.cozy-mode .game-card .card-word {
  color: #2c2416;
  font-weight: 800;
  text-transform: uppercase;
  font-size: clamp(10px, 1.3vw, 14px);
  letter-spacing: 0.6px;
}

body.cozy-mode .game-card:hover:not(.revealed):not(.disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.25);
  border-color: #b0a080;
}

/* --- OG Spymaster View: Solid color fills --- */
body.cozy-mode .game-card.spymaster-view.card-red {
  background: #C8553A;
  border-color: #a8432c;
}
body.cozy-mode .game-card.spymaster-view.card-red .card-word {
  color: #ffffff;
}

body.cozy-mode .game-card.spymaster-view.card-blue {
  background: #3B8BEB;
  border-color: #2a6fc0;
}
body.cozy-mode .game-card.spymaster-view.card-blue .card-word {
  color: #ffffff;
}

body.cozy-mode .game-card.spymaster-view.card-neutral {
  background: #D4C5A9;
  border-color: #c4b494;
}
body.cozy-mode .game-card.spymaster-view.card-neutral .card-word {
  color: #2c2416;
}

body.cozy-mode .game-card.spymaster-view.card-assassin {
  background: #3A3A3A;
  border-color: #2a2a2a;
}
body.cozy-mode .game-card.spymaster-view.card-assassin .card-word {
  color: #ffffff;
}

/* --- OG Revealed Cards --- */
body.cozy-mode .game-card.revealed.card-red {
  background: #C8553A;
  border-color: #a8432c;
}

body.cozy-mode .game-card.revealed.card-blue {
  background: #3B8BEB;
  border-color: #2a6fc0;
}

body.cozy-mode .game-card.revealed.card-neutral {
  background: #D4C5A9;
  border-color: #c4b494;
}
body.cozy-mode .game-card.revealed.card-neutral .card-word {
  color: #2c2416;
}

body.cozy-mode .game-card.revealed.card-assassin {
  background: #3A3A3A;
  border-color: #2a2a2a;
}

body.cozy-mode .game-card.revealed .card-word {
  color: #ffffff;
}

/* --- OG Pending Selection --- */
body.cozy-mode .game-card.pending-select:not(.revealed):not(.disabled) {
  border-color: #FFD54F;
  box-shadow: 0 0 0 2px rgba(255, 213, 79, 0.35), 0 3px 8px rgba(0, 0, 0, 0.35);
}

body.cozy-mode .game-card .card-checkmark {
  background: #4CAF50;
  border-radius: 50%;
}

/* --- OG Clue Input --- */
body.cozy-mode .game-center-area .game-action-bar {
  background: transparent;
  border: none;
  justify-content: center;
  padding: 8px 0;
}

body.cozy-mode .clue-form-expanded {
  background: #ffffff;
  border-radius: 28px;
  padding: 5px 5px 5px 20px;
  max-width: 460px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  gap: 6px;
}

body.cozy-mode .clue-input-expanded {
  background: transparent;
  border: none;
  color: #333;
  font-size: 15px;
  font-weight: 600;
  box-shadow: none;
}

body.cozy-mode .clue-input-expanded:focus {
  box-shadow: none;
  border: none;
  outline: none;
}

body.cozy-mode .clue-input-expanded::placeholder {
  color: #aaa;
  text-transform: uppercase;
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 1.5px;
}

body.cozy-mode .clue-num-expanded {
  background: transparent;
  border: none;
  border-left: 2px solid #e0e0e0;
  color: #333;
  width: 48px;
  text-align: center;
  font-weight: 700;
  font-size: 16px;
  box-shadow: none;
}

body.cozy-mode .clue-num-expanded:focus {
  box-shadow: none;
  border: none;
  border-left: 2px solid #e0e0e0;
  outline: none;
}

/* --- OG Number Minus Button --- */
.og-num-btn {
  display: none;
}

body.cozy-mode .og-num-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  min-width: 36px;
  border-radius: 50%;
  background: #e0e0e0;
  border: none;
  color: #666;
  font-size: 20px;
  font-weight: 700;
  cursor: pointer;
  transition: background 0.15s;
  line-height: 1;
  flex-shrink: 0;
}

body.cozy-mode .og-num-btn:hover {
  background: #d0d0d0;
}

body.cozy-mode .clue-form-expanded .btn.primary {
  background: #4CAF50;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  min-width: 40px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 0;
  box-shadow: 0 2px 8px rgba(76, 175, 80, 0.4);
  transition: background 0.15s, transform 0.15s;
}

body.cozy-mode .clue-form-expanded .btn.primary::after {
  content: '\2192';
  font-size: 20px;
  font-weight: 700;
}

body.cozy-mode .clue-form-expanded .btn.primary:hover {
  background: #43A047;
  transform: scale(1.05);
}

/* --- OG Clue Display (operatives guessing phase) --- */
body.cozy-mode .clue-display-expanded {
  background: rgba(255, 255, 255, 0.06);
  padding: 8px 20px;
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

body.cozy-mode .clue-label {
  color: #8ba4be;
  text-transform: uppercase;
  font-weight: 700;
  font-size: 11px;
  letter-spacing: 1px;
}

body.cozy-mode .clue-word-expanded {
  color: #ffffff;
  font-weight: 800;
  font-size: 22px;
}

body.cozy-mode .clue-number-expanded {
  background: rgba(255, 255, 255, 0.12);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.15);
}

/* --- OG Operative Actions --- */
body.cozy-mode .operative-actions-expanded .btn {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: #fff;
  border-radius: 20px;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 0.5px;
}

body.cozy-mode .operative-actions-expanded .btn:hover {
  background: rgba(255, 255, 255, 0.14);
}

/* --- OG Waiting Message --- */
body.cozy-mode .waiting-expanded {
  color: #8ba4be;
  font-style: normal;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 1px;
  font-size: 14px;
}

/* --- OG Team Side Panels --- */
.og-team-panel {
  display: none;
  flex-direction: column;
  gap: 8px;
  padding: 14px;
  border-radius: 14px;
  flex: 1;
  min-height: 0;
  overflow-y: auto;
}

body.cozy-mode .og-team-panel {
  display: flex;
}

.og-team-blue {
  background: linear-gradient(180deg, rgba(59, 139, 235, 0.12) 0%, rgba(59, 139, 235, 0.04) 100%);
  border: 1px solid rgba(59, 139, 235, 0.25);
}

.og-team-red {
  background: linear-gradient(180deg, rgba(200, 85, 58, 0.12) 0%, rgba(200, 85, 58, 0.04) 100%);
  border: 1px solid rgba(200, 85, 58, 0.25);
}

/* --- OG Section Headers --- */
.og-section-header {
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: #8ba4be;
  padding: 4px 0 2px;
}

.og-team-red .og-section-header,
.og-mobile-red .og-section-header {
  color: #c4917e;
}


  /* --- OG Mobile Team Panels (match codenames.game mobile layout) --- */
  body.og-mode .og-mobile-team {
    background: transparent;
    border: none;
    box-shadow: none;
    padding: 0;
    gap: 6px;
  }

  body.og-mode .og-mobile-box {
    position: relative;
    overflow: hidden;
    border-radius: 18px;
    padding: 7px 8px 8px;
    border: 2px solid rgba(255,255,255,0.22);
    box-shadow: 0 10px 18px rgba(0,0,0,0.28);
    min-width: 0;
  }

  body.og-mode .og-mobile-blue .og-mobile-box {
    background: linear-gradient(180deg, rgba(0,142,224,0.92) 0%, rgba(82,183,255,0.70) 100%);
  }

  body.og-mode .og-mobile-red .og-mobile-box {
    background: linear-gradient(180deg, rgba(255,82,65,0.92) 0%, rgba(255,131,61,0.70) 100%);
  }

  body.og-mode .og-mobile-box-ops { min-height: 62px; }
  body.og-mode .og-mobile-box-spy { min-height: 48px; }

  body.og-mode .og-mobile-box-header {
    position: relative;
    z-index: 2;
    text-align: center;
    font-size: 10px;
    font-weight: 900;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: rgba(255,255,255,0.92);
    text-shadow: 0 2px 0 rgba(0,0,0,0.22);
    margin-bottom: 4px;
  }

  body.og-mode .og-mobile-box-art {
    position: absolute;
    inset: 0;
    z-index: 1;
    background-repeat: no-repeat;
    background-position: left bottom;
    background-size: 92% auto;
    filter: drop-shadow(0 10px 14px rgba(0,0,0,0.25));
    pointer-events: none;
  }

  body.og-mode .og-mobile-box-art-blue {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20220%20140%27%3E%0A%3Cg%20opacity%3D%270.28%27%20fill%3D%27%23ffffff%27%3E%0A%3Cpath%20d%3D%27M78%20108c14-9%2030-13%2047-13%2018%200%2034%204%2048%2013%2010%207%2017%2016%2020%2028H58c3-12%2010-21%2020-28z%27/%3E%0A%3Ccircle%20cx%3D%27118%27%20cy%3D%2754%27%20r%3D%2730%27/%3E%0A%3Cpath%20d%3D%27M98%2053c6%208%2012%2012%2020%2012%209%200%2016-4%2022-12%202-3%205-4%209-3-4%2015-15%2024-31%2024-15%200-27-9-31-24%204-1%207%200%2011%203z%27/%3E%0A%3C/g%3E%0A%3C/svg%3E");
  }

  body.og-mode .og-mobile-box-art-red {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20220%20140%27%3E%0A%3Cg%20opacity%3D%270.28%27%20fill%3D%27%23ffffff%27%3E%0A%3Cpath%20d%3D%27M78%20108c14-9%2030-13%2047-13%2018%200%2034%204%2048%2013%2010%207%2017%2016%2020%2028H58c3-12%2010-21%2020-28z%27/%3E%0A%3Ccircle%20cx%3D%27118%27%20cy%3D%2754%27%20r%3D%2730%27/%3E%0A%3Cpath%20d%3D%27M98%2053c6%208%2012%2012%2020%2012%209%200%2016-4%2022-12%202-3%205-4%209-3-4%2015-15%2024-31%2024-15%200-27-9-31-24%204-1%207%200%2011%203z%27/%3E%0A%3C/g%3E%0A%3C/svg%3E");
  }

  body.og-mode .og-mobile-box-art-spy {
    opacity: 0.22;
    background-position: left 65%;
    background-size: 100% auto;
  }

  body.og-mode .og-mobile-box .og-player-slots {
    position: relative;
    z-index: 2;
  }

  body.og-mode .og-mobile-scoreline {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 0 4px;
    min-height: 28px;
  }

  body.og-mode .og-mobile-scoreline-blue { justify-content: flex-start; }
  body.og-mode .og-mobile-scoreline-red { justify-content: flex-end; }

  body.og-mode .og-mobile-score-number {
    font-size: 38px;
    font-weight: 900;
    line-height: 1;
    color: #fff;
    -webkit-text-stroke: 4px rgba(0,0,0,0.28);
    text-shadow: 0 3px 0 rgba(0,0,0,0.30), 0 0 14px rgba(0,0,0,0.22);
  }

  body.og-mode .og-mobile-agent-strip {
    display: flex;
    flex-wrap: wrap;
    gap: 2px;
    max-width: 84px;
    align-content: center;
    padding-top: 2px;
  }

  body.og-mode .og-mobile-agent-strip .og-agent-dot {
    width: 12px;
    height: 8px;
    border-radius: 3px;
    background: rgba(255,255,255,0.85);
    border: 1px solid rgba(0,0,0,0.18);
    box-shadow: 0 2px 0 rgba(0,0,0,0.18);
  }

  body.og-mode .og-mobile-agent-strip-blue .og-agent-dot {
    background: rgba(200, 245, 255, 0.9);
  }

  body.og-mode .og-mobile-agent-strip-red .og-agent-dot {
    background: rgba(255, 232, 205, 0.9);
  }
/* --- OG Illustration Boxes --- */
.og-illustration {
  width: 100%;
  aspect-ratio: 1.55;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 8px;
  position: relative;
  overflow: hidden;
}

.og-illustration-blue {
  background: linear-gradient(145deg, #1a3a5c 0%, #2563a8 50%, #1e4d7a 100%);
  border: 1px solid rgba(59, 139, 235, 0.35);
  box-shadow: inset 0 -30px 40px rgba(0, 0, 0, 0.2);
}

.og-illustration-red {
  background: linear-gradient(145deg, #4a2020 0%, #a84832 50%, #6b2d1e 100%);
  border: 1px solid rgba(200, 85, 58, 0.35);
  box-shadow: inset 0 -30px 40px rgba(0, 0, 0, 0.2);
}

.og-illustration .og-player-slots {
  position: relative;
  z-index: 1;
}

.og-illustration .og-player-slot {
  background: rgba(0, 0, 0, 0.25);
  backdrop-filter: blur(4px);
  font-size: 12px;
  padding: 4px 8px;
}

/* --- OG Player Slots --- */
.og-player-slots {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.og-player-slot {
  font-size: 13px;
  font-weight: 600;
  color: #ffffff;
  padding: 6px 10px;
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.20);
  border: 1px solid rgba(255,255,255,0.10);
}

.og-player-slot.og-empty {
  color: rgba(255,255,255,0.65);
  font-style: italic;
  font-weight: 400;
}

/* --- OG Score Block --- */
.og-score-block {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
}

.og-score-blue {
  flex-direction: row;
}

.og-score-red {
  flex-direction: row;
}

.og-score-number {
  font-size: 52px;
  font-weight: 900;
  line-height: 1;
  font-variant-numeric: tabular-nums;
}

.og-score-blue .og-score-number {
  color: #1a5fa8;
  text-shadow: 0 2px 10px rgba(26, 95, 168, 0.3);
}

.og-score-red .og-score-number {
  color: #943d28;
  text-shadow: 0 2px 10px rgba(148, 61, 40, 0.3);
}

/* --- OG Score Avatar --- */
.og-score-avatar {
  width: 48px;
  height: 48px;
  border-radius: 10px;
  flex-shrink: 0;
}

.og-score-avatar-blue {
  background: linear-gradient(135deg, #1a3a5c 0%, #3B8BEB 100%);
  border: 2px solid rgba(59, 139, 235, 0.4);
  box-shadow: 0 2px 8px rgba(59, 139, 235, 0.25);
}

.og-score-avatar-red {
  background: linear-gradient(135deg, #4a2020 0%, #C8553A 100%);
  border: 2px solid rgba(200, 85, 58, 0.4);
  box-shadow: 0 2px 8px rgba(200, 85, 58, 0.25);
}

.og-avatar-sm {
  width: 36px;
  height: 36px;
  border-radius: 8px;
}

/* --- OG Game Log in right panel --- */
.og-game-log-section {
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  padding-top: 8px;
  margin-top: auto;
  display: flex;
  flex-direction: column;
  flex: 0 0 auto;
  min-height: 0;
  max-height: 270px;
}

.og-game-log {
  flex: 1;
  max-height: none;
  min-height: 280px;
  overflow-y: auto;
  font-size: 13px;
  line-height: 1.35;
  color: rgba(255,255,255,0.86);
  padding: 6px 0;
}

/* --- OG Tag Legend --- */
body.cozy-mode .card-tag-legend {
  background: rgba(27, 40, 56, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
}

/* --- OG Role Selection --- */
body.cozy-mode .role-selection-compact {
  background: rgba(27, 40, 56, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 14px;
}

body.cozy-mode .role-btn-compact {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
}

body.cozy-mode .role-btn-compact:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
}

/* --- OG Sidebar Panel Header (for game log) --- */
body.cozy-mode .og-game-log .game-log-entry {
  padding: 3px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

/* --- OG Mobile Panels --- */
.og-mobile-panels {
  display: none;
}

.og-mobile-score-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0;
}

.og-score-number-sm {
  font-size: 32px;
}

.og-player-slots-sm .og-player-slot {
  font-size: 11px;
  padding: 3px 6px;
}

.og-game-log-mobile {
  max-height: 120px;
}

/* --- OG Mobile Overrides --- */
@media (max-width: 768px) {
  /* Hide desktop side panels on mobile */
  body.cozy-mode .og-team-panel {
    display: none !important;
  }

  /* Show mobile panels at top */
  body.cozy-mode .og-mobile-panels {
    display: flex;
    gap: 4px;
    padding: 4px 6px;
    flex-shrink: 0;
  }

  .og-mobile-team {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 3px;
    padding: 5px;
    border-radius: 8px;
    min-width: 0;
  }

  .og-mobile-blue {
    background: linear-gradient(180deg, rgba(59, 139, 235, 0.15) 0%, rgba(59, 139, 235, 0.05) 100%);
    border: 1px solid rgba(59, 139, 235, 0.25);
  }

  .og-mobile-red {
    background: linear-gradient(180deg, rgba(200, 85, 58, 0.15) 0%, rgba(200, 85, 58, 0.05) 100%);
    border: 1px solid rgba(200, 85, 58, 0.25);
  }

  .og-mobile-red .og-section-header {
    color: #c4917e;
  }

  .og-mobile-log {
    flex: 0.7;
    display: flex;
    flex-direction: column;
    gap: 3px;
    padding: 5px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.25);
    min-width: 0;
    overflow: hidden;
  }

  .og-illustration-sm {
    aspect-ratio: 1.4;
    border-radius: 6px;
    padding: 3px;
  }

  /* Show standard game header on mobile for timer/scores (hidden behind mobile panels) */
  body.cozy-mode .game-header-expanded {
    display: none;
  }

  body.cozy-mode .og-phase-banner {
    padding: 6px 0 2px;
  }

  body.cozy-mode .og-phase-text {
    font-size: 13px;
    letter-spacing: 1px;
  }

  body.cozy-mode .clue-form-expanded {
    max-width: 100%;
    border-radius: 22px;
    padding: 4px 4px 4px 14px;
  }

  body.cozy-mode .game-board {
    gap: 3px;
  }

  body.cozy-mode .game-card {
    aspect-ratio: 1.55;
  }

  body.cozy-mode .game-card .card-word {
    font-size: clamp(7px, 2.2vw, 11px);
    letter-spacing: 0.2px;
  }

  body.cozy-mode .og-topbar {
    padding: 4px 8px;
  }

  body.cozy-mode .og-topbar-btn {
    font-size: 11px;
    padding: 4px 8px;
  }

  /* Cozy mobile panels: compact scores & illustrations */
  .og-score-number-sm {
    font-size: 20px;
  }

  .og-section-header {
    font-size: 8px;
    letter-spacing: 0.8px;
    padding: 2px 0 1px;
  }

  .og-mobile-score-row {
    gap: 4px;
    padding: 2px 0;
  }

  .og-avatar-sm {
    width: 24px;
    height: 24px;
    border-radius: 6px;
  }

  .og-player-slots-sm .og-player-slot {
    font-size: 9px;
    padding: 2px 4px;
  }

  body.cozy-mode .og-phase-text {
    font-size: 11px;
    letter-spacing: 0.8px;
  }
}


/* ==============================================
   OG CODENAMES UI MODE
   Replicates the official Codenames Online look.
   Activated via body.og-mode class.
============================================== */

/* --- OG Variables (from Style.txt) --- */
body.og-mode {
  --fontSize: 18.56px;
  --positive: 111 95.24% 24.71%;
  --positive-foreground: 0 100% 100%;
  --positive-lighter: 109.12 100% 40%;
  --positive-border: 85 93% 61%;
  --primary: 108 95% 36%;
  --left-team-primary-color: #008ee0;
  --right-team-primary-color: #ff5241;
  --side1-team-primary-color: #5D9627;
  --side2-team-primary-color: #007769;
  --app: 18 100% 36%;
  --app-lighter: 33 100% 46%;
  --app-border: 33 91% 70%;
  --bg-cn-gradient-1: #0FA3EF;
  --bg-cn-gradient-2: #015580;
  --bg-cn-duet-gradient-1: #94D234;
  --bg-cn-duet-gradient-2: #009A58;
  --bg-right-team-primary: #ff5241;
  --bg-left-team-primary: #008ee0;
  --left-highlight: radial-gradient(at center, rgba(42,240,255,1), rgba(42,240,255,0.6),rgba(2550,255,0,0.0),rgba(2550,255,0,0));
  --right-highlight: radial-gradient(at center, rgba(255,196,83,1), rgba(255,196,83,0.6),rgba(2550,255,0,0.0),rgba(2550,255,0,0));
  --bg-timer-blue: linear-gradient(180deg, #AEF4FF 0%, #9CF3FF 100%);
  --bg-timer-red: linear-gradient(180deg, #FFD19D 0%, #FFB374 100%);
  --blue-gradient: linear-gradient(to bottom, #008ee0, #52b7ff);
  --red-gradient: linear-gradient(to bottom, #ff5241, #ff833d);
  --green-gradient: linear-gradient(to bottom, hsla(108, 95%, 36%, 1), hsla(94, 73%, 48%, 1));
  --green-gradient-light: linear-gradient(to bottom, hsla(99, 74%, 58%, 1), hsla(82, 86%, 66%, 1));
  --side1-gradient: linear-gradient(to bottom, #94D234, #5D9627);
  --side2-gradient: linear-gradient(to bottom, #0EA786, #007769);
  --blue-red-gradient: linear-gradient(to bottom, #008ee0, #ff5241);
  --side1-side2-gradient: linear-gradient(to bottom, #94D234, #007769);
  --blue-shadow-a: #beffef;
  --blue-shadow-b: #00b3ff;
  --blue-shadow-c: #00b3ff;
  --red-shadow-a: #ffe5be;
  --red-shadow-b: #ff6b00;
  --bg-null-layer1-1: rgba(0,0,0,1);
  --bg-null-layer1-2: rgba(20,20,20,1);
  --bg-null-layer1-3: rgba(40,40,40,1);
  --bg-null-svg: rgba(0,0,0,0.2);
  --bg-null-layer2-1: rgba(0,0,0,1);
  --bg-null-layer2-2: rgba(0,0,0,0.2);
  --bg-null-layer2-3: transparent;
  --bg-home-layer1-1: rgb(65, 3, 24);
  --bg-home-layer1-2: #790f32;
  --bg-home-layer1-3: #981943;
  --bg-home-svg: rgba(255,255,255,0.05);
  --bg-home-layer2-1: transparent;
  --bg-home-layer2-2: transparent;
  --bg-home-layer2-3: transparent;
  --bg-home-bottom-1: rgb(184,108,26);
  --bg-home-bottom-2: rgba(178,105,27,0.5);
  --bg-home-bottom-3: transparent;
  --bg-red-layer1-1: #110707;
  --bg-red-layer1-2: rgba(66,46,44,1);
  --bg-red-layer1-3: rgba(85,59,53,1);
  --bg-red-svg: rgba(0, 0, 0, 0.1);
  --bg-red-layer2-1: transparent;
  --bg-red-layer2-2: transparent;
  --bg-red-layer2-3: transparent;
  --bg-blue-layer1-1: #0d1a0f;
  --bg-blue-layer1-2: #2a4030;
  --bg-blue-layer1-3: #365842;
  --bg-blue-svg: rgba(0, 0, 0, 0.1);
  --bg-blue-layer2-1: transparent;
  --bg-blue-layer2-2: transparent;
  --bg-blue-layer2-3: transparent;
  --border-cardcounter-red: #ff5241;
  --border-cardcounter-blue: #008ee0;
  --bg-warning: #ef4444;
  --text-suggestion: #1BE1C6;
  --text-suggestion-liked: #94D234;
  --team-blue-400: #52b7ff;
  --team-blue-500: #008ee0;
  --team-blue-800: #193cb8;
  --team-red-400: #ff5242;
  --team-red-500: #fb2c36;
  --team-red-800: #9f0712;
  --logpanel-black-card: #000;
  --logpanel-neutral-card: #af9973;
  --guess-icon-bg: linear-gradient(to bottom, hsla(108, 95%, 36%, 1),hsla(94, 73%, 48%, 1));
  --guess-icon-bg-light: linear-gradient(to bottom, hsla(99, 74%, 58%, 1),hsla(82, 86%, 66%, 1));
  /* Card palette: slightly deeper/more muted than the raw CNO colors.
     This keeps the board readable for longer sessions and improves contrast. */
  --neutral-cardBorder: #D7B693;
  --neutral-cardBg: #F9D7B5;
  --neutral-innerBorder: #BBA38C;
  --neutral-innerBg: #F9DBBB;
  /* Word strip (unrevealed/neutral) â€” darker, closer to black like CNO */
  --neutral-darkWordBg: #917459;
  --red-cardBorder: #D68052;
  --red-cardBg: #F19665;
  --red-innerBorder: #A54532;
  --red-innerBg: #E66046;
  --red-darkWordBg: #7B331E;
  --blue-cardBorder: #49AFCB;
  --blue-cardBg: #6BCFEB;
  --blue-innerBorder: #327497;
  --blue-innerBg: #46A2D3;
  --blue-darkWordBg: #28527C;
  --black-cardBorder: #B6B5B5;
  --black-cardBg: #8C8D8D;
  --black-innerBorder: #2A2A2A;
  --black-innerBg: #525252;
  --black-darkWordBg: #2A2A2A;
  --gold-cardBorder: #FEE9B7;
  --gold-cardBg: #FDD878;
  --gold-innerBorder: #B2670C;
  --gold-innerBg: #FF9F2D;
  --gold-darkWordBg: #B2670C;
  --timertoken-cardBorder: #FFE8D4;
  --timertoken-cardBg: #FFD6B0;
  --timertoken-innerBorder: #AC8D77;
  --particle-red-primary: #F8543A;
  --particle-red-secondary: #FF9159;
  --particle-blue-primary: #3DD1EE;
  --particle-blue-secondary: #2F75AA;
  --particle-neutral-primary: #FFD6B0;
  --particle-neutral-secondary: #AC8D77;
  --particle-black-primary: #000000;
  --particle-black-secondary: #333333;
  --avatar-neutral-nameBg: #444444;
  --avatar-neutral-circleGradient: linear-gradient(to bottom, #C4C4C4, #6C6C6C);
  --avatar-red-nameBg: #901800;
  --avatar-red-circleGradient: linear-gradient(to bottom, #FFCC8B, #FF8D3B);
  --avatar-blue-nameBg: #004F7B;
  --avatar-blue-circleGradient: linear-gradient(to bottom, #ABEEFF, #51B6FE);

  /* App token mapping (used by this codebase) */
  --bg: var(--bg-null-layer1-1);
  --surface: rgba(255,255,255,0.06);
  --surface2: rgba(255,255,255,0.04);
  --card: rgba(255,255,255,0.06);
  --border: rgba(255,255,255,0.14);
  --text: #ffffff;
  --text-dim: rgba(255,255,255,0.68);
  --accent: var(--bg-left-team-primary);
  --green: #94D234;
  --gold: var(--gold-cardBg);
  --red: var(--bg-right-team-primary);

  --panel: rgba(255,255,255,0.05);
  --border-soft: rgba(255,255,255,0.10);
  --surface-glass: rgba(255,255,255,0.06);
  --shadow-lg: 0 18px 50px rgba(0,0,0,0.55);
  --shadow-md: 0 10px 28px rgba(0,0,0,0.45);
  --shadow-sm: 0 6px 18px rgba(0,0,0,0.35);
  --focus-ring: 0 0 0 3px rgba(0,142,224,0.35);

  /* Game accents */
  --game-red: var(--bg-right-team-primary);
  --game-red-bg: color-mix(in srgb, var(--bg-right-team-primary) 18%, transparent);
  --game-red-border: color-mix(in srgb, var(--bg-right-team-primary) 42%, transparent);
  --game-blue: var(--bg-left-team-primary);
  --game-blue-bg: color-mix(in srgb, var(--bg-left-team-primary) 18%, transparent);
  --game-blue-border: color-mix(in srgb, var(--bg-left-team-primary) 42%, transparent);
  --game-neutral: #af9973;
  --game-neutral-bg: rgba(175,153,115,0.18);
  --game-neutral-border: rgba(175,153,115,0.42);
  --game-assassin: #000000;
  --game-assassin-bg: rgba(0,0,0,0.80);
  --game-assassin-border: rgba(255,255,255,0.20);

  /* In-game markings tuned for Codenames Online */
  --tag-yes-bg: rgba(111, 196, 79, 0.88);
  --tag-maybe-bg: rgba(255, 196, 83, 0.88);
  --tag-no-bg: rgba(255, 82, 65, 0.88);
  --tag-yes-fg: #06130a;
  --tag-maybe-fg: #1b1205;
  --tag-no-fg: #fff;
  --tag-border: rgba(255,255,255,0.16);
  --tag-shadow: 0 2px 12px rgba(0,0,0,0.42);
}


body.og-mode::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  /* subtle horizontal scanlines like the OG */
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.045) 0px,
      rgba(255,255,255,0.045) 1px,
      rgba(0,0,0,0) 1px,
      rgba(0,0,0,0) 5px
    );
  opacity: 0.24;
  mix-blend-mode: overlay;
  z-index: 0;
}
/* --- OG Background --- */
body.og-mode {
  /* OG background: dark olive/sage green gradient (matches official Codenames Online) */
  background:
    radial-gradient(1200px 700px at 50% -12%, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.00) 58%),
    radial-gradient(1100px 700px at 15% -12%, rgba(0,142,224,0.12) 0%, rgba(0,142,224,0.00) 62%),
    radial-gradient(1100px 700px at 85% -12%, rgba(255,82,65,0.10) 0%, rgba(255,82,65,0.00) 62%),
    linear-gradient(180deg, var(--bg-blue-layer1-1) 0%, var(--bg-blue-layer1-2) 55%, var(--bg-blue-layer1-3) 100%);
}

body.og-mode .panel-game {
  background: transparent;
}

body.og-mode .game-container-expanded {
  background: transparent;
}

/* --- Hide standard elements in OG mode --- */
body.og-mode .game-header-expanded {
  display: none;
}

body.og-mode .clue-history-panel,
body.og-mode .game-log-panel {
  display: none !important;
}

/* On desktop, Codenames Online uses the OG side panels, so we hide the standard chat panel.
   On mobile we keep the standard chat available via the mobile sidebar toggle. */
@media (min-width: 769px) {
  body.og-mode .operative-chat-panel {
    display: none !important;
  }
}

/* --- OG Top Bar --- */
.og-topbar {
  display: none;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  flex-shrink: 0;
}

body.og-mode .og-topbar {
  display: flex;
}

.og-topbar-left,
.og-topbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.og-topbar-btn {
  display: inline-flex;
  align-items: center;
  gap: 7px;
  background: rgba(0,0,0,0.06);
  border: 2px solid rgba(255,255,255,0.70);
  border-radius: 999px;
  color: #fff;
  font-size: 14px;
  font-weight: 700;
  padding: 8px 18px;
  cursor: pointer;
  transition: background 0.15s, border-color 0.15s;
  line-height: 1.1;
  backdrop-filter: blur(6px);
}

.og-topbar-btn:hover {
  background: rgba(0,0,0,0.28);
  border-color: rgba(255,255,255,0.85);
}

.og-topbar-btn:hover {
  background: rgba(255, 255, 255, 0.14);
}

.og-topbar-icon-btn {
  padding: 6px 10px;
}

.og-topbar-svg {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

.og-topbar-icon-btn svg {
  width: 16px;
  height: 16px;
}

.og-topbar-count {
  font-weight: 400;
  opacity: 0.7;
}

/* --- OG Phase Banner --- */
.og-phase-banner {
  display: none;
  text-align: center;
  padding: 14px 0 8px;
}

body.og-mode .og-phase-banner {
  display: block;
}

.og-phase-text {
  font-size: 34px;
  font-weight: 900;
  color: #ffffff;
  text-transform: uppercase;
  letter-spacing: 2.6px;
  text-shadow: 0 4px 18px rgba(0,0,0,0.55);
}

/* --- OG Game Board --- */
body.og-mode .game-board {
  gap: 10px;
  margin-bottom: 12px;
}

/* --- OG Game Cards: cno2 style --- */
body.og-mode .game-card{
  /* Defaults (unrevealed operative view) */
  --cardBorder: var(--neutral-cardBorder);
  --cardBg: var(--neutral-cardBg);
  --innerBorder: var(--neutral-innerBorder);
  --innerBg: var(--neutral-innerBg);
  --wordBg: var(--neutral-darkWordBg);
  --wordColor: #ffffff;

  /* Label geometry (tuned to match Codenames Online cards)
     Keep the word strip fully inside the inner plate:
     inner plate inset is 8px, so 20px keeps it comfortably inside. */
  /* Keep the word strip inside the inner plate, but very close to its edge */
  --labelInsetX: 12px;     /* left/right inset for the word strip */
  --labelInsetY: 12px;     /* bottom inset for the word strip */
  /* Slightly taller word strip so the divider sits a bit higher */
  --labelHeight: 35%;      /* height of the bottom word strip */

  background: var(--cardBg);
  /* Thinner outer rim like the reference */
  border: 1px solid var(--cardBorder);
  /* Squarer corners (still softly rounded) */
  border-radius: 10px;
  box-shadow: 0 8px 18px rgba(0,0,0,0.32);
  position: relative;
  overflow: hidden;
  /* Slightly taller: closer to square while keeping the CNO feel */
  aspect-ratio: 1.48;
  transform: translateZ(0);
}

/* Ensure OG flip-wrapper content sits above the decorative ::before plate.
   Without this, the card-face/back (and therefore the word label) can render
   behind the inner plate and look "blank". */
body.og-mode .game-card .card-inner{
  z-index: 3;
}
body.og-mode .game-card .card-face,
body.og-mode .game-card .card-back{
  /* We draw the CNO-style plates with ::before/::after on .game-card.
     The faces themselves are just positioning containers for the label + checkmark. */
  z-index: 3;
  padding: 0;
  display: block;
  position: absolute;
  inset: 0;
}

body.og-mode .game-card::before{
  content:"";
  position:absolute;
  /* Thinner light outer layer */
  inset: 6px;
  border-radius: 6px;
  /* inner plate: lighter top band + flat/soft gradient */
  background:
    linear-gradient(to bottom, rgba(255,255,255,0.10), rgba(255,255,255,0.00) 30%),
    var(--innerBg);
  border: 2px solid var(--innerBorder);
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.16),
    inset 0 -2px 0 rgba(0,0,0,0.10);
  z-index: 1;
}

/* Separator line across inner plate */
body.og-mode .game-card::after{
  content:"";
  position:absolute;
  left: 6px;
  right: 6px;
  /* Divider line sits exactly at the top edge of the bottom word strip */
  bottom: calc(var(--labelInsetY) + var(--labelHeight) + 3px);
  height: 2px;
  background: var(--innerBorder);
  opacity: 0.45;
  z-index: 2;
  pointer-events: none;
}

body.og-mode .game-card .card-word{
  position: absolute;
  z-index: 4;

  /* Bottom word strip (inset from the inner plate, like Codenames Online) */
  left: var(--labelInsetX);
  right: var(--labelInsetX);
  bottom: var(--labelInsetY);
  height: var(--labelHeight);

  display: flex;
  align-items: center;
  justify-content: center;

  background: var(--wordBg);
  color: color-mix(in srgb, var(--wordColor) 92%, #d6dde6 8%);

  font-family: 'Russo One', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  font-weight: 400;
  text-transform: uppercase;
  /* Slightly smaller like CNO (JS will still auto-fit long words) */
  font-size: clamp(10px, 1.25vw, 17px);
  letter-spacing: 0.04em;
  line-height: 1.05;
  text-align: center;
  white-space: nowrap;

  /* Nudge text a bit lower in the strip */
  padding: 8px 12px 2px;
  /* Rectangular with very slight rounding like CNO */
  border-radius: 2px;

  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;

  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.10),
    inset 0 -1px 0 rgba(0,0,0,0.22),
    0 1px 0 rgba(0,0,0,0.22);

  text-shadow: 0 1px 0 rgba(0,0,0,0.18);
  overflow: hidden;
}


/* Assigned/revealed colors (applies to spymaster-view + revealed) */
body.og-mode .game-card.card-red{
  --cardBorder: var(--red-cardBorder);
  --cardBg: var(--red-cardBg);
  --innerBorder: var(--red-innerBorder);
  --innerBg: var(--red-innerBg);
  --wordBg: var(--red-darkWordBg);
}
body.og-mode .game-card.card-blue{
  --cardBorder: var(--blue-cardBorder);
  --cardBg: var(--blue-cardBg);
  --innerBorder: var(--blue-innerBorder);
  --innerBg: var(--blue-innerBg);
  --wordBg: var(--blue-darkWordBg);
}
body.og-mode .game-card.card-neutral{
  --cardBorder: var(--neutral-cardBorder);
  --cardBg: var(--neutral-cardBg);
  --innerBorder: var(--neutral-innerBorder);
  --innerBg: var(--neutral-innerBg);
  --wordBg: var(--neutral-darkWordBg);
}
body.og-mode .game-card.card-assassin{
  --cardBorder: var(--black-cardBorder);
  --cardBg: var(--black-cardBg);
  --innerBorder: var(--black-innerBorder);
  --innerBg: var(--black-innerBg);
  --wordBg: var(--black-darkWordBg);
}

/* Override base spymaster-view / revealed styles which directly set
   background & border-color with higher specificity (0-3-0) than the
   og-mode .game-card rule (0-2-1). These selectors at 0-3-1 restore
   the layered card palette. */
body.og-mode .game-card.spymaster-view,
body.og-mode .game-card.revealed {
  background: var(--cardBg);
  border-color: var(--cardBorder);
}

body.og-mode .game-card.spymaster-view.card-assassin .card-word {
  color: var(--wordColor);
}

body.og-mode .game-card:hover:not(.revealed):not(.disabled){
  transform: translateY(-2px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.36);
  filter: brightness(1.01);
}

body.og-mode .game-card.disabled:not(.spymaster-view){
  opacity: 0.92;
}

/* --- OG Pending Selection --- */
body.og-mode .game-card.pending-select:not(.revealed):not(.disabled){
  border-color: var(--text-suggestion);
  box-shadow: 0 0 0 2px rgba(27,225,198,0.35), 0 4px 14px rgba(0,0,0,0.45);
}

body.og-mode .game-card .card-checkmark{
  background: var(--green-gradient);
  border-radius: 9px;
}

/* --- OG Clue Input --- */
body.og-mode .game-center-area .game-action-bar {
  background: transparent;
  border: none;
  justify-content: center;
  padding: 8px 0;
}

body.og-mode .clue-form-expanded {
  background: #ffffff;
  border-radius: 28px;
  padding: 5px 5px 5px 20px;
  max-width: 460px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  gap: 6px;
}

body.og-mode .clue-input-expanded {
  background: transparent;
  border: none;
  color: #333;
  font-size: 15px;
  font-weight: 600;
  box-shadow: none;
}

body.og-mode .clue-input-expanded:focus {
  box-shadow: none;
  border: none;
  outline: none;
}

body.og-mode .clue-input-expanded::placeholder {
  color: #aaa;
  text-transform: uppercase;
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 1.5px;
}

body.og-mode .clue-num-expanded {
  background: transparent;
  border: none;
  border-left: 2px solid #e0e0e0;
  color: #333;
  width: 48px;
  text-align: center;
  font-weight: 700;
  font-size: 16px;
  box-shadow: none;
}

body.og-mode .clue-num-expanded:focus {
  box-shadow: none;
  border: none;
  border-left: 2px solid #e0e0e0;
  outline: none;
}

/* --- OG Number Minus Button --- */
.og-num-btn {
  display: none;
}

body.og-mode .og-num-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  min-width: 36px;
  border-radius: 50%;
  background: #e0e0e0;
  border: none;
  color: #666;
  font-size: 20px;
  font-weight: 700;
  cursor: pointer;
  transition: background 0.15s;
  line-height: 1;
  flex-shrink: 0;
}

body.og-mode .og-num-btn:hover {
  background: #d0d0d0;
}

body.og-mode .clue-form-expanded .btn.primary {
  background: var(--green-gradient);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  min-width: 40px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 0;
  box-shadow: 0 2px 10px rgba(148, 210, 52, 0.35);
  transition: background 0.15s, transform 0.15s;
}

body.og-mode .clue-form-expanded .btn.primary::after {
  content: '\2192';
  font-size: 20px;
  font-weight: 700;
}

body.og-mode .clue-form-expanded .btn.primary:hover {
  background: #43A047;
  transform: scale(1.05);
}

/* --- OG Clue Display (operatives guessing phase) --- */
body.og-mode .clue-display-expanded {
  background: rgba(255, 255, 255, 0.06);
  padding: 8px 20px;
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

body.og-mode .clue-label {
  color: var(--text-dim);
  text-transform: uppercase;
  font-weight: 700;
  font-size: 11px;
  letter-spacing: 1px;
}

body.og-mode .clue-word-expanded {
  color: #ffffff;
  font-weight: 800;
  font-size: 22px;
}

body.og-mode .clue-number-expanded {
  background: rgba(255, 255, 255, 0.12);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, 0.15);
}

/* --- OG Operative Actions --- */
body.og-mode .operative-actions-expanded .btn {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: #fff;
  border-radius: 20px;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 0.5px;
}

body.og-mode .operative-actions-expanded .btn:hover {
  background: rgba(255, 255, 255, 0.14);
}

/* --- OG Waiting Message --- */
body.og-mode .waiting-expanded {
  color: var(--text-dim);
  font-style: normal;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 1px;
  font-size: 14px;
}

/* --- OG Team Side Panels --- */
.og-team-panel {
  display: none;
  flex-direction: column;
  gap: 10px;
  padding: 16px;
  border-radius: 20px;
  flex: 1;
  min-height: 0;
  overflow: hidden;
  box-shadow: 0 18px 45px rgba(0,0,0,0.45);
  border: 2px solid rgba(255,255,255,0.18);
}

body.og-mode .og-team-panel {
  display: flex;
}

.og-team-blue {
  /* Slightly deeper blues to keep text readable on large screens */
  background:
    radial-gradient(900px 520px at 40% -20%, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.00) 55%),
    linear-gradient(to bottom, rgba(10,108,168,0.92), rgba(35,142,205,0.72));
  border-color: rgba(255,255,255,0.24);
}

.og-team-red {
  /* Slightly deeper reds/oranges to keep text readable on large screens */
  background:
    radial-gradient(900px 520px at 40% -20%, rgba(255,255,255,0.16) 0%, rgba(255,255,255,0.00) 55%),
    linear-gradient(to bottom, rgba(190,58,44,0.90), rgba(214,104,60,0.70));
  border-color: rgba(255,255,255,0.24);
}

/* --- OG Section Headers --- */
.og-section-header {
  font-size: 13px;
  font-weight: 900;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  padding: 4px 0 2px;
  text-align: center;
  color: rgba(255,255,255,0.86);
}

body.og-mode .og-team-blue .og-section-header {
  color: rgba(255,255,255,0.92);
  text-shadow: 0 2px 10px rgba(0,0,0,0.45);
}

.og-team-red .og-section-header,
.og-mobile-red .og-section-header {
  color: rgba(255,255,255,0.92);
  text-shadow: 0 2px 10px rgba(0,0,0,0.45);
}

/* Mobile blue header should also stay readable on the bright gradient */
body.og-mode .og-mobile-blue .og-section-header{
  color: rgba(255,255,255,0.92);
  text-shadow: 0 2px 10px rgba(0,0,0,0.45);
}

/* --- OG Illustration Boxes --- */
.og-illustration {
  width: 100%;
  aspect-ratio: 1.55;
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 8px;
  position: relative;
  overflow: hidden;
}

.og-illustration-blue {
  background: var(--blue-gradient);
  border: 1px solid rgba(0, 142, 224, 0.40);
  box-shadow: inset 0 -30px 40px rgba(0, 0, 0, 0.2);
}

.og-illustration-red {
  background: var(--red-gradient);
  border: 1px solid rgba(255, 82, 65, 0.40);
  box-shadow: inset 0 -30px 40px rgba(0, 0, 0, 0.2);
}

.og-illustration .og-player-slots {
  position: relative;
  z-index: 1;
}

.og-illustration .og-player-slot {
  background: rgba(0, 0, 0, 0.25);
  backdrop-filter: blur(4px);
  font-size: 12px;
  padding: 4px 8px;
}

/* --- OG Player Slots --- */
.og-player-slots {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.og-player-slot {
  font-size: 13px;
  font-weight: 600;
  color: #ffffff;
  padding: 6px 10px;
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.20);
  border: 1px solid rgba(255,255,255,0.10);
}

.og-player-slot.og-empty {
  color: rgba(255,255,255,0.65);
  font-style: italic;
  font-weight: 400;
}

/* --- OG Score Block --- */
.og-score-block {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
}

.og-score-blue {
  flex-direction: row;
}

.og-score-red {
  flex-direction: row;
}

.og-score-number {
  font-size: 56px;
  font-weight: 900;
  line-height: 1;
  font-variant-numeric: tabular-nums;
  paint-order: stroke fill;
}

.og-score-blue .og-score-number {
  color: #d4efff;
  -webkit-text-stroke-width: 4px;
  -webkit-text-stroke-color: rgba(0, 90, 160, 0.8);
  text-shadow: 0 3px 12px rgba(0,0,0,0.5), 0 2px 8px rgba(0,100,180,0.3);
}

.og-score-red .og-score-number {
  color: #ffe0d4;
  -webkit-text-stroke-width: 4px;
  -webkit-text-stroke-color: rgba(180, 50, 30, 0.8);
  text-shadow: 0 3px 12px rgba(0,0,0,0.5), 0 2px 8px rgba(180,50,30,0.3);
}

/* --- OG Score Avatar --- */
.og-score-avatar {
  width: 48px;
  height: 48px;
  border-radius: 10px;
  flex-shrink: 0;
}

.og-score-avatar-blue {
  background: linear-gradient(135deg, #1a3a5c 0%, #3B8BEB 100%);
  border: 2px solid rgba(59, 139, 235, 0.4);
  box-shadow: 0 2px 8px rgba(59, 139, 235, 0.25);
}

.og-score-avatar-red {
  background: linear-gradient(135deg, #4a2020 0%, #C8553A 100%);
  border: 2px solid rgba(200, 85, 58, 0.4);
  box-shadow: 0 2px 8px rgba(200, 85, 58, 0.25);
}

.og-avatar-sm {
  width: 36px;
  height: 36px;
  border-radius: 8px;
}

/* --- OG Game Log in right panel --- */
.og-game-log-section {
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  padding-top: 8px;
  margin-top: auto;
  display: flex;
  flex-direction: column;
  flex: 0 0 auto;
  min-height: 0;
  max-height: 270px;
}

.og-game-log {
  flex: 1;
  max-height: none;
  min-height: 130px;
  max-height: 190px;
  overflow-y: auto;
  font-size: 10px;
  line-height: 1.25;
  color: rgba(255,255,255,0.88);
  padding: 4px 0;
}

/* In OG/Online layout the log is mirrored from the regular log (which uses .log-entry). */
.og-game-log .log-entry,
.og-game-log-mobile .log-entry,
.og-game-log .game-log-entry,
.og-game-log-mobile .game-log-entry {
  font-size: 10px;
  line-height: 1.25;
  min-height: 28px;
  max-height: 28px;
}

/* OG log entries: give each entry its own readable chip */
body.cozy-mode .og-game-log .game-log-entry,
body.og-mode .og-game-log .game-log-entry {
  padding: 6px 8px;
  border-radius: 12px;
  background: rgba(0,0,0,0.18);
  border: 1px solid rgba(255,255,255,0.10);
  margin: 4px 0;
}

/* --- OG Docked Chat (bottom-left) --- */
.og-chat-section {
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  padding-top: 10px;
  margin-top: auto;
  display: flex;
  flex-direction: column;
  flex: 0 0 auto;
  min-height: 0;
  max-height: 285px;
  gap: 6px;
}

#og-chat-host {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 120px;
  max-height: 230px;
}

/* Mount the existing .operative-chat-panel into the OG host */
body.cozy-mode #og-chat-host .operative-chat-panel,
body.og-mode #og-chat-host .operative-chat-panel {
  display: flex !important;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;

  /* Team palette (defaults to blue; JS toggles chat-team-red / chat-team-blue) */
  --chat-accent: var(--game-blue);
  --chat-accent-bg: var(--game-blue-bg);
  --chat-accent-border: var(--game-blue-border);
}

body.cozy-mode #og-chat-host .operative-chat-panel.chat-team-red,
body.og-mode #og-chat-host .operative-chat-panel.chat-team-red {
  --chat-accent: var(--game-red);
  --chat-accent-bg: var(--game-red-bg);
  --chat-accent-border: var(--game-red-border);
}

body.cozy-mode #og-chat-host .operative-chat-panel.chat-team-blue,
body.og-mode #og-chat-host .operative-chat-panel.chat-team-blue {
  --chat-accent: var(--game-blue);
  --chat-accent-bg: var(--game-blue-bg);
  --chat-accent-border: var(--game-blue-border);
}

/* The OG panel already has a big â€œCHATâ€ header â€“ keep the inner title hidden */
body.cozy-mode #og-chat-host .operative-chat-panel .sidebar-panel-title,
body.og-mode #og-chat-host .operative-chat-panel .sidebar-panel-title,
body.cozy-mode #og-chat-host .chat-privacy-badge,
body.og-mode #og-chat-host .chat-privacy-badge {
  display: none;
}

body.cozy-mode #og-chat-host .operative-chat-panel .sidebar-panel-header,
body.og-mode #og-chat-host .operative-chat-panel .sidebar-panel-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 8px;
  padding: 0;
  border: none;
  margin: 0 0 6px;
}

/* Spectator toggle (View Red/Blue Chat) â€“ team-tinted capsule */
body.cozy-mode #og-chat-host #spectator-chat-toggle,
body.og-mode #og-chat-host #spectator-chat-toggle {
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  line-height: 1;
  font-weight: 800;
  letter-spacing: 0.3px;
  white-space: nowrap;
  background: var(--chat-accent-bg);
  border: 1px solid var(--chat-accent-border);
  color: rgba(255,255,255,0.92);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.10),
    0 8px 16px rgba(0,0,0,0.25);
}

body.cozy-mode #og-chat-host #spectator-chat-toggle:hover,
body.og-mode #og-chat-host #spectator-chat-toggle:hover {
  filter: brightness(1.06);
  transform: translateY(-1px);
}

body.cozy-mode #og-chat-host #spectator-chat-toggle:active,
body.og-mode #og-chat-host #spectator-chat-toggle:active {
  transform: translateY(0);
}

/* Messages container â€“ glass panel + subtle team accent strip */
body.cozy-mode #og-chat-host .operative-chat-messages,
body.og-mode #og-chat-host .operative-chat-messages {
  flex: 1;
  min-height: 0;
  position: relative;
  border-radius: 16px;
  padding: 8px;
  border: 1px solid rgba(255,255,255,0.12);
  overflow: auto;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    0 10px 22px rgba(0,0,0,0.35);
}

body.cozy-mode #og-chat-host .operative-chat-messages {
  background: rgba(34, 24, 16, 0.22);
  border-color: rgba(255, 232, 200, 0.18);
}

body.og-mode #og-chat-host .operative-chat-messages {
  background: rgba(13, 22, 32, 0.30);
  border-color: rgba(255, 255, 255, 0.12);
}

body.cozy-mode #og-chat-host .operative-chat-messages::before,
body.og-mode #og-chat-host .operative-chat-messages::before {
  content: '';
  position: sticky;
  top: 0;
  display: block;
  height: 3px;
  margin: 0 4px 8px;
  border-radius: 999px;
  background: var(--chat-accent);
  opacity: 0.65;
  box-shadow: 0 0 14px var(--chat-accent-bg);
  z-index: 2;
}

/* Scrollbar â€“ subtle, like the OG panels */
body.cozy-mode #og-chat-host .operative-chat-messages::-webkit-scrollbar,
body.og-mode #og-chat-host .operative-chat-messages::-webkit-scrollbar {
  width: 8px;
}

body.cozy-mode #og-chat-host .operative-chat-messages::-webkit-scrollbar-track,
body.og-mode #og-chat-host .operative-chat-messages::-webkit-scrollbar-track {
  background: transparent;
}

body.cozy-mode #og-chat-host .operative-chat-messages::-webkit-scrollbar-thumb,
body.og-mode #og-chat-host .operative-chat-messages::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.14);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

body.cozy-mode #og-chat-host .operative-chat-messages::-webkit-scrollbar-thumb {
  background: rgba(255, 232, 200, 0.16);
  background-clip: padding-box;
}

/* Message cards */
body.cozy-mode #og-chat-host .chat-message,
body.og-mode #og-chat-host .chat-message {
  background: rgba(0,0,0,0.18);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  padding: 9px 10px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.06);
}

body.cozy-mode #og-chat-host .chat-message {
  background: rgba(34, 24, 16, 0.20);
  border-color: rgba(255, 232, 200, 0.16);
}

body.og-mode #og-chat-host .chat-message {
  background: rgba(0, 0, 0, 0.16);
  border-color: rgba(255, 255, 255, 0.10);
}

body.cozy-mode #og-chat-host .chat-message.my-message,
body.og-mode #og-chat-host .chat-message.my-message {
  background: linear-gradient(180deg, var(--chat-accent-bg), rgba(0,0,0,0.10));
  border-color: var(--chat-accent-border);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.10),
    0 0 0 1px rgba(255,255,255,0.02);
}

body.cozy-mode #og-chat-host .chat-sender,
body.og-mode #og-chat-host .chat-sender {
  font-size: 11px;
  font-weight: 800;
}

body.cozy-mode #og-chat-host .chat-time,
body.og-mode #og-chat-host .chat-time {
  font-size: 10px;
  color: rgba(255,255,255,0.62);
}

body.cozy-mode #og-chat-host .chat-text,
body.og-mode #og-chat-host .chat-text {
  font-size: 12px;
  line-height: 1.35;
}

/* Composer â€“ single capsule, team-tinted send */
body.cozy-mode #og-chat-host .operative-chat-form,
body.og-mode #og-chat-host .operative-chat-form {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  padding: 8px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    0 10px 20px rgba(0,0,0,0.30);
}

body.cozy-mode #og-chat-host .operative-chat-form {
  background: rgba(34, 24, 16, 0.20);
  border-color: rgba(255, 232, 200, 0.18);
}

body.og-mode #og-chat-host .operative-chat-form {
  background: rgba(13, 22, 32, 0.30);
  border-color: rgba(255, 255, 255, 0.12);
}

body.cozy-mode #og-chat-host .operative-chat-form .chat-input,
body.og-mode #og-chat-host .operative-chat-form .chat-input {
  background: transparent;
  border: none;
  padding: 10px 10px;
  color: rgba(255,255,255,0.95);
  font-size: 12px;
  font-weight: 700;
}

body.cozy-mode #og-chat-host .operative-chat-form .chat-input::placeholder,
body.og-mode #og-chat-host .operative-chat-form .chat-input::placeholder {
  color: rgba(255,255,255,0.55);
}

body.cozy-mode #og-chat-host .operative-chat-form .chat-input:focus,
body.cozy-mode #og-chat-host .operative-chat-form .chat-input:focus-visible,
body.og-mode #og-chat-host .operative-chat-form .chat-input:focus,
body.og-mode #og-chat-host .operative-chat-form .chat-input:focus-visible {
  outline: none;
}

body.cozy-mode #og-chat-host .chat-send-btn,
body.og-mode #og-chat-host .chat-send-btn {
  width: 40px;
  height: 40px;
  border-radius: 14px;
  background: var(--chat-accent);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.12),
    0 10px 16px rgba(0,0,0,0.25);
}

body.cozy-mode #og-chat-host .chat-send-btn:hover,
body.og-mode #og-chat-host .chat-send-btn:hover {
  filter: brightness(1.06);
  transform: translateY(-1px);
}

body.cozy-mode #og-chat-host .chat-send-btn:active,
body.og-mode #og-chat-host .chat-send-btn:active {
  transform: translateY(0);
}

/* Disabled (spectator / locked team chat) */
body.cozy-mode #og-chat-host .operative-chat-form .chat-input:disabled,
body.og-mode #og-chat-host .operative-chat-form .chat-input:disabled {
  color: rgba(255,255,255,0.70);
}

body.cozy-mode #og-chat-host .chat-send-btn:disabled,
body.og-mode #og-chat-host .chat-send-btn:disabled {
  background: rgba(255,255,255,0.08);
  border-color: rgba(255,255,255,0.12);
  opacity: 0.75;
  transform: none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.06);
}


/* --- OG Tag Legend --- */
body.og-mode .card-tag-legend {
  background: rgba(27, 40, 56, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
}

/* --- OG Role Selection --- */
body.og-mode .role-selection-compact {
  background: rgba(27, 40, 56, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 14px;
}

body.og-mode .role-btn-compact {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
}

body.og-mode .role-btn-compact:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
}

/* --- OG Sidebar Panel Header (for game log) --- */
body.og-mode .og-game-log .game-log-entry,
body.cozy-mode .og-game-log .game-log-entry {
  padding: 8px 10px;
  margin: 6px 0;
  border-bottom: none;
  border-radius: 12px;
  background: rgba(0,0,0,0.18);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.08);
}

/* --- OG Mobile Panels --- */
.og-mobile-panels {
  display: none;
}

.og-mobile-score-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0;
}

.og-score-number-sm {
  font-size: 32px;
}

.og-player-slots-sm .og-player-slot {
  font-size: 11px;
  padding: 3px 6px;
}

.og-game-log-mobile {
  max-height: 120px;
}

/* --- OG Mobile Overrides --- */
@media (max-width: 768px) {
  /* Make OG/Online game log extra compact on mobile. */
  body.og-mode #mobile-game-actions { display: none !important; }

  .og-game-log .log-entry,
  .og-game-log-mobile .log-entry,
  .og-game-log .game-log-entry,
  .og-game-log-mobile .game-log-entry {
    font-size: 9px;
    line-height: 1.2;
    min-height: 24px;
    max-height: 24px;
  }

  /* Hide desktop side panels on mobile */
  body.og-mode .og-team-panel {
    display: none !important;
  }

  /* Show mobile panels at top */
  body.og-mode .og-mobile-panels {
    display: flex;
    gap: 4px;
    padding: 4px 6px;
    flex-shrink: 0;
  }

  .og-mobile-team {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 3px;
    padding: 5px;
    border-radius: 12px;
    min-width: 0;
    box-shadow: 0 8px 18px rgba(0,0,0,0.35);
  }

  .og-mobile-blue {
    background:
      linear-gradient(to bottom, rgba(0,142,224,0.88), rgba(52,160,240,0.65));
    border: 2px solid rgba(255,255,255,0.24);
  }

  .og-mobile-red {
    background:
      linear-gradient(to bottom, rgba(255,82,65,0.86), rgba(255,120,55,0.62));
    border: 2px solid rgba(255,255,255,0.24);
  }

  .og-mobile-red .og-section-header {
    color: rgba(255, 82, 65, 0.88);
  }

  .og-mobile-log {
    flex: 0.7;
    display: flex;
    flex-direction: column;
    gap: 3px;
    padding: 5px;
    border-radius: 12px;
    background: rgba(0, 0, 0, 0.35);
    border: 2px solid rgba(255,255,255,0.18);
    min-width: 0;
    overflow: hidden;
    box-shadow: 0 8px 18px rgba(0,0,0,0.35);
  }

  .og-illustration-sm {
    aspect-ratio: 1.4;
    border-radius: 6px;
    padding: 3px;
  }

  /* Show standard game header on mobile for timer/scores (hidden behind mobile panels) */
  body.og-mode .game-header-expanded {
    display: none;
  }

  body.og-mode .og-phase-banner {
    padding: 4px 0 2px;
  }

  body.og-mode .og-phase-text {
    font-size: 11px;
    letter-spacing: 0.8px;
  }

  body.og-mode .clue-form-expanded {
    max-width: 100%;
    border-radius: 22px;
    padding: 4px 4px 4px 14px;
  }

  body.og-mode .game-board {
    gap: 3px;
  }

  body.og-mode .game-card{
    --labelInsetX: 6px;
    --labelInsetY: 6px;
    --labelHeight: 36%;
    aspect-ratio: 1.35;
  }

  body.og-mode .game-card::before {
    inset: 3px;
    border-radius: 4px;
    border-width: 1px;
  }

  body.og-mode .game-card::after {
    left: 3px;
    right: 3px;
  }

  body.og-mode .game-card .card-word {
    font-size: clamp(7px, 2.2vw, 12px);
    padding: 2px 4px 1px;
    border-radius: 2px;
  }

  body.og-mode .og-topbar {
    padding: 4px 8px;
  }

  body.og-mode .og-topbar-btn {
    font-size: 11px;
    padding: 4px 8px;
  }

  /* OG mobile score & section overrides */
  body.og-mode .og-score-number-sm {
    font-size: 20px;
    -webkit-text-stroke-width: 2px;
  }

  body.og-mode .og-section-header {
    font-size: 8px;
    letter-spacing: 0.8px;
    padding: 2px 0 1px;
  }

  body.og-mode .og-avatar-sm {
    width: 24px;
    height: 24px;
    border-radius: 6px;
  }

  body.og-mode .og-mobile-score-row {
    gap: 4px;
    padding: 2px 0;
  }

  body.og-mode .og-player-slots-sm .og-player-slot {
    font-size: 9px;
    padding: 2px 4px;
  }
}

body.og-mode .app{ position: relative; z-index: 1; }

/* --- OG Game-End Overlay --- */
body.og-mode .game-end-overlay {
  background: rgba(0, 0, 0, 0.55);
}

body.og-mode .game-end-card {
  background: rgba(0, 0, 0, 0.70);
  border: 2px solid rgba(255,255,255,0.15);
  border-radius: 18px;
  max-width: 440px;
  padding: 36px 40px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.60);
}

body.og-mode .game-end-title {
  font-size: 34px;
  text-transform: uppercase;
  letter-spacing: 2.5px;
  font-weight: 900;
}

body.og-mode .game-end-title.win {
  color: #ffffff;
  text-shadow: 0 4px 18px rgba(0,0,0,0.55);
}

body.og-mode .game-end-title.lose {
  color: #ff6b5a;
  text-shadow: 0 4px 18px rgba(0,0,0,0.55);
}

body.og-mode .game-end-subtitle {
  color: rgba(255,255,255,0.75);
  font-size: 17px;
}

body.og-mode .game-end-actions .btn.primary {
  background: var(--green-gradient);
  border: none;
  border-radius: 28px;
  padding: 14px 36px;
  font-size: 15px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #fff;
  box-shadow: 0 4px 16px rgba(148, 210, 52, 0.30);
}

body.og-mode .game-end-actions .btn.primary:hover {
  filter: brightness(1.08);
}

body.og-mode .game-end-actions .btn:not(.primary) {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.18);
  color: #fff;
  border-radius: 28px;
  padding: 12px 28px;
  font-size: 14px;
  font-weight: 600;
}


/* ==============================================
   CODENAMES STYLES â€” GLOBAL UI HARMONY
   Make Cozy / Codenames Online modes affect the full UI,
   not just the game board.
============================================== */

/* Shared â€œCodenamesâ€ feel: rounder, slightly bolder, softer glow */
body.cozy-mode .modal-content,
body.og-mode .modal-content{
  border-radius: 26px;
  overflow: hidden;
}

body.cozy-mode .modal-content{
  background:
    radial-gradient(900px 360px at 20% -18%, rgba(59,139,235,0.18) 0%, rgba(59,139,235,0.00) 60%),
    radial-gradient(900px 360px at 80% -18%, rgba(200,85,58,0.14) 0%, rgba(200,85,58,0.00) 60%),
    linear-gradient(180deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.03) 100%);
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: var(--shadow-lg);
}

body.og-mode .modal-content{
  background:
    radial-gradient(900px 420px at 22% -20%, rgba(0,142,224,0.18) 0%, rgba(0,142,224,0.00) 62%),
    radial-gradient(900px 420px at 78% -20%, rgba(255,82,65,0.16) 0%, rgba(255,82,65,0.00) 62%),
    linear-gradient(180deg, rgba(0,0,0,0.36) 0%, rgba(0,0,0,0.18) 100%);
  border: 2px solid rgba(255,255,255,0.24);
  box-shadow: 0 20px 60px rgba(0,0,0,0.58);
}

/* Buttons */
body.cozy-mode .btn{
  border-radius: 16px;
  font-weight: 800;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.10) 0%, rgba(0,0,0,0.18) 100%);
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 8px 18px rgba(0,0,0,0.28);
}

body.cozy-mode .btn:hover{
  filter: brightness(1.06);
}

body.cozy-mode .btn.primary{
  background:
    linear-gradient(180deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.00) 32%),
    linear-gradient(180deg, color-mix(in srgb, var(--accent) 88%, #ffffff 12%) 0%, var(--accent) 100%);
  border-color: rgba(255,255,255,0.20);
}

body.og-mode .btn{
  border-radius: 999px;
  font-weight: 900;
  letter-spacing: 0.2px;
  background: rgba(0,0,0,0.10);
  border: 2px solid rgba(255,255,255,0.70);
  backdrop-filter: blur(6px);
  box-shadow: 0 10px 26px rgba(0,0,0,0.40);
}

body.og-mode .btn:hover{
  background: rgba(255,255,255,0.14);
}

body.og-mode .btn.primary{
  background: var(--green-gradient);
  border-color: rgba(255,255,255,0.0);
}

body.og-mode .btn.danger{
  background: var(--red-gradient);
  border-color: rgba(255,255,255,0.0);
}

/* Inputs / dropdowns */
body.cozy-mode .input,
body.cozy-mode .settings-dropdown-trigger{
  border-radius: 16px;
  background: rgba(0,0,0,0.16);
  border-color: rgba(255,255,255,0.14);
}

body.og-mode .input,
body.og-mode .settings-dropdown-trigger{
  border-radius: 999px;
  background: rgba(0,0,0,0.10);
  border: 2px solid rgba(255,255,255,0.70);
  backdrop-filter: blur(6px);
}

body.og-mode .settings-dropdown[aria-open="true"] .settings-dropdown-trigger{
  box-shadow: 0 0 0 4px rgba(0,142,224,0.25);
}

body.og-mode .settings-dropdown-menu{
  border-radius: 18px;
  border: 2px solid rgba(255,255,255,0.22);
  background: rgba(0,0,0,0.38);
  backdrop-filter: blur(10px);
}

body.og-mode .settings-dropdown-option:hover{
  background: rgba(255,255,255,0.16);
}

body.cozy-mode .settings-dropdown-menu{
  border-radius: 18px;
  background: rgba(0,0,0,0.30);
  border: 1px solid rgba(255,255,255,0.14);
}

/* Settings row spacing: make controls feel less "stretched" */
body.cozy-mode .settings-row,
body.og-mode .settings-row{
  border-radius: 18px;
}

/* Slider knob pop for Codenames modes */
body.cozy-mode input[type="range"]::-webkit-slider-thumb,
body.og-mode input[type="range"]::-webkit-slider-thumb{
  box-shadow: 0 8px 18px rgba(0,0,0,0.35);
}

/* Panels/cards across the app (lobby, dialogs, side panels) */
body.cozy-mode .panel,
body.cozy-mode .manage-card,
body.cozy-mode .modal,
body.cozy-mode .toast,
body.cozy-mode .game-panel,
body.cozy-mode .panel-box{
  background: rgba(0,0,0,0.18);
  border-color: rgba(255,255,255,0.14);
}

body.og-mode .panel,
body.og-mode .manage-card,
body.og-mode .modal,
body.og-mode .toast,
body.og-mode .game-panel,
body.og-mode .panel-box{
  background: rgba(0,0,0,0.22);
  border-color: rgba(255,255,255,0.22);
  backdrop-filter: blur(8px);
}



/* =========================================================
   PRETTY THEME v2 (general UI uplift)
   - Softer surfaces, better spacing, consistent shadows
   - Stronger hover/focus affordances
   - Minimal structural change (CSS-only)
   ========================================================= */

:root{
  --radius-sm: 10px;
  --radius-md: 14px;
  --radius-lg: 18px;
  --radius-xl: 22px;

  --border-soft2: rgba(255,255,255,0.12);
  --border-soft3: rgba(255,255,255,0.16);

  --shadow-1: 0 10px 26px rgba(0,0,0,0.22);
  --shadow-2: 0 16px 46px rgba(0,0,0,0.30);
  --shadow-3: 0 22px 68px rgba(0,0,0,0.38);

  --focus-ring-strong: 0 0 0 3px rgba(79, 140, 255, 0.35);
}

/* Background depth (subtle, performant) */
body{
  background-color: var(--bg);
  background-image:
    radial-gradient(1100px 620px at 15% 0%, rgba(79,140,255,0.18), rgba(79,140,255,0) 60%),
    radial-gradient(900px 520px at 85% 10%, rgba(34,197,94,0.10), rgba(34,197,94,0) 62%),
    linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.18));
  background-attachment: fixed;
}

body.light-mode{
  background-image:
    radial-gradient(1000px 620px at 15% 0%, rgba(45,125,210,0.18), rgba(45,125,210,0) 60%),
    radial-gradient(900px 520px at 85% 10%, rgba(26,154,72,0.10), rgba(26,154,72,0) 62%),
    linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.0));
}

/* Panels / cards */
.panel,
.manage-card,
.modal-card,
.confirm-dialog-card,
.game-panel,
.panel-box,
.toast{
  border-radius: var(--radius-lg) !important;
  border-color: var(--border-soft2) !important;
  background: color-mix(in srgb, var(--card) 70%, var(--surface) 30%) !important;
  box-shadow: var(--shadow-1);
}

body.light-mode .panel,
body.light-mode .manage-card,
body.light-mode .modal-card,
body.light-mode .confirm-dialog-card,
body.light-mode .game-panel,
body.light-mode .panel-box,
body.light-mode .toast{
  border-color: rgba(20,30,45,0.14) !important;
  box-shadow: 0 14px 34px rgba(30,55,85,0.12);
}

/* Buttons */
.btn{
  border-radius: var(--radius-md);
  border-color: var(--border-soft3);
  background: linear-gradient(180deg, color-mix(in srgb, var(--surface2) 80%, #ffffff 20%), var(--surface2));
  box-shadow: 0 10px 24px rgba(0,0,0,0.16);
  transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease, filter 0.12s ease;
}
.btn:hover:not(:disabled){
  transform: translateY(-1px);
  box-shadow: var(--shadow-1);
  border-color: color-mix(in srgb, var(--accent) 45%, var(--border) 55%);
}
.btn:active:not(:disabled){
  transform: translateY(0px);
  filter: brightness(0.98);
}
.btn:focus-visible{
  outline: none;
  box-shadow: var(--shadow-1), var(--focus-ring-strong);
}

.btn.primary{
  background: linear-gradient(180deg, color-mix(in srgb, var(--accent) 88%, #ffffff 12%), var(--accent));
  border-color: color-mix(in srgb, var(--accent) 55%, #000000 45%);
  box-shadow: 0 14px 34px rgba(59,130,246,0.24);
}
.btn.primary:hover:not(:disabled){
  box-shadow: 0 18px 46px rgba(59,130,246,0.28);
}

/* Inputs */
.input,
.settings-dropdown-trigger,
select,
textarea{
  border-radius: var(--radius-md) !important;
  border-color: var(--border-soft2) !important;
  background: color-mix(in srgb, var(--surface) 86%, #ffffff 14%) !important;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.18);
  transition: box-shadow 0.12s ease, border-color 0.12s ease, transform 0.12s ease;
}
.input:focus,
.settings-dropdown-trigger:focus{
  outline: none;
  border-color: color-mix(in srgb, var(--accent) 55%, var(--border) 45%) !important;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.14), var(--focus-ring-strong);
}

/* Game board spacing */
.game-board{
  gap: 10px;
}
@media (max-width: 560px){
  .game-board{ gap: 4px; }
}

@media (max-width: 768px){
  .game-card .card-word{
    font-size: 10px;
    letter-spacing: 0.02em;
  }
  .game-card .card-face{
    padding: 4px;
  }
}

/* Game cards (clean + tactile) */
.game-card{
  border-radius: var(--radius-md);
  border-width: 1px;
  border-color: var(--border-soft2);
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--surface) 82%, #ffffff 18%),
    color-mix(in srgb, var(--surface) 92%, #000000 8%));
  box-shadow: 0 10px 26px rgba(0,0,0,0.22);
}
.game-card .card-face{
  padding: 8px;
}
.game-card:hover:not(.revealed):not(.disabled){
  transform: translateY(-2px);
  box-shadow: var(--shadow-2);
}
.game-card.pending-select:not(.revealed):not(.disabled){
  box-shadow: var(--shadow-1), 0 0 0 2px rgba(79,140,255,0.22);
}

.game-card .card-word{
  font-family: 'Russo One', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
  font-weight: 700;
  font-size: 13px;
  letter-spacing: 0.045em;
  line-height: 1.1;
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;
  white-space: nowrap;
  overflow: hidden;
}

/* Inner text wrapper lets us scale/shrink long words without affecting the label box */
.game-card .card-word .word-text{
  display: inline-block;
  max-width: 100%;
  will-change: transform;
}

/* Revealed cards: keep them rich but not harsh */
.game-card.revealed.card-red{ box-shadow: 0 16px 46px rgba(201,60,43,0.18); }
.game-card.revealed.card-blue{ box-shadow: 0 16px 46px rgba(26,127,181,0.18); }
.game-card.revealed.card-neutral{ box-shadow: 0 16px 46px rgba(138,126,110,0.14); }
.game-card.revealed.card-assassin{ box-shadow: 0 18px 54px rgba(0,0,0,0.40); }

/* Small typography cleanup */
.label{ letter-spacing: 0.10em; text-transform: uppercase; }
.hint{ opacity: 0.95; }

/* Reduce harsh dividers in logs */
.log-entry{
  border-color: rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.04);
}
body.light-mode .log-entry{
  border-color: rgba(20,30,45,0.10);
  background: rgba(20,30,45,0.04);
}

/* =========================
   Cozy Game Log (screenshot-inspired)
========================= */
body.og-mode .gamelog-shell {
  background: linear-gradient(180deg, rgba(88, 88, 88, 0.92) 0%, rgba(55, 55, 55, 0.92) 100%);
  border: 6px solid rgba(255, 255, 255, 0.16);
  border-radius: 24px;
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.45);
}

/* Override the default sidebar-panel chrome when using the cozy game log shell */
body.og-mode .sidebar-panel.gamelog-shell {
  background: linear-gradient(180deg, rgba(88, 88, 88, 0.92) 0%, rgba(55, 55, 55, 0.92) 100%);
  border: 6px solid rgba(255, 255, 255, 0.16);
}

body.og-mode .gamelog-header {
  position: relative;
  padding: 10px 14px 6px;
  display: flex;
  align-items: center;
  justify-content: center;
}

body.og-mode .gamelog-title {
  font-size: 13px;
  font-weight: 900;
  letter-spacing: 1.6px;
  color: rgba(255, 255, 255, 0.55);
  text-transform: uppercase;
}

body.og-mode .gamelog-chevron {
  position: absolute;
  right: 10px;
  top: 9px;
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: rgba(255, 255, 255, 0.55);
  opacity: 0.95;
}

body.og-mode .gamelog-chevron svg {
  width: 18px;
  height: 18px;
}

/*
  Game log chevron sizing (all modes)
  ---------------------------------
  The chevron SVG has browser-default dimensions (often 300x150) unless
  explicitly sized. In non-OG layouts this can balloon and cover the log.
*/
.gamelog-header {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.gamelog-chevron {
  position: absolute;
  right: 10px;
  top: 9px;
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.gamelog-chevron svg {
  width: 18px;
  height: 18px;
}

/* Replace the default sidebar header inside the gamelog shell */
body.og-mode .gamelog-shell .sidebar-panel-header { display: none; }

body.og-mode .gamelog-entries {
  flex: 1;
  overflow-y: auto;
  padding: 8px 14px 14px;
  display: flex;
  flex-direction: column;
  gap: 18px;
}

body.og-mode .gamelog-turn {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

body.og-mode .gamelog-clue-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

body.og-mode .gamelog-avatar-wrap {
  width: 56px;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

body.og-mode .gamelog-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 900;
  background: linear-gradient(145deg, #e8d5b8 0%, #c9a87c 100%);
  color: rgba(50, 30, 10, 0.9);
  border: 3px solid rgba(255, 255, 255, 0.95);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  overflow: hidden;
}

body.og-mode .gamelog-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

body.og-mode .gamelog-avatar-name {
  font-size: 8px;
  font-weight: 800;
  letter-spacing: 0.2px;
  padding: 2px 6px;
  border-radius: 6px;
  color: rgba(255, 255, 255, 0.95);
  text-transform: none;
  max-width: 56px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1.3;
}

body.og-mode .gamelog-avatar-wrap.team-red .gamelog-avatar-name { background: #8f3625; }
body.og-mode .gamelog-avatar-wrap.team-blue .gamelog-avatar-name { background: #1e4e86; }

body.og-mode .gamelog-clue-pill {
  position: relative;
  flex: 1;
  min-width: 0;
  border-radius: 10px;
  padding: 10px 40px 10px 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
  overflow: hidden;
}

body.og-mode .gamelog-clue-pill.team-red {
  border: 3px solid #C8553A;
  /* Full team color (match Codenames Online vibe) */
  background: #c8553a;
}
body.og-mode .gamelog-clue-pill.team-blue {
  border: 3px solid #3B8BEB;
  /* Full team color (match Codenames Online vibe) */
  background: #3b8beb;
}

/* Ensure clue text stays readable on the fully-colored pill */
body.og-mode .gamelog-clue-pill.team-red .gamelog-clue-word,
body.og-mode .gamelog-clue-pill.team-blue .gamelog-clue-word {
  color: rgba(255, 255, 255, 0.95);
  text-shadow: 0 2px 6px rgba(0, 0, 0, 0.35);
}

body.og-mode .gamelog-clue-word {
  position: relative;
  z-index: 1;
  font-size: 17px;
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: rgba(10, 10, 10, 0.92);
  text-align: center;
  line-height: 1.1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

body.og-mode .gamelog-clue-count {
  position: absolute;
  right: 7px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 1;
  width: 26px;
  height: 26px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 900;
  color: rgba(20, 20, 20, 0.9);
  background: #fff;
  border: 2px solid rgba(0, 0, 0, 0.06);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

body.og-mode .gamelog-guesses {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding-left: 4px;
  margin-top: 2px;
}

body.og-mode .gamelog-guess-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

body.og-mode .gamelog-avatar-wrap.small {
  width: 44px;
}

body.og-mode .gamelog-avatar-wrap.small .gamelog-avatar {
  width: 32px;
  height: 32px;
  font-size: 12px;
  border-width: 2px;
}

body.og-mode .gamelog-avatar-wrap.small .gamelog-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

body.og-mode .gamelog-avatar-wrap.small .gamelog-avatar-name {
  font-size: 6.5px;
  padding: 1px 5px;
}

body.og-mode .gamelog-word-pill {
  min-width: 50px;
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
  line-height: 1;
  text-align: center;
}

body.og-mode .gamelog-word-pill.type-red { background: #C8553A; color: #ffffff; }
body.og-mode .gamelog-word-pill.type-blue { background: #3B8BEB; color: #ffffff; }
body.og-mode .gamelog-word-pill.type-neutral { background: #D4C5A9; color: #2c2416; }
body.og-mode .gamelog-word-pill.type-assassin { background: #3A3A3A; color: #ffffff; }

body.og-mode .gamelog-system {
  font-size: 9px;
  line-height: 1.3;
  color: rgba(255, 255, 255, 0.75);
  padding: 4px 7px;
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.18);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

/* Slightly tighter on mobile */
@media (max-width: 768px) {
  body.og-mode .gamelog-title { font-size: 11px; }
  body.og-mode .gamelog-entries { padding: 5px 8px 8px; gap: 10px; }
  body.og-mode .gamelog-clue-word { font-size: 14px; }
  body.og-mode .gamelog-word-pill { font-size: 9px; padding: 6px 8px; }
  body.og-mode .gamelog-avatar { width: 40px; height: 40px; font-size: 15px; }
  body.og-mode .gamelog-avatar-wrap.small .gamelog-avatar { width: 26px; height: 26px; font-size: 10px; }
  body.og-mode .gamelog-clue-pill { padding: 8px 34px 8px 8px; }
  body.og-mode .gamelog-clue-count { width: 22px; height: 22px; font-size: 11px; }
}


/* --- Codenames Online roster blocks (Operatives / Spymasters) --- */
body.og-mode .og-team-panel {
  /* Let the roster blocks carry the card styling (not the whole panel) */
  padding: 0;
  border: none;
  box-shadow: none;
  background: transparent;
  gap: 14px;
  overflow: visible;
}

/* Prevent the old team-panel gradients from showing behind the new blocks */
body.og-mode .og-team-panel.og-team-blue,
body.og-mode .og-team-panel.og-team-red {
  background: transparent;
  border-color: transparent;
}

.online-roster-block {
  position: relative;
  overflow: hidden;
  border-radius: 28px;
  padding: 14px 16px 16px;

  /* Thick light border + soft drop shadow like codenames.online */
  border: 4px solid rgba(255,255,255,0.55);
  box-shadow: 0 18px 45px rgba(0,0,0,0.45);

  /* Defaults (overridden per team below) */
  --obg-top: rgba(120,120,120,0.85);
  --obg-bot: rgba(120,120,120,0.55);
  --oinner: rgba(255,255,255,0.18);
  --oshade: rgba(0,0,0,0.18);

  background:
    radial-gradient(900px 520px at 40% -20%, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.00) 55%),
    linear-gradient(to bottom, var(--obg-top), var(--obg-bot));
}

/* Inner stroke + inset shading */
.online-roster-block::after {
  content: "";
  position: absolute;
  inset: 6px;
  border-radius: 22px;
  border: 2px solid var(--oinner);
  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,0.10),
    inset 0 -26px 40px var(--oshade);
  pointer-events: none;
}

/* Optional faded character art (set via CSS var: --online-art: url(...)) */
.online-roster-block::before {
  content: "";
  position: absolute;
  right: -18px;
  top: -18px;
  width: 240px;
  height: 240px;
  background-image: var(--online-art);
  background-size: cover;
  background-position: center;
  opacity: 0.18;
  filter: saturate(0.9) contrast(1.05);
  pointer-events: none;
}

.online-roster-title {
  position: relative;
  z-index: 1;
  font-family: 'Russo One', 'Bebas Neue', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: 30px;
  letter-spacing: 1.6px;
  text-transform: uppercase;
  text-align: center;
  color: rgba(255,255,255,0.82);
  text-shadow: 0 2px 0 rgba(0,0,0,0.16);
  margin: 2px 0 10px;
}

.online-roster-surface {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* Give the Operatives block that big empty â€œstageâ€ feel when no players */
.online-roster-operatives .online-roster-surface {
  min-height: 150px;
  justify-content: flex-end;
}

/* Team-specific gradients */
.og-team-blue .online-roster-block {
  --obg-top: rgba(10,108,168,0.92);
  --obg-bot: rgba(35,142,205,0.70);
  --oinner: rgba(255,255,255,0.18);
  --oshade: rgba(0,0,0,0.16);
}

.og-team-red .online-roster-block {
  --obg-top: rgba(190,58,44,0.90);
  --obg-bot: rgba(214,104,60,0.70);
  --oinner: rgba(255,255,255,0.18);
  --oshade: rgba(0,0,0,0.18);
}

/* ==================== MOBILE COMPACT OVERRIDES ==================== */
/* Tighten everything for phone screens so the board and panels fit */

@media (max-width: 768px) {
  /* --- Online Roster Blocks (og-mode team panels on mobile sidebar) --- */
  .online-roster-block {
    border-radius: 16px;
    padding: 8px 10px 10px;
    border-width: 2px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.35);
  }

  .online-roster-block::after {
    inset: 3px;
    border-radius: 12px;
    border-width: 1px;
  }

  .online-roster-block::before {
    width: 140px;
    height: 140px;
    right: -10px;
    top: -10px;
  }

  .online-roster-title {
    font-size: 18px;
    letter-spacing: 1px;
    margin: 1px 0 6px;
  }

  .online-roster-operatives .online-roster-surface {
    min-height: 80px;
  }

  .online-roster-surface {
    gap: 4px;
  }

  /* --- General game board mobile tightening --- */
  .game-center-area .game-board {
    gap: 4px;
  }

  .game-center-area .game-card {
    padding: 3px 4px;
    border-radius: 6px;
    border-width: 1px;
  }

  .game-center-area .game-card .card-word {
    font-size: clamp(7px, 2.2vw, 11px);
    letter-spacing: 0.2px;
    line-height: 1.1;
  }

  /* --- Expanded container mobile tightening --- */
  .game-container-expanded {
    padding: 6px 8px;
    gap: 4px;
  }

  /* --- Mobile panels row --- */
  body.cozy-mode .og-mobile-panels,
  body.og-mode .og-mobile-panels {
    gap: 4px;
    padding: 4px 6px;
  }

  /* --- Game board wrapper --- */
  .game-board-wrapper {
    padding: 1px;
  }

  /* --- Clue display bar --- */
  .game-action-bar {
    padding: 6px 8px;
    gap: 6px;
    border-radius: 8px;
  }

  .clue-word-compact {
    font-size: 13px;
  }
}

/* Extra small phones */
@media (max-width: 420px) {
  .og-score-number-sm {
    font-size: 16px;
  }

  body.og-mode .og-score-number-sm {
    font-size: 16px;
    -webkit-text-stroke-width: 1.5px;
  }

  .og-illustration-sm {
    aspect-ratio: 1.2;
  }

  .og-section-header {
    font-size: 7px;
  }

  body.og-mode .og-section-header {
    font-size: 7px;
  }

  body.cozy-mode .game-card .card-word,
  body.og-mode .game-card .card-word {
    font-size: clamp(6px, 2vw, 10px);
  }

  .game-center-area .game-card .card-word {
    font-size: clamp(6px, 2vw, 10px);
  }

  .game-center-area .game-board,
  body.cozy-mode .game-board,
  body.og-mode .game-board {
    gap: 2px;
  }

  body.cozy-mode .game-card,
  body.og-mode .game-card {
    border-radius: 5px;
  }

  .online-roster-title {
    font-size: 14px;
  }

  .online-roster-block {
    padding: 6px 8px 8px;
    border-radius: 12px;
  }

  .online-roster-operatives .online-roster-surface {
    min-height: 60px;
  }

  body.og-mode .og-phase-text,
  body.cozy-mode .og-phase-text {
    font-size: 10px;
    letter-spacing: 0.5px;
  }
}


/* =========================================================
   GAME LOG READABILITY (DESKTOP)
   - Removes the accidental ultra-compact overrides.
   - Keeps the Codenames Online-style structured log readable.
========================================================= */

@media (min-width: 769px) {
  /* Default + sidebar + popover log entries */
  .log-entry,
  .game-log-panel .log-entry,
  .game-log-popover .log-entry {
    font-size: 12px;
    line-height: 1.35;
  }

  /* OG score "rail" looked like a broken pill next to the cards-left number */
  body.og-mode .og-score-avatar {
    display: none;
  }

  /* OG docked chat: remove the "Operatives Only" badge text and match the panel aesthetic */
  body.og-mode #og-chat-host .chat-privacy-badge {
    display: none;
  }

  body.og-mode #og-chat-host .operative-chat-messages {
    padding: 6px;
    border-radius: 16px;
  }

  body.og-mode #og-chat-host .chat-text {
    font-size: 12px;
    line-height: 1.32;
  }

  body.og-mode #og-chat-host .chat-message {
    border-radius: 12px;
  }

  body.og-mode #og-chat-host .operative-chat-form {
    border-radius: 16px;
  }
}

/* OG structured log: keep the clue *in the same pill* as the avatar, but at normal readable sizes */
body.og-mode .gamelog-clue-pill.clue-with-avatar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 10px;
}

body.og-mode .gamelog-clue-pill.clue-with-avatar .gamelog-avatar {
  flex: 0 0 auto;
  width: 36px;
  height: 36px;
  font-size: 14px;
  border-radius: 50%;
}

body.og-mode .gamelog-clue-pill.clue-with-avatar .gamelog-clue-word {
  flex: 1 1 auto;
  min-width: 0;
  text-align: center;
  padding: 0 4px;
}

body.og-mode .gamelog-clue-pill.clue-with-avatar .gamelog-clue-count {
  position: static;
  transform: none;
  right: auto;
  top: auto;
  margin-left: 2px;
}


/* ==================== OG DESKTOP PANELS MATCH MOBILE STYLE ==================== */
@media (min-width: 769px) {
  /* Make the OG team panel feel like the mobile Codenames Online panels */
  body.og-mode .og-team-panel {
    display: flex;
    flex-direction: column;
    gap: 14px;
    padding: 0;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    min-width: 0;
  }

  /* Reuse the mobile box-art on desktop roster blocks */
  body.og-mode .og-team-panel .online-roster-block {
    position: relative;
    overflow: hidden;
  }

  body.og-mode .og-team-panel .online-roster-block::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 1;
    background-repeat: no-repeat;
    background-position: left bottom;
    background-size: 92% auto;
    filter: drop-shadow(0 14px 18px rgba(0,0,0,0.25));
    opacity: 0.28;
    pointer-events: none;
  }

  body.og-mode .og-team-blue .online-roster-block::before {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20220%20140%27%3E%0A%3Cg%20opacity%3D%270.28%27%20fill%3D%27%23ffffff%27%3E%0A%3Cpath%20d%3D%27M78%20108c14-9%2030-13%2047-13%2018%200%2034%204%2048%2013%2010%207%2017%2016%2020%2028H58c3-12%2010-21%2020-28z%27/%3E%0A%3Ccircle%20cx%3D%27118%27%20cy%3D%2754%27%20r%3D%2730%27/%3E%0A%3Cpath%20d%3D%27M98%2053c6%208%2012%2012%2020%2012%209%200%2016-4%2022-12%202-3%205-4%209-3-4%2015-15%2024-31%2024-15%200-27-9-31-24%204-1%207%200%2011%203z%27/%3E%0A%3C/g%3E%0A%3C/svg%3E");
  }

  body.og-mode .og-team-red .online-roster-block::before {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20220%20140%27%3E%0A%3Cg%20opacity%3D%270.28%27%20fill%3D%27%23ffffff%27%3E%0A%3Cpath%20d%3D%27M78%20108c14-9%2030-13%2047-13%2018%200%2034%204%2048%2013%2010%207%2017%2016%2020%2028H58c3-12%2010-21%2020-28z%27/%3E%0A%3Ccircle%20cx%3D%27118%27%20cy%3D%2754%27%20r%3D%2730%27/%3E%0A%3Cpath%20d%3D%27M98%2053c6%208%2012%2012%2020%2012%209%200%2016-4%2022-12%202-3%205-4%209-3-4%2015-15%2024-31%2024-15%200-27-9-31-24%204-1%207%200%2011%203z%27/%3E%0A%3C/g%3E%0A%3C/svg%3E");
  }

  /* Spymaster box uses the same art but higher placement + lower opacity (like mobile) */
  body.og-mode .og-team-panel .online-roster-spymasters::before {
    opacity: 0.22;
    background-position: left 65%;
    background-size: 100% auto;
  }

  /* Keep text/content above the art */
  body.og-mode .og-team-panel .online-roster-block > * {
    position: relative;
    z-index: 2;
  }

  /* Score line like the screenshot (big number + agent strip) */
  body.og-mode .og-score-block {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px 6px;
  }

  body.og-mode .og-score-blue {
    justify-content: flex-start;
  }

  body.og-mode .og-score-red {
    justify-content: flex-end;
  }

  body.og-mode .og-score-number {
    font-size: 56px;
    font-weight: 900;
    line-height: 1;
    color: #fff;
    -webkit-text-stroke: 5px rgba(0,0,0,0.28);
    text-shadow: 0 3px 0 rgba(0,0,0,0.30), 0 0 14px rgba(0,0,0,0.22);
    font-variant-numeric: tabular-nums;
  }

  body.og-mode .og-agent-strip {
    display: flex;
    flex-wrap: wrap;
    gap: 3px;
    max-width: 130px;
    align-content: center;
  }

  body.og-mode .og-agent-strip .og-agent-dot {
    width: 14px;
    height: 9px;
    border-radius: 3px;
    background: rgba(255,255,255,0.85);
    border: 1px solid rgba(0,0,0,0.18);
    box-shadow: 0 2px 0 rgba(0,0,0,0.18);
  }

  body.og-mode .og-agent-strip-blue .og-agent-dot {
    background: rgba(200, 245, 255, 0.9);
  }

  body.og-mode .og-agent-strip-red .og-agent-dot {
    background: rgba(255, 232, 205, 0.9);
  }

  /* Give the score "strip" a more rail-like look */
  body.og-mode .og-score-avatar {
    width: 96px;
    height: 34px;
    border-radius: 12px;
    flex-shrink: 0;
    background:
      repeating-linear-gradient(90deg, rgba(255,255,255,0.55) 0 10px, rgba(255,255,255,0.0) 10px 18px),
      linear-gradient(135deg, rgba(0,0,0,0.45) 0%, rgba(0,0,0,0.20) 100%);
    border: 2px solid rgba(255,255,255,0.22);
    box-shadow: 0 10px 18px rgba(0,0,0,0.28);
  }

  body.og-mode .og-score-avatar-blue {
    border-color: rgba(59, 139, 235, 0.28);
  }

  body.og-mode .og-score-avatar-red {
    border-color: rgba(200, 85, 58, 0.28);
  }

  /* Put the red score elements in the same order as mobile: number near the edge */
  body.og-mode .og-score-red {
    flex-direction: row-reverse;
  }
}

/* ==================== OG DESKTOP GAME LOG SIZING ==================== */
@media (min-width: 769px) {
  body.og-mode .gamelog-entries {
    gap: 10px;
  }

  body.og-mode .gamelog-turn {
    gap: 6px;
  }

  body.og-mode .gamelog-avatar {
    width: 28px;
    height: 28px;
    font-size: 11px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.30);
  }

  body.og-mode .gamelog-clue-pill {
    padding: 4px 6px;
    border-width: 2px;
    border-radius: 16px;
    min-height: 30px;
  }

  body.og-mode .gamelog-clue-word {
    font-size: 12px;
    letter-spacing: 0.6px;
  }

  body.og-mode .gamelog-clue-count,
  body.og-mode .gamelog-clue-number {
    width: 18px;
    height: 18px;
    font-size: 11px;
  }

  body.og-mode .gamelog-word-pill {
    font-size: 9px;
    padding: 3px 6px;
    border-radius: 12px;
    border-width: 1px;
    box-shadow: 0 2px 7px rgba(0,0,0,0.25);
  }

  body.og-mode .gamelog-system {
    font-size: 8px;
    padding: 3px 6px;
    border-radius: 10px;
  }
}

/* =====================================================
   OG (Codenames Online) â€” TRUE card flip (front vs back)
   Fix: previously the main card surfaces were drawn on .game-card
   (outside the flipping .card-inner), so the flip looked like a tiny lift.
   These overrides move the surfaces onto the flipping faces.
===================================================== */

/* Make the container just a perspective holder (no static plate). */
body.og-mode .game-card{
  background: transparent;
  border: none;
  box-shadow: none;
}
body.og-mode .game-card::before,
body.og-mode .game-card::after{
  content: none !important;
}

/* Base face surface (this is what actually flips). */
body.og-mode .game-card .card-face{
  border-radius: 10px;
  overflow: hidden;
  background: var(--face-cardBg);
  border: 1px solid var(--face-cardBorder);
  box-shadow: 0 8px 18px rgba(0,0,0,0.32);
}

/* Inner plate */
body.og-mode .game-card .card-face::before{
  content:"";
  position:absolute;
  inset: 6px;
  border-radius: 6px;
  background:
    linear-gradient(to bottom, rgba(255,255,255,0.10), rgba(255,255,255,0.00) 30%),
    var(--face-innerBg);
  border: 2px solid var(--face-innerBorder);
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.16),
    inset 0 -2px 0 rgba(0,0,0,0.10);
  pointer-events:none;
}

/* Divider line */
body.og-mode .game-card .card-face::after{
  content:"";
  position:absolute;
  left: 6px;
  right: 6px;
  bottom: calc(var(--labelInsetY) + var(--labelHeight) + 3px);
  height: 2px;
  background: var(--face-innerBorder);
  opacity: 0.45;
  pointer-events:none;
}

/* FRONT face always uses the neutral (unrevealed) palette */
body.og-mode .game-card .card-front{
  --face-cardBg: var(--neutral-cardBg);
  --face-cardBorder: var(--neutral-cardBorder);
  --face-innerBg: var(--neutral-innerBg);
  --face-innerBorder: var(--neutral-innerBorder);
}

/* BACK face defaults to neutral unless revealed/spymaster-view overrides it */
body.og-mode .game-card .card-back{
  --face-cardBg: var(--neutral-cardBg);
  --face-cardBorder: var(--neutral-cardBorder);
  --face-innerBg: var(--neutral-innerBg);
  --face-innerBorder: var(--neutral-innerBorder);
}

/* When revealed, the BACK face becomes the fully colored agent card */
body.og-mode .game-card.revealed .card-back,
body.og-mode .game-card.spymaster-view .card-back{
  --face-cardBg: var(--cardBg);
  --face-cardBorder: var(--cardBorder);
  --face-innerBg: var(--innerBg);
  --face-innerBorder: var(--innerBorder);
}

/* Face-down (selected but not confirmed): show a patterned card back.
   This overrides the generic plate/divider to keep the back clean + recognizable. */
body.og-mode .game-card.pending-select:not(.revealed) .card-back{
  background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.16), rgba(255,255,255,0.04) 45%, rgba(0,0,0,0.10) 80%),
              linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border-color: rgba(255,255,255,0.20);
}
body.og-mode .game-card.pending-select:not(.revealed) .card-back::before{
  /* Replace inner plate with a simple inset frame */
  inset: 10px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(255,255,255,0.10), rgba(255,255,255,0.02));
  border: 2px solid rgba(255,255,255,0.12);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,0.18);
}
body.og-mode .game-card.pending-select:not(.revealed) .card-back::after{
  /* Replace divider line with a subtle pattern overlay */
  left: 0;
  right: 0;
  bottom: 0;
  height: auto;
  inset: 0;
  border-radius: inherit;
  background: repeating-linear-gradient(
    135deg,
    rgba(255,255,255,0.10) 0px,
    rgba(255,255,255,0.10) 10px,
    rgba(0,0,0,0.06) 10px,
    rgba(0,0,0,0.06) 20px
  );
  mix-blend-mode: overlay;
  opacity: 0.35;
}

/* OG reveal: don't run the generic "lift" animation on the card container.
   The flip is driven by JS + the face surfaces above. */
body.og-mode .game-card.guess-animate{
  animation: none !important;
}

/* =====================================================
   OG (Codenames Online) â€” TRUE card flip (front vs back)
   Surfaces live on .card-front/.card-back so the flip is obvious.
===================================================== */

/* The container itself should not draw the card plates (those don't flip). */
body.og-mode .game-card{
  background: transparent;
  border: none;
  box-shadow: none;
}
body.og-mode .game-card::before,
body.og-mode .game-card::after{
  content: none !important;
}

/* Default face palette: neutral (front stays neutral even after reveal). */
body.og-mode .game-card .card-front{
  --face-cardBg: var(--neutral-cardBg);
  --face-cardBorder: var(--neutral-cardBorder);
  --face-innerBg: var(--neutral-innerBg);
  --face-innerBorder: var(--neutral-innerBorder);
}

/* Back face palette defaults to neutral; revealed/spymaster-view swaps to team palette. */
body.og-mode .game-card .card-back{
  --face-cardBg: var(--neutral-cardBg);
  --face-cardBorder: var(--neutral-cardBorder);
  --face-innerBg: var(--neutral-innerBg);
  --face-innerBorder: var(--neutral-innerBorder);
}
body.og-mode .game-card.revealed .card-back,
body.og-mode .game-card.spymaster-view .card-back{
  --face-cardBg: var(--cardBg);
  --face-cardBorder: var(--cardBorder);
  --face-innerBg: var(--innerBg);
  --face-innerBorder: var(--innerBorder);
}

/* Draw the whole card plate on the flipping faces */
body.og-mode .game-card .card-face{
  border-radius: 10px;
  overflow: hidden;
  background: var(--face-cardBg);
  border: 1px solid var(--face-cardBorder);
  box-shadow: 0 8px 18px rgba(0,0,0,0.32);
}

/* Inner plate */
body.og-mode .game-card .card-face::before{
  content:"";
  position:absolute;
  inset: 6px;
  border-radius: 6px;
  background:
    linear-gradient(to bottom, rgba(255,255,255,0.10), rgba(255,255,255,0.00) 30%),
    var(--face-innerBg);
  border: 2px solid var(--face-innerBorder);
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.16),
    inset 0 -2px 0 rgba(0,0,0,0.10);
  pointer-events:none;
}

/* Divider line above the word strip */
body.og-mode .game-card .card-face::after{
  content:"";
  position:absolute;
  left: 6px;
  right: 6px;
  bottom: calc(var(--labelInsetY) + var(--labelHeight) + 3px);
  height: 2px;
  background: var(--face-innerBorder);
  opacity: 0.45;
  pointer-events:none;
}

/* Face-down (selected) card-back design â€” hides word and shows patterned back */
body.og-mode .game-card.pending-select:not(.revealed) .card-back{
  /* Override the reveal palette: this is the classic card-back. */
  --face-cardBg: rgba(12,12,14,0.86);
  --face-cardBorder: rgba(255,255,255,0.18);
  --face-innerBg: rgba(255,255,255,0.05);
  --face-innerBorder: rgba(255,255,255,0.14);
  background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.18), rgba(255,255,255,0.05) 45%, rgba(0,0,0,0.18) 82%),
              linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
}

/* Replace the generic inner-plate/divider with a subtle back pattern */
body.og-mode .game-card.pending-select:not(.revealed) .card-back::before{
  content: "";
  position: absolute;
  inset: 10px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(255,255,255,0.10), rgba(255,255,255,0.02));
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.10);
  border: none;
}
body.og-mode .game-card.pending-select:not(.revealed) .card-back::after{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: repeating-linear-gradient(
    135deg,
    rgba(255,255,255,0.10) 0px,
    rgba(255,255,255,0.10) 10px,
    rgba(0,0,0,0.06) 10px,
    rgba(0,0,0,0.06) 20px
  );
  mix-blend-mode: overlay;
  opacity: 0.35;
}
body.og-mode .game-card.pending-select:not(.revealed) .card-back .card-word{ opacity: 0 !important; }

/* During OG reveals, avoid the universal translate/scale animation on the container.
   The reveal should read as a flip. (We keep the flip-glow class added by JS.) */
body.og-mode .game-card.guess-animate{
  animation: none !important;
}


/* =====================================================
   OG (Codenames Online) â€” TRUE card flip (front vs back)
   Surfaces live on .card-front/.card-back so the flip is obvious.
===================================================== */

/* The container itself should not draw the card plates (those don't flip). */
body.og-mode .game-card{
  background: transparent;
  border: none;
  box-shadow: none;
}
body.og-mode .game-card::before,
body.og-mode .game-card::after{
  content: none !important;
}

/* Front face is always the neutral unrevealed word card. */
body.og-mode .game-card .card-front{
  --face-cardBorder: var(--neutral-cardBorder);
  --face-cardBg: var(--neutral-cardBg);
  --face-innerBorder: var(--neutral-innerBorder);
  --face-innerBg: var(--neutral-innerBg);
  /* Keep the unrevealed label strip neutral during reveal flips. */
  --wordBg: var(--neutral-darkWordBg);
  --wordColor: #ffffff;
}

/* Back face defaults to neutral unless revealed/spymaster-view sets vars. */
body.og-mode .game-card .card-back{
  --face-cardBorder: var(--neutral-cardBorder);
  --face-cardBg: var(--neutral-cardBg);
  --face-innerBorder: var(--neutral-innerBorder);
  --face-innerBg: var(--neutral-innerBg);
}

/* When revealed (or spymaster-view), back face uses the team palette vars. */
body.og-mode .game-card.revealed .card-back,
body.og-mode .game-card.spymaster-view .card-back{
  --face-cardBorder: var(--cardBorder);
  --face-cardBg: var(--cardBg);
  --face-innerBorder: var(--innerBorder);
  --face-innerBg: var(--innerBg);
}

/* Build the CNO-style card plate on EACH face. */
body.og-mode .game-card .card-face{
  border-radius: 10px;
  overflow: hidden;
  background: var(--face-cardBg);
  border: 1px solid var(--face-cardBorder);
  box-shadow: 0 8px 18px rgba(0,0,0,0.32);
}

body.og-mode .game-card .card-face::before{
  content:"";
  position:absolute;
  inset: 6px;
  border-radius: 6px;
  background:
    linear-gradient(to bottom, rgba(255,255,255,0.10), rgba(255,255,255,0.00) 30%),
    var(--face-innerBg);
  border: 2px solid var(--face-innerBorder);
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.16),
    inset 0 -2px 0 rgba(0,0,0,0.10);
  pointer-events:none;
}

/* Divider line at the top edge of the word strip. */
body.og-mode .game-card .card-face::after{
  content:"";
  position:absolute;
  left: 6px;
  right: 6px;
  bottom: calc(var(--labelInsetY) + var(--labelHeight) + 3px);
  height: 2px;
  background: var(--face-innerBorder);
  opacity: 0.45;
  pointer-events:none;
}

/* Face-down back (selected-but-not-confirmed): hide divider + use patterned back. */
body.og-mode .game-card.pending-select:not(.revealed) .card-back{
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,0.16), rgba(255,255,255,0.04) 45%, rgba(0,0,0,0.10) 80%),
    linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border-color: rgba(255,255,255,0.22);
}
body.og-mode .game-card.pending-select:not(.revealed) .card-back::after{
  /* Replace the divider with an inner frame on the face-down side */
  content: "";
  position: absolute;
  inset: 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.18);
  box-shadow: 0 0 0 1px rgba(0,0,0,0.20) inset;
  pointer-events: none;
  opacity: 1;
}
body.og-mode .game-card.pending-select:not(.revealed) .card-back::before{
  /* Patterned plate instead of the regular inner plate */
  content: "";
  position: absolute;
  inset: 10px;
  border-radius: 12px;
  background: repeating-linear-gradient(
    135deg,
    rgba(255,255,255,0.10) 0px,
    rgba(255,255,255,0.10) 10px,
    rgba(0,0,0,0.06) 10px,
    rgba(0,0,0,0.06) 20px
  );
  mix-blend-mode: overlay;
  opacity: 0.35;
  box-shadow: inset 0 0 0 2px rgba(255,255,255,0.10);
  pointer-events: none;
}

/* Hide the word on the face-down side until the card is actually revealed. */
body.og-mode .game-card:not(.revealed).pending-select .card-back .card-word{
  opacity: 0;
}

/* Keep the dramatic reveal from being "just a lift" in OG; the flip is the show. */
body.og-mode .game-card.guess-animate{
  animation: none !important;
}

