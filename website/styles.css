* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --bg: #09090b;
  --surface: #131316;
  --surface2: #1a1a1f;
  /* Solid card surface used for modals + elevated panels */
  --card: #141418;
  /* Default (neutral) outlines. Team color outline is handled separately via --team-glow. */
  --border: #34343d;
  --text: #fff;
  --text-dim: #71717a;
  --accent: #3b82f6;
  --green: #22c55e;
  --gold: #facc15;
  --red: #ef4444;
  /* Consistent control sizing (matches header name box) */
  --namebox-w: 160px;
  /* Team theme (set dynamically) */
  --team-accent: transparent;
  --team-glow: rgba(59,130,246,0);
}

html, body {
  height: 100%;
  overflow: hidden;
}

body {
  font-family: 'Space Grotesk', system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  font-size: 15px;
  line-height: 1.35;
  position: relative;
}

/* Subtle team glow frame */
body.tournament.has-team-color::after{
  content:"";
  position: fixed;
  /* Hug the viewport edges with squared corners */
  inset: 1px;
  border-radius: 0px;
  /* Brighter team-colored outline */
  border: 1px solid var(--team-glow);
  pointer-events:none;
  z-index: 998;
  opacity: 0.72;
}

/* Team accent text (only when you're on a team) */
body.tournament.has-team-color .team-accent{ color: var(--team-accent); }
body:not(.tournament) .team-accent{ color: var(--text-dim); }

/* Show team header pill only while in Tournament */
body:not(.tournament) #header-team-pill{ display:none !important; }

/* Tournament Home should not show the name/logout card (name lives in header + launch screen) */
body.tournament #panel-home #name-card{ display:none !important; }

/* In Tournament mode, the Play tab should not offer Quick Play selection */
body.tournament #play-mode-select{ display:none !important; }

.app {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* ==================== DESKTOP ==================== */
@media (min-width: 769px) {
  /* On desktop we use a sleek top tab bar (not the mobile bottom tabs) */
  .mobile-tabs { display: none; }

  .desktop-tabs {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
  }

  .desktop-tabs .tab {
    appearance: none;
    border: 1px solid transparent;
    background: transparent;
    color: var(--text-dim);
    padding: 10px 14px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 0.2px;
    cursor: pointer;
    transition: background 0.15s, border-color 0.15s, color 0.15s;
  }

  .desktop-tabs .tab:hover {
    background: var(--surface2);
    border-color: var(--border);
    color: var(--text);
  }

  .desktop-tabs .tab.active {
    background: rgba(59,130,246,0.14);
    border-color: rgba(59,130,246,0.35);
    color: var(--text);
  }

  .mobile-header {
    display: none !important;
  }

  .app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 32px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
  }

  .logo {
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 2px;
    cursor: pointer;
    user-select: none;
  }

  /* (header-center removed for desktop) */

  .prize-badge {
    background: var(--gold);
    color: #000;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
  }

  .main-content {
    flex: 1;
    position: relative;
    overflow: hidden;
    background: var(--bg);
  }

  .panel {
    position: absolute;
    inset: 0;
    display: none;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    background: var(--bg);
  }

  .panel.active {
    display: block;
  }

  .panel-inner {
    width: 100%;
    max-width: 760px;
    margin: 0 auto;
    padding: 32px 28px;
    min-height: 100%;
    display: flex;
    flex-direction: column;
    overflow: visible;

  }
  /* Info Panel */
  .panel-info {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .panel-info .panel-inner {
    text-align: center;
    justify-content: center;
    align-items: center;
  }

  .panel-info h1 {
    font-size: 26px;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .subtitle {
    color: var(--text-dim);
    font-size: 13px;
    margin-bottom: 24px;
  }

  .spots-display {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px 40px;
    margin-bottom: 24px;
  }

  .spots-number {
    font-size: 52px;
    font-weight: 700;
    color: var(--green);
    line-height: 1;
  }

  .spots-label {
    color: var(--text-dim);
    font-size: 13px;
    margin-top: 4px;
  }

  .info-stats {
    display: flex;
    gap: 24px;
  }

  .info-stat {
    text-align: center;
  }

  .info-stat .val {
    display: block;
    font-size: 24px;
    font-weight: 600;
  }

  .info-stat .lbl {
    font-size: 11px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* Register Panel */
  .panel-register h2 {
    font-size: 17px;
    font-weight: 600;
    margin-bottom: 20px;
  }

  .reg-form {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .input {
    width: 100%;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 11px 13px;
    color: var(--text);
    font-family: inherit;
    font-size: 13px;
    margin-bottom: 12px;
    transition: border-color 0.2s;
  }

  .input:focus {
    outline: none;
    border-color: var(--accent);
  }

  .input::placeholder {
    color: var(--text-dim);
  }

  .players-grid {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 16px;
    overflow-y: auto;
  }

  .player-input {
    display: grid;
    grid-template-columns: 28px 1fr 1fr;
    gap: 8px;
    align-items: center;
    background: var(--surface);
    padding: 10px;
    border-radius: 8px;
  }

  .player-num {
    width: 28px;
    height: 28px;
    background: var(--accent);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
  }

  .player-input .input {
    margin-bottom: 0;
    padding: 10px 12px;
  }

  .btn-submit {
    background: var(--accent);
    color: white;
    border: none;
    padding: 14px;
    border-radius: 10px;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s;
  }

  .btn-submit:hover {
    opacity: 0.9;
  }

  .btn-submit:disabled {
    background: var(--surface2);
    color: var(--text-dim);
    cursor: not-allowed;
  }

  /* Teams Panel */
  .panel-teams h2 {
    font-size: 17px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .panel-teams h2 span {
    color: var(--accent);
  }

  .teams-list {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .team-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px;
  }

  .team-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }

  .team-card-header h3 {
    font-size: 15px;
    font-weight: 600;
  }

  .team-slot {
    background: var(--accent);
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
  }

  .team-players {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .player-row {
    display: flex;
    justify-content: space-between;
    background: var(--surface2);
    padding: 8px 10px;
    border-radius: 6px;
    font-size: 12px;
  }

  .player-row .discord {
    color: var(--text-dim);
  }

  .player-row { align-items: center; gap: 10px; }
  .player-left { display: flex; align-items: center; justify-content: space-between; gap: 10px; width: 100%; min-width: 0; }
  .player-name { font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .icon-btn {
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    width: 30px;
    height: 30px;
    border-radius: 10px;
    font-weight: 900;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }
  .icon-btn:hover { filter: brightness(1.1); }
  .icon-btn.danger {
    border-color: rgba(239,68,68,0.45);
    background: rgba(239,68,68,0.12);
    color: var(--text);
  }

  .team-name-wrap { display: flex; align-items: center; min-width: 0; }
  .team-name.editable { cursor: text; border-bottom: 1px dashed rgba(255,255,255,0.25); }
  .team-name-input { max-width: 260px; height: 34px; padding: 6px 10px; font-weight: 800; }

  .team-owner-controls { margin-top: 14px; }
  .owner-actions-row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
  .team-card.my-team {
    position: relative;
    overflow: visible;
    box-shadow: 0 0 0 1px rgba(255,255,255,0.12), 0 10px 30px rgba(0,0,0,0.25);
  }

  .empty-state {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    font-size: 13px;
  }

  .error-box {
    background: rgba(239,68,68,0.1);
    border: 1px solid var(--red);
    border-radius: 8px;
    padding: 10px 14px;
    margin-bottom: 12px;
  }

  .error-box ul {
    list-style: none;
    color: #fca5a5;
    font-size: 13px;
  }

  .closed-msg {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 40px;
    text-align: center;
    color: var(--text-dim);
  }
}

/* ==================== MOBILE ==================== */
@media (max-width: 768px) {
  .app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
  }

  .desktop-tabs {
    display: none;
  }

  .main-content {
    flex: 1;
    position: relative;
    overflow: hidden;
  }

  .panel {
    position: absolute;
    inset: 0;
    display: none;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  .panel.active {
    display: block;
  }

  .panel-inner {
    padding: 20px;
    padding-bottom: calc(92px + env(safe-area-inset-bottom));
    min-height: 100%;
    display: flex;
    flex-direction: column;
  }

  .mobile-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  }

  .mobile-header .logo {
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 2px;
  }

  .mobile-header .prize-badge {
    background: var(--gold);
    color: #000;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
  }

  /* Info Panel Mobile */
  .panel-info .panel-inner {
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .panel-info h1 {
    font-size: 26px;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .subtitle {
    color: var(--text-dim);
    font-size: 13px;
    margin-bottom: 28px;
  }

  .spots-display {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px 48px;
    margin-bottom: 28px;
  }

  .spots-number {
    font-size: 58px;
    font-weight: 700;
    color: var(--green);
    line-height: 1;
  }

  .spots-label {
    color: var(--text-dim);
    font-size: 13px;
    margin-top: 4px;
  }

  .info-stats {
    display: flex;
    gap: 32px;
  }

  .info-stat {
    text-align: center;
  }

  .info-stat .val {
    display: block;
    font-size: 22px;
    font-weight: 600;
  }

  .info-stat .lbl {
    font-size: 10px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* Register Panel Mobile */
  .panel-register h2 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .reg-form {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .input {
    width: 100%;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 12px 14px;
    color: var(--text);
    font-family: inherit;
    font-size: 15px;
    margin-bottom: 12px;
  }

  .input:focus {
    outline: none;
    border-color: var(--accent);
  }

  .input::placeholder {
    color: var(--text-dim);
  }

  .players-grid {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 16px;
  }

  .player-input {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    background: var(--surface);
    padding: 12px;
    border-radius: 10px;
  }

  .player-num {
    width: 32px;
    height: 32px;
    background: var(--accent);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-weight: 600;
    flex-shrink: 0;
  }

  .player-input .input {
    flex: 1;
    min-width: calc(50% - 24px);
    margin-bottom: 0;
    padding: 12px;
  }

  .btn-submit {
    background: var(--accent);
    color: white;
    border: none;
    padding: 16px;
    border-radius: 12px;
    font-family: inherit;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: auto;
  }

  .btn-submit:disabled {
    background: var(--surface2);
    color: var(--text-dim);
  }

  /* Teams Panel Mobile */
  .panel-teams h2 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  .panel-teams h2 span {
    color: var(--accent);
  }

  .teams-list {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .team-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
  }

  .team-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }

  .team-card-header h3 {
    font-size: 16px;
    font-weight: 600;
  }

  .team-slot {
    background: var(--accent);
    color: white;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
  }

  .team-players {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .player-row {
    display: flex;
    justify-content: space-between;
    background: var(--surface2);
    padding: 10px 12px;
    border-radius: 8px;
    font-size: 14px;
  }

  .player-row .discord {
    color: var(--text-dim);
  }

  .empty-state {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
  }

  .error-box {
    background: rgba(239,68,68,0.1);
    border: 1px solid var(--red);
    border-radius: 10px;
    padding: 12px 16px;
    margin-bottom: 12px;
  }

  .error-box ul {
    list-style: none;
    color: #fca5a5;
    font-size: 14px;
  }

  .closed-msg {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    font-size: 18px;
  }

  /* Mobile Tabs */
  .mobile-tabs {
    display: flex;
    background: var(--surface);
    border-top: 1px solid var(--border);
    padding: 8px 0;
    padding-bottom: calc(8px + env(safe-area-inset-bottom));
  }

  .tab {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    background: none;
    border: none;
    color: var(--text-dim);
    padding: 8px;
    cursor: pointer;
    transition: color 0.2s;
  }

  .tab svg {
    width: 22px;
    height: 22px;
  }

  .tab span {
    font-size: 11px;
    font-weight: 500;
  }

  .tab.active {
    color: var(--accent);
  }
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
}


/* ==================== TEAM FLOW UI ==================== */
.stack { display: flex; flex-direction: column; gap: 12px; }

.accordion {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
}

.accordion summary {
  list-style: none;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 14px 14px;
  cursor: pointer;
  font-weight: 700;
  color: var(--text);
  user-select: none;
}

.accordion summary::-webkit-details-marker { display: none; }

.pill {
  background: var(--surface2);
  border: 1px solid var(--border);
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 12px;
  color: var(--text-dim);
  font-weight: 700;
}

.pill.pending {
  color: var(--gold);
  border-color: rgba(250, 204, 21, 0.35);
}

.manage-note {
  padding: 0 14px 12px 14px;
  color: var(--text-dim);
  font-size: 13px;
  line-height: 1.4;
}

.form { padding: 0 14px 14px 14px; }

.form-grid { display: flex; flex-direction: column; gap: 12px; }

.field { display: flex; flex-direction: column; gap: 6px; }

/* Color picker rows */
.color-picker-row{
  display: flex;
  align-items: center;
  gap: 10px;
}

.team-color-row{
  margin-top: 10px;
  padding: 10px 10px;
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  background: rgba(255,255,255,0.03);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.team-color-row.readonly{ opacity: 0.85; }
.team-color-row.readonly .team-color-label::after{ content: " (view only)"; font-weight: 600; color: var(--text-dim); }

.team-color-label{
  color: var(--text-dim);
  font-size: 12px;
  font-weight: 700;
}

.color-input, .team-color-input{
  appearance: none;
  width: 42px;
  height: 30px;
  padding: 0;
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 10px;
  background: transparent;
  cursor: pointer;
}

.color-input::-webkit-color-swatch-wrapper, .team-color-input::-webkit-color-swatch-wrapper{
  padding: 0;
  border-radius: 10px;
}

.color-input::-webkit-color-swatch, .team-color-input::-webkit-color-swatch{
  border: none;
  border-radius: 10px;
}

.label { color: var(--text-dim); font-size: 12px; font-weight: 700; letter-spacing: 0.2px; }

.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

.form-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 12px;
}

.hint { color: var(--text-dim); font-size: 13px; line-height: 1.3; }
.hint.ok { color: var(--green); }
.hint.error { color: #f87171; }

.btn {
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 12px 14px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 700;
}

.btn.primary {
  background: var(--accent);
  border-color: rgba(59, 130, 246, 0.35);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn.small {
  padding: 8px 10px;
  border-radius: 9px;
  font-size: 13px;
}

/* Invites button - same size as regular btn, yellow color */
.btn.invites-btn {
  background: rgba(234, 179, 8, 0.15);
  border-color: rgba(234, 179, 8, 0.4);
  color: rgb(250, 204, 21);
}
.btn.invites-btn:hover {
  background: rgba(234, 179, 8, 0.25);
  border-color: rgba(234, 179, 8, 0.5);
}

.manage-area { padding: 0 14px 14px 14px; }

.manage-card {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px;
}

.manage-title {
  font-weight: 800;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}

.manage-sub { color: var(--text-dim); font-size: 13px; margin-bottom: 10px; }

.req-list { display: flex; flex-direction: column; gap: 10px; }

.req-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
}

.req-name { font-weight: 800; }
.req-discord { color: var(--text-dim); font-size: 13px; margin-top: 2px; }
.req-actions { display: flex; gap: 8px; }

/* Team list accordion */
.team-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
  margin-bottom: 10px;
}

.team-details summary { list-style: none; }
.team-details summary::-webkit-details-marker { display: none; }

.team-summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 14px;
  cursor: pointer;
}

.team-left { display: flex; align-items: baseline; gap: 10px; min-width: 0; }
.team-rank { color: var(--text-dim); font-weight: 800; }
.team-name { font-weight: 900; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.team-right { display: flex; align-items: center; gap: 10px; }
.meta { color: var(--text-dim); font-size: 13px; font-weight: 800; }

.team-body {
  padding: 0 14px 14px 14px;
  border-top: 1px solid var(--border);
}

.team-section-title {
  margin-top: 12px;
  margin-bottom: 8px;
  font-weight: 900;
  font-size: 12px;
  color: var(--text-dim);
  letter-spacing: 0.3px;
  text-transform: uppercase;
}

.team-footnote { margin-top: 10px; color: var(--text-dim); font-size: 13px; }

.subtitle.small { font-size: 13px; margin-top: 6px; }

/* ==================== FIRST-LOAD CHOOSER + STATUS ==================== */
.status-card {
  background: rgba(59,130,246,0.10);
  border: 1px solid rgba(59,130,246,0.28);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 14px;
}

.status-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.status-title {
  font-weight: 900;
  font-size: 14px;
}

.status-sub {
  color: var(--text-dim);
  font-size: 13px;
  margin-top: 2px;
}

.status-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.mode-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.62);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 18px;
  z-index: 50;
}

.mode-card {
  width: 100%;
  max-width: 520px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 18px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.mode-title {
  font-weight: 900;
  font-size: 18px;
  margin-bottom: 6px;
}

.mode-sub {
  color: var(--text-dim);
  font-size: 13px;
  margin-bottom: 14px;
}

.mode-actions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.mode-skip {
  margin-top: 12px;
  width: 100%;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text-dim);
  border-radius: 12px;
  padding: 10px 12px;
  cursor: pointer;
  font-weight: 800;
}

.mode-skip:hover {
  color: var(--text);
  background: var(--surface2);
}


@media (max-width: 520px) {
  .two-col { grid-template-columns: 1fr; }
  .tab { max-width: none; }
}


/* =========================
   Mode / Role UI
========================= */
/* =========================
   Header Mode Switcher (Top)
========================= */
.header-mode-switcher {
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 999px;
  padding: 4px 6px 4px 12px;
}

.header-mode-switcher .mode-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-dim);
  white-space: nowrap;
}

.header-mode-switcher .mode-btn {
  appearance: none;
  border: none;
  background: transparent;
  color: var(--text-dim);
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
}

.header-mode-switcher .mode-btn:hover {
  background: rgba(255,255,255,0.08);
  color: var(--text);
}

.header-mode-switcher .mode-btn.active {
  background: var(--accent);
  color: #fff;
}

.header-mode-switcher .mode-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Mobile header mode switcher */
.header-mode-switcher.mobile {
  background: rgba(0,0,0,0.05);
  border-color: rgba(0,0,0,0.1);
  padding: 3px 4px 3px 10px;
}

.header-mode-switcher.mobile .mode-label {
  color: rgba(0,0,0,0.6);
  font-size: 11px;
}

.header-mode-switcher.mobile .mode-btn {
  color: rgba(0,0,0,0.5);
  padding: 5px 8px;
  font-size: 11px;
}

.header-mode-switcher.mobile .mode-btn:hover {
  background: rgba(0,0,0,0.08);
  color: rgba(0,0,0,0.8);
}

.header-mode-switcher.mobile .mode-btn.active {
  background: var(--accent);
  color: #fff;
}

/* Creator-only / Joiner-only blocks */
.only-creator{ display:none; }
.only-joiner{ display:none; }
body.mode-creator .only-creator{ display:block; }
body.mode-joiner .only-joiner{ display:block; }

/* Manage area additions */
.manage-card + .manage-card{ margin-top: 12px; }

.member-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  /* Slightly slimmer + more separation for readability */
  padding: 9px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
}
.member-row + .member-row { margin-top: 12px; }
.member-meta{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.member-name{ font-weight: 700; }
.member-discord{ font-size: 12px; color: var(--text-dim); }

/* Rename form */
.rename-form {
  display: flex;
  gap: 10px;
  align-items: flex-end;
}
.rename-form .field {
  flex: 1;
}
.rename-form .input {
  margin-bottom: 0;
}
.rename-form .btn {
  flex-shrink: 0;
}

/* Request meta */
.req-meta {
  font-size: 12px;
  color: var(--text-dim);
  margin-top: 2px;
}

/* Danger zone */
.danger{
  border-color: rgba(239, 68, 68, 0.25) !important;
  background: rgba(239, 68, 68, 0.05) !important;
}
.danger .manage-title{ color: var(--red); }
.danger-actions{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-top: 10px;
}
.btn.danger{
  border-color: rgba(239, 68, 68, 0.35);
  color: var(--red);
  background: rgba(239, 68, 68, 0.08);
}
.btn.danger:hover{
  background: rgba(239, 68, 68, 0.15);
}

/* Success button */
.btn.success {
  background: rgba(34, 197, 94, 0.15);
  border-color: rgba(34, 197, 94, 0.35);
  color: var(--green);
}
.btn.success:hover {
  background: rgba(34, 197, 94, 0.25);
}

.small-note{
  font-size: 12px;
  color: var(--text-dim);
  margin-top: 8px;
}

/* Empty state in manage cards */
.manage-card .empty-state {
  padding: 20px;
  text-align: center;
  color: var(--text-dim);
  font-size: 13px;
}

/* Members list */
.members-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

/* Pill in title */
.manage-title .pill {
  font-size: 11px;
  padding: 3px 8px;
}

/* ==================== OWNER NAV + MANAGE TABS ==================== */

.manage-tabs {
  display: flex;
  gap: 10px;
  padding: 10px 14px 14px 14px;
}

.manage-tab {
  flex: 1;
  background: var(--surface2);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  font-weight: 900;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.manage-tab.active {
  background: rgba(59,130,246,0.18);
  border-color: rgba(59,130,246,0.35);
}

.tab-badge {
  background: rgba(250,204,21,0.18);
  border: 1px solid rgba(250,204,21,0.35);
  color: var(--gold);
  font-size: 12px;
  font-weight: 900;
  padding: 2px 8px;
  border-radius: 999px;
}

.manage-tab-content { display: none; padding: 0 14px 14px 14px; }
.manage-tab-content.active { display: block; }

.tab-empty {
  padding: 18px;
  border: 1px dashed rgba(255,255,255,0.18);
  border-radius: 14px;
  background: rgba(255,255,255,0.03);
  text-align: center;
}

.tab-empty-icon { font-size: 24px; margin-bottom: 6px; }
.tab-empty-text { font-weight: 900; }
.tab-empty-sub { color: var(--text-dim); font-size: 13px; margin-top: 4px; }

.tab-warning {
  padding: 12px;
  border-radius: 14px;
  border: 1px solid rgba(250,204,21,0.25);
  background: rgba(250,204,21,0.08);
  color: var(--gold);
  font-size: 13px;
  font-weight: 800;
  margin-bottom: 10px;
}

.req-left { min-width: 0; }
.req-meta { color: var(--text-dim); font-size: 13px; margin-top: 2px; }

.settings-section {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 12px;
}

.settings-title {
  font-weight: 900;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.rename-form { display: flex; gap: 10px; align-items: center; }
.rename-form .input { flex: 1; }

.members-list { display: flex; flex-direction: column; gap: 10px; }
.member-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
}

.member-name { font-weight: 900; }
.member-discord { color: var(--text-dim); font-size: 13px; margin-top: 2px; }
.small-note { color: var(--text-dim); font-size: 13px; margin-top: 10px; }

.btn.success {
  background: rgba(34,197,94,0.14);
  border-color: rgba(34,197,94,0.28);
}

.btn.danger,
.btn.small.danger {
  background: rgba(248,113,113,0.12);
  border-color: rgba(248,113,113,0.28);
}

.danger-section { border-color: rgba(248,113,113,0.28); }
.danger-title { color: #f87171; }
.danger-desc { color: var(--text-dim); font-size: 13px; margin: 0 0 10px 0; }

/* =========================
   Simplified app additions
========================= */

.header-user{
  display:flex;
  flex-direction:row;
  align-items:center;
  justify-content:flex-end;
  gap:8px;
  min-width:0;
}

.header-user-stack{
  display:flex;
  flex-direction:row;
  align-items:center;
  gap:6px;
  min-width:0;
}

.header-pill{
  appearance: none;
  border: none;
  display:inline-flex;
  align-items:center;
  gap:6px;
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-dim);
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-family: inherit;
  transition: background 0.15s ease, color 0.15s ease;
}

.header-pill:hover{
  background: rgba(255, 255, 255, 0.12);
  color: var(--text);
}

.header-pill-label{
  color: var(--text-dim);
}

.header-pill-value{
  font-weight: 600;
  color: var(--text);
  max-width: 100px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#user-name-display{ cursor:pointer; }

.header-line{
  display:flex;
  justify-content:flex-end;
  gap:0;
  min-width: var(--namebox-w);
  max-width: 220px;
}

.header-k{
  font-size:11px;
  color: var(--text-dim);
}

.header-v{
  font-weight:600;
  user-select:none;
  font-size:12px;
  line-height:1.2;
  text-align:right;
  margin-left:6px;
  min-width:0;
  max-width: 180px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.header-user-input{
  width: var(--namebox-w);
  font-size:12px;
  padding:3px 10px;
  height: 24px;
}

.name-card{
  margin: 18px 0 10px 0;
  padding: 14px;
  border-radius: 16px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
}

.saved-name{
  font-size: 20px;
  font-weight: 700;
  margin-top: 4px;
  cursor:pointer;
  user-select:none;
}

.clickable{
  text-align:left;
  width:100%;
  border: none;
  background: transparent;
  padding: 0;
}

/* Modal */
.modal{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.62);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 999;
  padding: 14px;
}

.modal-card{
  width: min(520px, 100%);
  background: rgba(20,20,25,0.92);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 18px;
  box-shadow: 0 20px 80px rgba(0,0,0,0.55);
  overflow:hidden;
}

.modal-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 12px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

/* Make all modal close (×) buttons red */
.modal-head .icon-btn{
  border-color: rgba(248,113,113,0.45);
  background: rgba(248,113,113,0.12);
  color: var(--text);
}

.modal-title{
  font-weight: 700;
}

.modal-body{
  padding: 14px 12px;
}

.request-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

.request-row:last-child{ border-bottom: none; }

.request-actions{ display:flex; gap: 8px; }

/* Team chat */
.chat-modal-body{
  display:flex;
  flex-direction: column;
  gap: 12px;
  /* Taller chat like the rest of the UI */
  height: 72vh;
}

/* Chat tab */
.chat-head-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  margin-bottom: 10px;
}

/* Play tab - Mode Selection */
.mode-cards {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  margin: 24px 0;
}

.mode-card {
  appearance: none;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 16px;
  padding: 24px 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.mode-card:hover {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.08);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.mode-card-icon {
  font-size: 40px;
  line-height: 1;
}

.mode-card-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--text);
}

.mode-card-desc {
  font-size: 13px;
  color: var(--text-dim);
  line-height: 1.4;
}

@media (max-width: 520px) {
  .mode-cards {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .mode-card {
    padding: 20px 16px;
    flex-direction: row;
    text-align: left;
    gap: 16px;
  }

  .mode-card-icon {
    font-size: 32px;
    flex-shrink: 0;
  }

  .mode-card-content {
    flex: 1;
  }

  .mode-card-title {
    font-size: 16px;
  }

  .mode-card-desc {
    font-size: 12px;
  }
}

/* Lobby Header */
.lobby-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 4px;
}

.lobby-header h2 {
  margin: 0;
  font-size: 20px;
}

.back-btn {
  width: 36px;
  height: 36px;
  padding: 0;
  font-size: 18px;
  border-radius: 10px;
}

.lobby-name-check {
  margin: 16px 0;
  padding: 16px;
  background: rgba(250, 204, 21, 0.1);
  border: 1px solid rgba(250, 204, 21, 0.3);
  border-radius: 12px;
}

/* Quick Play Setup */
.quick-setup {
  margin-top: 20px;
}

.setup-section {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 16px;
  margin-bottom: 16px;
}

.setup-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 14px;
}

/* Team Selection */
.team-select-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.team-select-btn {
  appearance: none;
  flex: 1;
  max-width: 160px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 20px 16px;
  background: var(--surface2);
  border: 2px solid var(--border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.team-select-btn:hover {
  transform: translateY(-2px);
}

.team-select-btn.red:hover,
.team-select-btn.red.selected {
  border-color: var(--game-red);
  background: var(--game-red-bg);
}

.team-select-btn.blue:hover,
.team-select-btn.blue.selected {
  border-color: var(--game-blue);
  background: var(--game-blue-bg);
}

.team-select-color {
  width: 32px;
  height: 32px;
  border-radius: 50%;
}

.team-select-btn.red .team-select-color {
  background: var(--game-red);
}

.team-select-btn.blue .team-select-color {
  background: var(--game-blue);
}

.team-select-name {
  font-weight: 700;
  font-size: 14px;
  color: var(--text);
}

.team-select-vs {
  color: var(--text-dim);
  font-size: 12px;
  font-weight: 600;
}

.team-select-hint {
  text-align: center;
  font-size: 13px;
  color: var(--text-dim);
  margin-top: 12px;
}

/* Settings */
.settings-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Quick Play settings: more colorful + card-like rows */
.qp-settings-open{
  background: linear-gradient(135deg, rgba(59,130,246,0.28), rgba(168,85,247,0.22));
  border: 1px solid rgba(255,255,255,0.14);
}
.qp-settings-open:hover{
  background: linear-gradient(135deg, rgba(59,130,246,0.34), rgba(168,85,247,0.28));
}

.qp-settings-banner{
  display:flex;
  gap: 12px;
  align-items:flex-start;
  padding: 12px 12px;
  border-radius: 16px;
  background: linear-gradient(135deg, rgba(59,130,246,0.18), rgba(239,68,68,0.12));
  border: 1px solid rgba(255,255,255,0.10);
  margin-bottom: 14px;
}
.qp-settings-emoji{
  width: 42px;
  height: 42px;
  border-radius: 14px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  flex: 0 0 auto;
}
.qp-settings-title{ font-weight: 900; letter-spacing: 0.2px; }
.qp-settings-sub{ color: var(--text-dim); font-size: 13px; margin-top: 2px; line-height: 1.35; }

.qp-settings-grid{ gap: 10px; }
.qp-setting{
  padding: 12px 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.04);
  position: relative;
}
.qp-setting[data-accent="black"]{ --qp-accent: rgba(148,163,184,0.95); }
.qp-setting[data-accent="clue"]{ --qp-accent: rgba(168,85,247,0.95); }
.qp-setting[data-accent="guess"]{ --qp-accent: rgba(20,184,166,0.95); }
.qp-setting[data-accent="deck"]{ --qp-accent: rgba(59,130,246,0.95); }

.qp-setting-deck{ display:flex; flex-direction:column; gap: 10px; }
.qp-setting-deck .setting-label{ padding-left: 12px; }
.qp-deck-picker{
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-left: 12px;
}
.qp-deck-card{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap: 10px;
  padding: 10px 14px;
  min-width: 0;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.05);
  color: var(--text);
  cursor: pointer;
  transition: transform 120ms ease, background 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
  text-align:left;
}
.qp-deck-card:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.07); }
.qp-deck-card:active{ transform: translateY(0px); }
.qp-deck-card.disabled, .qp-deck-card:disabled{ opacity: 0.45; cursor: not-allowed; transform: none; }
.qp-deck-card[aria-checked="true"], .qp-deck-card.selected{
  border-color: rgba(59,130,246,0.55);
  box-shadow: 0 0 0 3px rgba(59,130,246,0.18), 0 14px 30px rgba(0,0,0,0.26);
  background: linear-gradient(135deg, rgba(59,130,246,0.16), rgba(168,85,247,0.12));
}
.qp-deck-emoji{
  width: 34px;
  height: 34px;
  border-radius: 12px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  flex: 0 0 auto;
}
.qp-deck-name{ font-weight: 800; }
.qp-deck-sub{ font-size: 12px; color: var(--text-dim); margin-top: 2px; }

.qp-setting .setting-label{
  font-weight: 700;
  padding-left: 12px;
}
.qp-setting .setting-select{
  min-width: 170px;
}

/* Quick Play negotiation (offer / accept) */
.qp-negotiation{
  margin-top: 14px;
  padding: 14px 14px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.12);
  background: radial-gradient(1200px 260px at 10% 0%, rgba(239,68,68,0.14), transparent 60%),
              radial-gradient(1200px 260px at 90% 0%, rgba(59,130,246,0.14), transparent 60%),
              rgba(255,255,255,0.04);
  box-shadow: 0 14px 40px rgba(0,0,0,0.28);
}

.qp-neg-head{ display:flex; align-items:center; justify-content: space-between; gap: 10px; }
.qp-neg-title{ font-weight: 950; letter-spacing: 0.2px; }
.qp-neg-chip{
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  display:inline-flex;
  align-items:center;
  gap: 8px;
}
.qp-neg-chip::before{
  content:"";
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.25);
}
.qp-negotiation[data-state="pending-red"] .qp-neg-chip{ background: rgba(239,68,68,0.14); border-color: rgba(239,68,68,0.22); }
.qp-negotiation[data-state="pending-red"] .qp-neg-chip::before{ background: rgba(239,68,68,0.9); box-shadow: 0 0 18px rgba(239,68,68,0.55); }
.qp-negotiation[data-state="pending-blue"] .qp-neg-chip{ background: rgba(59,130,246,0.14); border-color: rgba(59,130,246,0.22); }
.qp-negotiation[data-state="pending-blue"] .qp-neg-chip::before{ background: rgba(59,130,246,0.95); box-shadow: 0 0 18px rgba(59,130,246,0.55); }
.qp-negotiation[data-state="agreed"] .qp-neg-chip{ background: rgba(45,210,120,0.14); border-color: rgba(45,210,120,0.22); }
.qp-negotiation[data-state="agreed"] .qp-neg-chip::before{ background: rgba(45,210,120,0.95); box-shadow: 0 0 18px rgba(45,210,120,0.55); }
.qp-negotiation[data-state="no-team"] .qp-neg-chip{ opacity: 0.8; }

.qp-neg-rail{
  margin-top: 12px;
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 10px;
  align-items: stretch;
}
.qp-neg-team{
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.10);
  padding: 12px 12px;
  background: rgba(255,255,255,0.04);
}
.qp-neg-team-top{ display:flex; align-items:center; justify-content: space-between; gap: 10px; }
.qp-neg-team-name{ font-weight: 900; letter-spacing: 0.2px; }
.qp-neg-team-state{ margin-top: 8px; font-size: 13px; color: var(--text-dim); font-weight: 700; }
.qp-neg-dot{ width: 10px; height: 10px; border-radius: 999px; display:inline-block; }
.qp-neg-dot.red{ background: rgba(239,68,68,0.95); box-shadow: 0 0 18px rgba(239,68,68,0.45); }
.qp-neg-dot.blue{ background: rgba(59,130,246,0.95); box-shadow: 0 0 18px rgba(59,130,246,0.45); }
.qp-neg-team.red{ background: linear-gradient(135deg, rgba(239,68,68,0.10), rgba(255,255,255,0.03)); }
.qp-neg-team.blue{ background: linear-gradient(135deg, rgba(59,130,246,0.10), rgba(255,255,255,0.03)); }

.qp-neg-team[data-accepted="true"]{ border-color: rgba(45,210,120,0.30); }
.qp-neg-team[data-accepted="true"] .qp-neg-team-state{ color: rgba(180,255,220,0.95); }
.qp-neg-team[data-accepted="true"] .qp-neg-team-state::before{ content:"✓ "; }

.qp-neg-vs{
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 0 4px;
  font-size: 18px;
  opacity: 0.9;
}

.qp-neg-preview{
  margin-top: 12px;
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
}
.qp-neg-pill{
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  font-size: 12px;
  font-weight: 800;
  color: var(--text);
}
.qp-neg-pill.red{ background: rgba(239,68,68,0.10); border-color: rgba(239,68,68,0.18); }
.qp-neg-pill.blue{ background: rgba(59,130,246,0.10); border-color: rgba(59,130,246,0.18); }
.qp-neg-pill.purple{ background: rgba(168,85,247,0.10); border-color: rgba(168,85,247,0.18); }
.qp-neg-pill.teal{ background: rgba(20,184,166,0.10); border-color: rgba(20,184,166,0.18); }
.qp-neg-pill.slate{ background: rgba(148,163,184,0.10); border-color: rgba(148,163,184,0.18); }

.qp-neg-copy{ margin-top: 10px; }
.qp-neg-actions{ margin-top: 12px; display:flex; gap: 10px; }
.qp-neg-btn{ flex: 1 1 0; border-radius: 14px; }

@media (max-width: 520px){
  .qp-neg-rail{ grid-template-columns: 1fr; }
  .qp-neg-vs{ display:none; }
  .qp-neg-actions{ flex-direction: column; }
  .qp-neg-btn{ width: 100%; }
}

@media (max-width: 520px){
  .qp-setting{ flex-direction: column; align-items: stretch; }
  .qp-setting .setting-select{ width: 100%; min-width: 0; }
  .qp-setting .setting-label{ padding-left: 0; padding-top: 10px; }
}

.setting-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.setting-label {
  font-size: 14px;
  font-weight: 500;
}

.setting-select {
  width: auto;
  min-width: 140px;
  margin: 0;
}

/* Room Actions */
.room-actions {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.room-divider {
  display: flex;
  align-items: center;
  gap: 12px;
  color: var(--text-dim);
  font-size: 12px;
}

.room-divider::before,
.room-divider::after {
  content: "";
  flex: 1;
  height: 1px;
  background: var(--border);
}

.join-room-row {
  display: flex;
  gap: 10px;
}

.join-room-row .input {
  flex: 1;
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 2px;
  text-align: center;
  font-weight: 700;
}

@media (max-width: 520px) {
  .team-select-row {
    flex-direction: column;
    gap: 8px;
  }

  .team-select-btn {
    max-width: 100%;
    width: 100%;
    flex-direction: row;
    padding: 14px 16px;
    gap: 12px;
  }

  .team-select-color {
    width: 24px;
    height: 24px;
  }

  .team-select-vs {
    display: none;
  }

  .setting-row {
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
  }

  .setting-select {
    width: 100%;
  }
}

.segmented{
  display:flex;
  gap: 6px;
  padding: 6px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 999px;
}

.seg-btn{
  appearance:none;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text-dim);
  font-weight: 900;
  font-size: 12px;
  padding: 8px 12px;
  border-radius: 999px;
  cursor:pointer;
  transition: background 0.15s, border-color 0.15s, color 0.15s;
}

.seg-btn:hover{
  background: var(--surface2);
  border-color: rgba(255,255,255,0.10);
  color: var(--text);
}

.seg-btn.active{
  background: rgba(59,130,246,0.18);
  border-color: rgba(59,130,246,0.40);
  color: var(--text);
}

/* Unread badges (iMessage-style) */
.badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width: 14px;
  height: 14px;
  padding: 0 4px;
  border-radius: 999px;
  /* Red again, but less opaque than the classic alert badge. */
  background: rgba(239,68,68,0.48);
  border: 1px solid rgba(239,68,68,0.42);
  color: rgba(255,255,255,0.98);
  font-weight: 900;
  font-size: 9px;
  letter-spacing: -0.2px;
  line-height: 1;
  box-shadow: 0 4px 12px rgba(0,0,0,0.22);
}

/* Team modal: make the join/request button span the same width as member rows */
#team-modal .form-actions{
  flex-direction: column;
  align-items: stretch;
}

#team-modal-join{
  width: 100%;
  justify-content: center;
}

.desktop-tabs .tab,
.mobile-tabs .tab,
.seg-btn{
  position: relative;
}

.tab-badge{
  position:absolute;
  top: 6px;
  right: 10px;
}

.mobile-tabs .tab .tab-badge{
  top: 6px;
  right: 14px;
}

.seg-badge{
  position:absolute;
  top: -6px;
  right: -6px;
}

.chat-card{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  display:flex;
  flex-direction: column;
  gap: 12px;
  min-height: 68vh;
}

/* Mobile: keep the composer comfortably above bottom tabs */
@media (max-width: 768px){
  .panel-chat .chat-card{
    /* A bit taller so the chat reaches lower on mobile, while keeping the composer visible */
    min-height: 60vh;
    height: 60vh;
  }
}


/* Tournament (desktop): keep chat panel a fixed height so it doesn't grow with messages */
@media (min-width: 769px){
  body.tournament .panel-chat .chat-card{
    height: 68vh;
    max-height: 68vh;
  }
}

.chat-card .chat-messages{
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 10px;
}

.chat-messages{
  flex: 1 1 auto;
  max-height: none;
  overflow: auto;
  display:flex;
  flex-direction: column;
  gap: 6px;
  padding: 8px 6px;
}

.chat-msg{
  /* Minecraft-style: no bubbles, all left aligned */
  align-self: flex-start;
  width: 100%;
  max-width: 100%;
  background: transparent;
  border: none;
  border-radius: 0;
  padding: 0;
}

.chat-line{
  font-size: 13px;
  line-height: 1.35;
  white-space: pre-wrap;
  word-break: break-word;
}

.chat-who{
  font-weight: 900;
  color: rgba(255,255,255,0.88);
}

.chat-text{
  color: rgba(255,255,255,0.92);
}

.chat-compose{
  display:flex;
  gap: 10px;
  align-items: center;
}

.chat-input{ flex: 1 1 auto; margin: 0; }
.chat-send{ flex: 0 0 auto; }

/* Prettier invite list (My Team) */
#invites-list{ display:flex; flex-direction: column; gap: 10px; }
.invite-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding: 12px;
  border-radius: 12px;
  background: var(--surface2);
  border: 1px solid rgba(255,255,255,0.08);
}
.invite-left{ min-width: 0; }
.invite-title{ font-weight: 900; font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.invite-sub{ color: var(--text-dim); font-size: 12px; margin-top: 2px; }
.invite-actions{ display:flex; gap: 8px; flex: 0 0 auto; }

/* =========================
   Quick Play Lobby
========================= */
.quick-lobby-card{
  margin-top: 14px;
  padding: 18px;
  border-radius: 16px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.10);
  box-shadow: 0 12px 32px rgba(0,0,0,0.35);
}
.quick-lobby-top{
  display:flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 12px;
}
.quick-lobby-layout{
  margin-top: 14px;
  display:flex;
  gap: 16px;
  align-items: stretch;
}
.quick-team-col{
  flex: 1 1 0;
  min-width: 260px;
  border-radius: 14px;
  padding: 12px;
  background: rgba(0,0,0,0.30);
  border: 1px solid rgba(255,255,255,0.08);
  display:flex;
  flex-direction: column;
}
.quick-team-col.red{ border-color: rgba(255, 90, 90, 0.20); }
.quick-team-col.blue{ border-color: rgba(90, 140, 255, 0.20); }
.quick-team-col.spectator{ border-color: rgba(255,255,255,0.14); }

/* Spectators should not look like a boxed "card" (no border/background), but should still align with the grid. */
.quick-team-col.spectator{
  background: transparent;
  border: none;
}
.quick-team-col.spectator.selected{
  box-shadow: none;
}

.quick-team-col.selectable{
  cursor: pointer;
  user-select: none;
  transition: transform 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
}
.quick-team-col.selectable:hover{ transform: translateY(-1px); }
.quick-team-col.selectable:active{ transform: translateY(0px); }
.quick-team-col.selectable:focus{ outline: none; box-shadow: 0 0 0 2px rgba(255,255,255,0.10); }

.quick-team-col.selected{
  box-shadow: 0 0 0 2px rgba(255,255,255,0.10) inset;
}
.quick-team-col.red.selected{ border-color: rgba(255, 90, 90, 0.45); box-shadow: 0 0 0 2px rgba(255, 90, 90, 0.18) inset; }
.quick-team-col.blue.selected{ border-color: rgba(90, 140, 255, 0.45); box-shadow: 0 0 0 2px rgba(90, 140, 255, 0.18) inset; }
.quick-team-col.spectator.selectable:hover{ transform: none; }
.quick-team-col.spectator.selectable:active{ transform: none; }
.quick-team-col.spectator.selected{ border-color: rgba(255,255,255,0.22); box-shadow: none; }

.quick-team-head{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}
.quick-team-dot{
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex: 0 0 auto;
}
.quick-team-dot.red{ background: var(--game-red); box-shadow: 0 0 14px rgba(255,90,90,0.30); }
.quick-team-dot.blue{ background: var(--game-blue); box-shadow: 0 0 14px rgba(90,140,255,0.30); }
.quick-team-dot.spectator{ background: rgba(255,255,255,0.55); box-shadow: 0 0 12px rgba(255,255,255,0.12); }
.quick-team-title{ font-weight: 900; letter-spacing: 0.3px; font-size: 13px; }
.quick-team-count{
  font-weight: 900;
  color: var(--text-dim);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
}

.quick-team-status {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 0 12px 8px;
  min-height: 22px;
}

/* Quick Play: choose Operatives vs Spymasters inside the team box */
/* These are used as section headers (clickable), not a separate row of buttons. */
.quick-seat-choice{
  /* Section headers (Spymasters / Operatives) should read like headers, not like player "pills". */
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  width: 100%;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: 0.35px;
  padding: 4px 2px;
  border-radius: 0;
  background: transparent;
  border: none;
  user-select: none;
  cursor: pointer;
  opacity: 0.85;
  transition: opacity 120ms ease, color 120ms ease;
}
.quick-seat-choice:focus{ outline: none; box-shadow: 0 0 0 2px rgba(255,255,255,0.12); border-radius: 8px; }
.quick-seat-choice:hover{ opacity: 1; text-decoration: underline; text-underline-offset: 4px; }
.quick-seat-choice:active{ opacity: 1; }
.quick-team-col.red .quick-seat-choice.selected{
  color: rgba(255, 120, 120, 0.95);
  opacity: 1;
}
.quick-team-col.blue .quick-seat-choice.selected{
  color: rgba(150, 190, 255, 0.95);
  opacity: 1;
}

.quick-role-lists{
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.quick-role-section{
  padding: 0;
  border-radius: 0;
  background: transparent;
  border: none;
}
.quick-role-title{
  /* When combined with .quick-seat-choice this becomes the clickable section header */
  margin-bottom: 10px;
}
.quick-role-divider{
  height: 1px;
  width: 100%;
  background: rgba(255,255,255,0.10);
  margin: 4px 0;
}
.quick-team-status:empty {
  display: none;
}
.quick-status-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 999px;
  font-weight: 500;
  opacity: 0.85;
}
.quick-status-chip.agreed {
  background: rgba(80, 200, 120, 0.18);
  color: #50c878;
}
.quick-status-chip.not-agreed {
  background: rgba(255, 180, 50, 0.15);
  color: #ffb432;
}
.quick-status-chip.all-ready {
  background: rgba(80, 200, 120, 0.22);
  color: #50c878;
  font-weight: 600;
}
.quick-status-chip.not-ready {
  background: rgba(255, 255, 255, 0.08);
  color: rgba(255, 255, 255, 0.5);
}

.quick-team-list{
  display:flex;
  flex-direction: column;
  gap: 8px;
  flex: 1 1 auto;
  overflow:auto;
  padding-right: 4px;
}
.quick-empty{ color: var(--text-dim); font-size: 12px; padding: 8px 2px; }

.quick-player{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 12px;
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.08);
}
.quick-player.ready{
  border-color: rgba(45, 210, 120, 0.35);
  box-shadow: 0 0 0 1px rgba(45, 210, 120, 0.10) inset;
}
.quick-player-name{ font-weight: 800; font-size: 13px; min-width: 0; overflow:hidden; text-overflow: ellipsis; white-space: nowrap; }
.quick-you{ color: var(--text-dim); font-weight: 700; }
.quick-player-badge{
  font-size: 11px;
  letter-spacing: 0.8px;
  font-weight: 900;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  color: var(--text-dim);
  flex: 0 0 auto;
}
.quick-player.ready .quick-player-badge{
  color: rgba(180, 255, 220, 0.95);
  border-color: rgba(45, 210, 120, 0.35);
  background: rgba(45, 210, 120, 0.12);
}

.quick-lobby-status{
  font-weight: 900;
  letter-spacing: 0.2px;
  margin-bottom: 12px;
}

.quick-lobby-controls{
  margin-top: 14px;
  display:flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
  text-align: center;
}

.quick-player.spectator{ justify-content: flex-start; }

.quick-lobby-actions{ width: 100%; display:flex; gap: 10px; margin-top: 4px; }
.quick-lobby-actions .btn{ flex: 1 1 0; }

.quick-rules-bar{
  width: 100%;
  display:flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 16px;
  background: radial-gradient(900px 220px at 20% 0%, rgba(168,85,247,0.10), transparent 60%),
              radial-gradient(900px 220px at 80% 0%, rgba(20,184,166,0.10), transparent 60%),
              var(--card);
}

.quick-rules-summary{
  display:flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  color: var(--text);
  opacity: 0.95;
  text-align: left;
}

.qp-rules-badge{
  padding: 5px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 0.2px;
  display:inline-flex;
  align-items:center;
  gap: 8px;
  flex: 0 0 auto;
}
.qp-rules-badge::before{
  content:"";
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.25);
}
.qp-rules-badge[data-state="pending-red"]{ background: rgba(239,68,68,0.12); border-color: rgba(239,68,68,0.22); }
.qp-rules-badge[data-state="pending-red"]::before{ background: rgba(239,68,68,0.95); box-shadow: 0 0 16px rgba(239,68,68,0.50); }
.qp-rules-badge[data-state="pending-blue"]{ background: rgba(59,130,246,0.12); border-color: rgba(59,130,246,0.22); }
.qp-rules-badge[data-state="pending-blue"]::before{ background: rgba(59,130,246,0.95); box-shadow: 0 0 16px rgba(59,130,246,0.50); }
.qp-rules-badge[data-state="agreed"]{ background: rgba(45,210,120,0.12); border-color: rgba(45,210,120,0.22); }
.qp-rules-badge[data-state="agreed"]::before{ background: rgba(45,210,120,0.95); box-shadow: 0 0 16px rgba(45,210,120,0.50); }
.qp-rules-text{ color: var(--text); opacity: 0.92; }
.qp-rules-text.rules-agreed{
  background: linear-gradient(90deg, #2dd87a 0%, #50c878 50%, #7deb9a 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  opacity: 1;
}

.quick-rules-actions{
  display:flex;
  gap: 8px;
  flex: 0 0 auto;
}

/* Subtle attention when an inline Accept button appears */
#quick-rules-accept-btn{
  position: relative;
}
#quick-rules-accept-btn:not([style*="display:none"]){
  box-shadow: 0 0 0 0 rgba(45,210,120,0.30);
  animation: qpAcceptPulse 1.8s ease-out infinite;
}
@keyframes qpAcceptPulse{
  0%{ box-shadow: 0 0 0 0 rgba(45,210,120,0.26); }
  70%{ box-shadow: 0 0 0 10px rgba(45,210,120,0.0); }
  100%{ box-shadow: 0 0 0 0 rgba(45,210,120,0.0); }
}

@media (max-width: 420px){
  .quick-rules-bar{ align-items: flex-start; flex-direction: column; }
  .quick-rules-actions{ width: 100%; }
  .quick-rules-actions .btn{ flex: 1 1 0; }
}

/* Modal */
.modal{
  position: fixed;
  inset: 0;
  z-index: 2000;
  /* Let the modal itself scroll on small screens */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px 12px;
}
.modal-backdrop{
  position: absolute;
  inset: 0;
  /* Opaque enough that the app behind doesn't bleed through on mobile */
  background: rgba(0,0,0,0.80);
}
.modal-card{
  position: relative;
  width: min(560px, calc(100vw - 24px));
  margin: 0;
  margin-top: -5vh;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: 0 20px 70px rgba(0,0,0,0.45);
  overflow: hidden;
  /* Ensure the card is fully opaque and scrolls internally when needed */
  opacity: 1;
  max-height: calc(100vh - 96px);
  display: flex;
  flex-direction: column;
}
.modal-head{
  display:flex;
  align-items:center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}

/* Quick Play settings modal: a bit more pop */
#quick-settings-modal {
  align-items: center;
}
#quick-settings-modal .modal-card{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00)), var(--card);
  margin: 0;
  margin-top: -5vh;
  width: min(460px, calc(100vw - 24px));
  max-height: calc(100vh - 140px);

}
#quick-settings-modal .modal-head{
  background: linear-gradient(135deg, rgba(59,130,246,0.18), rgba(168,85,247,0.14));
  border-bottom: 1px solid rgba(255,255,255,0.12);
}
#quick-settings-modal .icon-btn:hover{ background: rgba(0,0,0,0.10); }
/* Quick Play settings: compact modal */
#quick-settings-modal .modal-card{
  width: min(460px, calc(100vw - 24px));
  max-height: calc(100vh - 120px);
}
#quick-settings-modal .modal-head{
  padding: 12px 14px;
}
#quick-settings-modal .modal-body{
  padding: 12px 14px 14px;
}
#quick-settings-modal .qp-settings-banner{
  padding: 10px 10px;
  margin-bottom: 10px;
}
#quick-settings-modal .qp-settings-emoji{
  width: 38px;
  height: 38px;
  border-radius: 12px;
}
#quick-settings-modal .qp-settings-sub{
  font-size: 12px;
}

/* Make Quick Play settings less tall (fit more above the fold) */
#quick-settings-modal .qp-settings-grid{ gap: 6px; }
#quick-settings-modal .qp-setting{ padding: 10px 10px; border-radius: 14px; }

/* Deck picker: use a compact grid instead of a tall column list */
#quick-settings-modal .qp-setting-deck{ gap: 8px; }
#quick-settings-modal .qp-setting-deck .setting-label{ padding-left: 0; }
#quick-settings-modal .qp-deck-picker{
  padding-left: 0;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 8px;
}
#quick-settings-modal .qp-deck-card{ padding: 8px 10px; border-radius: 12px; gap: 8px; }
#quick-settings-modal .qp-deck-emoji{ width: 28px; height: 28px; border-radius: 10px; }

#quick-settings-modal .qp-negotiation{ margin-top: 8px; padding: 8px 10px; border-radius: 14px; }

/* Quick Play settings modal is intentionally compact */
#quick-settings-modal .qp-neg-copy{ margin-top: 8px; }
#quick-settings-modal .qp-neg-actions{ margin-top: 8px; gap: 8px; }
#quick-settings-modal .qp-neg-btn{ border-radius: 12px; }

.modal-title{ font-weight: 900; letter-spacing: 0.2px; }
.modal-body{
  padding: 14px 16px 4px;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  flex: 1 1 auto;
}
.modal-actions{
  display:flex;
  gap: 10px;
  padding: 12px 16px 16px;
  justify-content: flex-end;
  flex-wrap: wrap;
}
.modal-actions .btn{ min-width: 140px; }
.icon-btn{
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  border-radius: 12px;
  height: 36px;
  width: 36px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor: pointer;
}
.icon-btn:hover{ background: rgba(255,255,255,0.06); }

@media (max-width: 520px){
  .modal{ padding: 10px 10px; }
  .modal-card{
    width: min(560px, calc(100vw - 16px));
    margin: 0;
    margin-top: -5vh;
    max-height: calc(100vh - 24px);
  }
}

@media (max-width: 900px){
  .quick-lobby-layout{ flex-direction: column; }
  .quick-team-col{ min-width: 0; }
}

/*
  Quick Play lobby on mobile:
  - Fit within the viewport (no page scrolling)
  - Keep controls visible
  - Allow *internal* scrolling inside player lists if needed
*/
@media (max-width: 768px){
  /* Tabs are hidden in Quick Play mode, so remove the extra bottom padding reserved for them. */
  body.quickplay .panel-game .panel-inner{
    padding: 14px;
    padding-bottom: max(14px, env(safe-area-inset-bottom));
    height: 100%;
    min-height: 0;
  }

  /* Avoid page scroll; the lobby itself manages its layout and internal scroll areas. */
  body.quickplay .panel-game{
    overflow: hidden;
  }

  body.quickplay #quick-play-lobby{
    display: flex;
    flex-direction: column;
    height: 100%;
    min-height: 0;
  }

  /* Save vertical space: the panel already has a title via the app header. */
  body.quickplay #quick-play-lobby .lobby-header{
    display: none;
  }

  body.quickplay .quick-setup{
    display: flex;
    flex-direction: column;
    gap: 10px;
    flex: 1 1 auto;
    min-height: 0;
  }

  body.quickplay .quick-lobby-card{
    margin-top: 0;
    padding: 12px;
    border-radius: 16px;
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  body.quickplay .quick-lobby-top{
    margin-bottom: 8px;
  }

  /* Use a compact grid: Red/Blue side-by-side, Spectators underneath spanning full width. */
  body.quickplay .quick-lobby-layout{
    margin-top: 10px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr auto;
    gap: 10px;
    align-items: stretch;
    flex: 1 1 auto;
    min-height: 0;
  }

  body.quickplay .quick-team-col{
    padding: 10px;
    border-radius: 14px;
    min-width: 0;
    min-height: 0;
    overflow: hidden;
  }

  body.quickplay .quick-team-col.red{ grid-column: 1; grid-row: 1; }
  body.quickplay .quick-team-col.blue{ grid-column: 2; grid-row: 1; }

  body.quickplay .quick-team-col.spectator{
    grid-column: 1 / span 2;
    grid-row: 2;
    border: 1px solid rgba(255,255,255,0.10);
    border-radius: 14px;
    padding: 10px;
    background: rgba(0,0,0,0.22);
  }

  body.quickplay .quick-team-head{ margin-bottom: 8px; }
  body.quickplay .quick-team-title{ font-size: 12px; }

  /* Make player rows slightly tighter on phones */
  body.quickplay .quick-player{ padding: 8px 9px; border-radius: 12px; }
  body.quickplay .quick-player-name{ font-size: 12px; }
  body.quickplay .quick-player-badge{ font-size: 10px; padding: 3px 7px; }

  /* Let the lists scroll internally if needed; keep the overall lobby fixed. */
  body.quickplay .quick-team-list{
    min-height: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Keep controls compact and always visible */
  body.quickplay .quick-lobby-controls{
    margin-top: 0;
    gap: 8px;
  }

  body.quickplay .quick-lobby-status{
    margin-bottom: 6px;
    font-size: 13px;
  }

  body.quickplay .quick-rules-bar{
    padding: 8px 10px;
    border-radius: 14px;
  }

  body.quickplay .quick-rules-summary{
    font-size: 13px;
  }
}

/* Extra-tight phones (e.g., iPhone SE): squeeze spacing a bit more */
@media (max-width: 380px){
  body.quickplay .panel-game .panel-inner{ padding: 12px; padding-bottom: max(12px, env(safe-area-inset-bottom)); }
  body.quickplay .quick-lobby-layout{ gap: 8px; }
  body.quickplay .quick-team-col{ padding: 9px; }
  body.quickplay .quick-lobby-actions{ gap: 8px; }
}

@media (max-width: 520px){
  .modal{ padding: 10px; }
  .modal-card{ margin: 0; margin-top: -5vh; max-height: calc(100vh - 86px); }
}

@media (min-width: 901px){
  /* Make the lobby columns taller on desktop */
  .quick-team-col{ min-height: 52vh; }
}

/* =========================
   Launch screen
========================= */
body.launch .desktop-tabs,
body.launch .mobile-tabs,
body.launch .main-content {
  display: none !important;
}

/* On launch, keep the top band visible and pin it to the top */
body.launch .app-header{
  display: flex !important;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
}

/* Quick Play: keep the top band, but hide navigation tabs */
body.quickplay .desktop-tabs,
body.quickplay .mobile-tabs {
  display: none !important;
}
body.quickplay .main-content {
  display: block !important;
}

.launch-screen{
  position: fixed;
  top: 64px;
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: clamp(22px, 4vw, 64px);
}

.launch-card{
  width: 100%;
  /* Match the reference: content sits directly on the background (no giant outer card) */
  max-width: 980px;
  border-radius: 0;
  padding: 0;
  background: transparent;
  border: none;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  gap: 18px;
  margin: 0 auto;
}

.launch-hero{
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-top: 6px;
}

.launch-h1{
  margin: 0;
  font-size: 30px;
  font-weight: 900;
  letter-spacing: 0.2px;
}

.launch-sub{
  margin: 0;
  color: var(--text-dim);
  font-size: 13px;
}

.launch-mode-row{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
  margin-top: 30px;
}

/* Bigger, more spacious mode buttons on the launch screen */
.launch-screen .mode-card{
  /* Reference sizing */
  border-radius: 20px;
  padding: 26px 22px;
  min-height: 180px;
}

.launch-screen .mode-card-icon{
  font-size: 52px;
}

.launch-screen .mode-card-title{
  font-size: 20px;
}

.launch-screen .mode-card-desc{
  font-size: 13px;
}

/* Name dock on launch mirrors the Home name dock */
.launch-name-dock{
  width: 100%;
  max-width: 520px;
  /* Much lower on the choose screen (must override .name-dock defaults) */
  margin-left: auto;
  margin-right: auto;
  /* Near the middle of the screen on desktop (not pinned to the bottom) */
  margin-top: clamp(50px, 8vh, 120px) !important;
  margin-bottom: 0;
  align-self: center;
  text-align: center;
}

/* Give the Save button more breathing room from the input (matches reference) */
.launch-name-dock .name-dock-form .form-actions{
  margin-top: 16px !important; /* overrides inline margin:0 in HTML */
  gap: 10px;
}

/* Center the entire name UI on the launch screen (matches Home) */
.launch-name-dock .field{
  align-items: center;
}
.launch-name-dock .label{
  text-align: center;
}
.launch-name-dock .input{
  text-align: center;
}
.launch-name-dock .name-dock-value{
  text-align: center;
}


@media (max-width: 768px){
  .launch-screen{ top: 56px; }
}

@media (max-width: 640px){
  .launch-card{ padding: 0; }
  .launch-mode-row{ grid-template-columns: 1fr; }
  .launch-screen .mode-card{ min-height: 140px; padding: 22px 18px; }
  .launch-screen .mode-card-icon{ font-size: 44px; }
  .launch-h1{ font-size: 28px; }
}

.btn.disabled,
button:disabled{
  opacity: .5;
  cursor: not-allowed;
}

/* ==================== POLISH OVERRIDES ==================== */

.home-hero{ margin-bottom: 14px; }
.home-title{ font-size: 30px; letter-spacing: 0.2px; }

/* Member boxes in modals + My Team: give them room and keep them slim */
.players-list{
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.player-row{
  padding: 6px 10px;
  border-radius: 6px;
}

/* Team action button should be full width inside the modal */
#team-modal-join{
  width: 100%;
  justify-content: center;
}

/* Name dock: bottom on mobile, unobtrusive card on desktop */
.name-dock{
  width: 100%;
  /* Push the name entry lower + make it sleeker */
  margin-top: 30px;
  padding: 9px 10px;
  border-radius: 12px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.10);
  backdrop-filter: blur(10px);
}

.name-dock-saved{ display:block; }
.name-saved-stack{
  display:flex;
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
}
.name-dock-label{ color: var(--text-dim); font-size: 11px; letter-spacing: 0.12em; text-transform: uppercase; }
.name-dock-value{ font-size: 16px; font-weight: 700; cursor:pointer; user-select:none; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.name-dock-form .input{ margin-bottom: 0; }
.name-dock-form .form-actions{ justify-content: flex-end; gap: 10px; }

/* Prettier first-time name entry */
.name-dock-form .label{ font-size: 11px; letter-spacing: 0.10em; text-transform: uppercase; }
.name-dock-form .input{ font-size: 12px; padding: 9px 12px; border-radius: 10px; }
.name-dock-form .form-actions{
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  gap: 8px;
  margin-top: 8px;
}
.name-dock-form .btn.primary{
  width: 100%;
  justify-content: center;
  padding: 9px 14px;
  background: rgba(59,130,246,0.72);
  border-color: rgba(59,130,246,0.28);
}
.name-dock-form .hint{ font-size: 12px; }

/* Logout button sits under the name on Home (matches input width) */
.btn.logout{
  width: 100%;
  justify-content: center;
  padding: 9px 14px;
  border-radius: 10px;
  background: rgba(239,68,68,0.18);
  border: 1px solid rgba(239,68,68,0.28);
  color: #fff;
  font-weight: 800;
}
.btn.logout:hover{
  background: rgba(239,68,68,0.26);
  border-color: rgba(239,68,68,0.36);
}


@media (max-width: 768px){
  /* Keep name always reachable on Home */
  #panel-home .panel-inner{ padding-bottom: 110px; }
  #panel-home .name-dock{
    position: sticky;
    bottom: 66px; /* above mobile tabs */
  }
}

@media (min-width: 769px){
  /* On desktop, rely on top-right header name; keep dock subtle */
  #panel-home .home-hero{ margin-top: 18px; }
  /* Pull the name card up a bit so it's not hugging the bottom */
  #panel-home .name-dock{ max-width: 520px; margin-top: 22px; margin-bottom: 6px; }
}

/* Nudge the Tournament Home hero area up on desktop (better vertical balance) */
@media (min-width: 769px){
  body.tournament #panel-home .panel-inner{
    transform: translateY(-74px);
  }
}

/* Teams page: sharp clickable list */

/* Team color indicators (visible to everyone) */
.team-color-dot{
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: var(--dot-color, rgba(255,255,255,0.18));
  box-shadow: 0 0 0 1px rgba(255,255,255,0.18);
  display: inline-block;
  flex: 0 0 auto;
}
.team-color-dot.sm{ width: 10px; height: 10px; }
.team-color-dot.muted{ background: rgba(255,255,255,0.14); }

.team-list-name{ display:flex; align-items:center; gap: 8px; }
.team-list-name-text{ min-width: 0; overflow:hidden; text-overflow: ellipsis; white-space: nowrap; }

.team-title-inline{ display:inline-flex; align-items:center; gap: 10px; }


.team-list-item{
  width: 100%;
  appearance: none;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  border-radius: 12px;
  padding: 12px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  text-align: left;
  cursor: pointer;
}

.team-list-item:hover{ background: var(--surface2); }

/* Highlight your current team in the list (very subtle) */
.team-list-item.is-mine{
  border-color: rgba(255,255,255,0.05);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.03);
}

/* In Tournament, outline your team row using your team's color */
body.tournament.has-team-color .team-list-item.is-mine{
  border-color: color-mix(in srgb, var(--team-accent) 20%, transparent);
  /* Softer glow on the Teams tab */
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--team-glow) 15%, transparent);
}

.team-list-left{ min-width: 0; }
.team-list-name{ font-size: 14px; font-weight: 700; letter-spacing: 0.1px; }
.team-list-members{
  margin-top: 3px;
  font-size: 12px;
  color: var(--text-dim);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.team-list-right{ flex: 0 0 auto; }
.team-list-count{
  font-size: 12px;
  font-weight: 700;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  opacity: 0.9;
}

/* Full team (3+ members) green pill */
.team-list-count.pill-full{
  border-color: rgba(34, 197, 94, 0.5);
  background: rgba(34, 197, 94, 0.12);
  color: rgba(34, 197, 94, 1);
}

/* Incomplete team (less than 3 members) red pill */
.team-list-count.pill-incomplete{
  border-color: rgba(239, 68, 68, 0.5);
  background: rgba(239, 68, 68, 0.12);
  color: rgba(239, 68, 68, 1);
}

/* Full team (3+ members) outline effect on the entire team row (thin, dimmed) */
.team-list-item.is-full{
  border: 1px solid var(--team-accent, rgba(34, 197, 94, 0.2));
}

/* Teams page: subtle eligibility tint (very low opacity, dimmed) */
.panel-teams .team-list-item.is-full{
  background: rgba(34, 197, 94, 0.015);
}

.panel-teams .team-list-item:not(.is-full){
  background: rgba(239, 68, 68, 0.01);
}

/* Teams page cards */
.team-card-expanded{ padding: 14px; }
.team-card-expanded .team-summary{ cursor: default; }
.team-body-compact{ margin-top: 12px; }
.team-actions{ display:flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.team-actions .hint{ min-height: 18px; }

/* My Team footer buttons */
.myteam-footer{
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid rgba(255,255,255,0.08);
  display:flex;
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
}
.myteam-footer .btn{ width: 100%; justify-content: center; }
.myteam-footer .icon-btn{
  width: 42px;
  height: 42px;
  border-radius: 12px;
}
.myteam-footer .icon-btn svg{ width: 18px; height: 18px; }

/* Floating chat button on My Team card */
.floating-chat{
  position: absolute;
  right: 14px;
  bottom: -22px;
  width: 46px;
  height: 46px;
  border-radius: 16px;
  background: rgba(59,130,246,0.16);
  border-color: rgba(59,130,246,0.28);
  box-shadow: 0 10px 26px rgba(0,0,0,0.35);
}
.floating-chat:hover{ filter: brightness(1.08); }
.floating-chat:disabled{ opacity: 0.45; filter: none; }

/* Players directory */

.team-badge{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 800;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  color: var(--text-dim);
  flex: 0 0 auto;
}
.team-badge .team-color-dot{ width: 8px; height: 8px; }

.state-pill{
  font-size: 11px;
  font-weight: 800;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  color: var(--text-dim);
  flex: 0 0 auto;
}
.state-pill.pending{ border-color: rgba(250,204,21,0.35); color: rgba(250,204,21,0.95); background: rgba(250,204,21,0.08); }
.state-pill.ok{ border-color: rgba(34,197,94,0.35); color: rgba(34,197,94,0.95); background: rgba(34,197,94,0.08); }


.players-directory{ display:flex; flex-direction: column; gap: 10px; }

/* Directory rows: name + team on the left, status/actions on the right */
.player-directory-row{ align-items: center; }
.player-directory-row .player-left{
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  gap: 4px;
  width: auto;
}
.player-directory-row .player-right{
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
  flex: 0 0 auto;
}
.player-meta{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-dim);
}
.player-meta-label{ color: var(--text-dim); }

.player-team{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 800;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  color: var(--text-dim);
  background: rgba(255,255,255,0.04);
  flex: 0 0 auto;
}
.player-team-name{ max-width: 140px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.player-tag{
  font-size: 10px;
  font-weight: 900;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.03);
  color: var(--text-dim);
}
.player-tag.ok{ border-color: rgba(34,197,94,0.35); color: rgba(34,197,94,0.95); background: rgba(34,197,94,0.08); }
.player-tag.pending{ border-color: rgba(250,204,21,0.35); color: rgba(250,204,21,0.95); background: rgba(250,204,21,0.08); }

/* Pill-style action buttons (used in Players directory) */
button.player-tag.pill-action{
  appearance: none;
  -webkit-appearance: none;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 2px 6px;
  font-size: 10px;
  font-weight: 900;
  line-height: 1.7;
  cursor: pointer;
  user-select: none;
}
button.player-tag.pill-action.invite{
  background: rgba(59,130,246,0.82);
  border-color: rgba(59,130,246,0.55);
  color: rgba(255,255,255,0.98);
}
button.player-tag.pill-action.invite:hover{ filter: brightness(1.05); }
button.player-tag.pill-action.cancel{
  background: rgba(239,68,68,0.82);
  border-color: rgba(239,68,68,0.55);
  color: rgba(255,255,255,0.98);
}
button.player-tag.pill-action.cancel:hover{ filter: brightness(1.05); }
button.player-tag.pill-action:disabled{
  opacity: 0.55;
  cursor: not-allowed;
  filter: none;
}
.player-status{
  font-size: 11px;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  color: var(--text-dim);
  background: rgba(255,255,255,0.04);
  flex: 0 0 auto;
}
.player-status.ok{ border-color: rgba(34,197,94,0.35); color: rgba(34,197,94,0.95); background: rgba(34,197,94,0.08); }
.player-status.pending{ border-color: rgba(250,204,21,0.35); color: rgba(250,204,21,0.95); background: rgba(250,204,21,0.08); }
.player-status.busy{ border-color: rgba(255,255,255,0.12); color: var(--text-dim); }

/* ==================== CODENAMES GAME ==================== */

/* Game Colors */
:root {
  --game-red: #dc2626;
  --game-red-bg: rgba(220, 38, 38, 0.15);
  --game-red-border: rgba(220, 38, 38, 0.4);
  --game-blue: #2563eb;
  --game-blue-bg: rgba(37, 99, 235, 0.15);
  --game-blue-border: rgba(37, 99, 235, 0.4);
  --game-neutral: #71717a;
  --game-neutral-bg: rgba(113, 113, 122, 0.15);
  --game-neutral-border: rgba(113, 113, 122, 0.4);
  --game-assassin: #18181b;
  --game-assassin-bg: rgba(24, 24, 27, 0.9);
  --game-assassin-border: rgba(255, 255, 255, 0.2);
}

/* Game Panel */
.panel-game .panel-inner {
  max-width: 900px;
}

/* Game Lobby */
#game-lobby h2 {
  font-size: 20px;
  margin-bottom: 4px;
}

.game-team-status {
  margin: 16px 0;
  padding: 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
}

.game-team-status .team-info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.game-team-status .team-name {
  font-weight: 700;
  font-size: 16px;
}

.game-active-banner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 14px;
  margin-bottom: 16px;
  background: rgba(34, 197, 94, 0.12);
  border: 1px solid rgba(34, 197, 94, 0.3);
  border-radius: 12px;
}

.game-banner-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.game-banner-title {
  font-weight: 700;
  color: var(--green);
}

.game-banner-teams {
  font-size: 13px;
  color: var(--text-dim);
}

.game-section {
  margin-top: 20px;
}

.game-section-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}

.challenges-list,
.challenge-teams-list,
.pending-challenges-list,
.active-games-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.challenge-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
}

.challenge-row.incoming {
  border-color: rgba(250, 204, 21, 0.35);
  background: rgba(250, 204, 21, 0.06);
}

.challenge-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.challenge-team-name {
  font-weight: 700;
  font-size: 14px;
}

.challenge-meta {
  font-size: 12px;
  color: var(--text-dim);
}

.challenge-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

/* Game Header */
.game-header {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 16px;
  padding: 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
}

.game-teams-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
}

.game-team {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  border-radius: 10px;
}

.game-team.red {
  background: var(--game-red-bg);
  border: 1px solid var(--game-red-border);
}

.game-team.blue {
  background: var(--game-blue-bg);
  border: 1px solid var(--game-blue-border);
}

.game-team .team-name {
  font-weight: 700;
  font-size: 14px;
}

.game-team .cards-left {
  font-size: 20px;
  font-weight: 800;
}

.game-team.red .cards-left { color: var(--game-red); }
.game-team.blue .cards-left { color: var(--game-blue); }

.game-vs {
  color: var(--text-dim);
  font-size: 12px;
  font-weight: 600;
}

.game-turn-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 14px;
}

.turn-label {
  color: var(--text-dim);
}

.turn-team {
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 6px;
}

.turn-team.red {
  background: var(--game-red-bg);
  color: var(--game-red);
}

.turn-team.blue {
  background: var(--game-blue-bg);
  color: var(--game-blue);
}

.turn-role {
  color: var(--text-dim);
  font-size: 13px;
}

/* Role Selection */
.role-selection {
  padding: 20px;
  margin-bottom: 16px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  text-align: center;
}

.role-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 16px;
}

.role-buttons {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

.role-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 16px 24px;
  min-width: 140px;
  background: var(--surface2);
  border: 2px solid var(--border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.role-btn:hover {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.1);
}

.role-btn.selected {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.15);
}

.role-btn.taken {
  opacity: 0.5;
  cursor: not-allowed;
}

.role-icon {
  font-size: 28px;
}

.role-name {
  font-weight: 700;
  font-size: 15px;
}

.role-desc {
  font-size: 11px;
  color: var(--text-dim);
}

.role-status {
  margin-top: 14px;
  font-size: 13px;
  color: var(--text-dim);
}

/* Game Board */
.game-board {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
  margin-bottom: 16px;
}

.game-card {
  aspect-ratio: 1.4;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s;
  position: relative;
  overflow: hidden;
}

.game-card:hover:not(.revealed):not(.disabled) {
  border-color: var(--accent);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.game-card.disabled {
  cursor: default;
}

.game-card .card-word {
  font-size: 12px;
  font-weight: 700;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  word-break: break-word;
  line-height: 1.2;
}

/* Spymaster View - Color overlay */
.game-card.spymaster-view.card-red {
  background: var(--game-red-bg);
  border-color: var(--game-red-border);
}

.game-card.spymaster-view.card-blue {
  background: var(--game-blue-bg);
  border-color: var(--game-blue-border);
}

.game-card.spymaster-view.card-neutral {
  background: var(--game-neutral-bg);
  border-color: var(--game-neutral-border);
}

.game-card.spymaster-view.card-assassin {
  background: var(--game-assassin-bg);
  border-color: var(--game-assassin-border);
}

.game-card.spymaster-view.card-assassin .card-word {
  color: #ef4444;
}

/* Revealed Cards */
.game-card.revealed {
  cursor: default;
}

.game-card.revealed.card-red {
  background: var(--game-red);
  border-color: var(--game-red);
}

.game-card.revealed.card-blue {
  background: var(--game-blue);
  border-color: var(--game-blue);
}

.game-card.revealed.card-neutral {
  background: var(--game-neutral);
  border-color: var(--game-neutral);
}

.game-card.revealed.card-assassin {
  background: #000;
  border-color: #ef4444;
}

.game-card.revealed .card-word {
  color: #fff;
}

/* Clue Area */
.clue-area {
  padding: 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-bottom: 16px;
}

.current-clue {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size: 16px;
}

.clue-label {
  color: var(--text-dim);
}

.clue-word {
  font-weight: 800;
  font-size: 20px;
  text-transform: uppercase;
}

.clue-number {
  background: var(--accent);
  color: #fff;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 14px;
}

.guesses-left {
  color: var(--text-dim);
  font-size: 13px;
  margin-left: 8px;
}

.clue-form {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

.clue-input {
  flex: 1;
  min-width: 120px;
  margin: 0;
}

.clue-num-input {
  width: 60px;
  margin: 0;
  text-align: center;
}

.operative-actions {
  display: flex;
  justify-content: center;
}

.waiting-message {
  text-align: center;
  color: var(--text-dim);
  font-size: 14px;
  padding: 8px 0;
}

/* Game Log */
.game-log {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 16px;
  max-height: 200px;
  overflow-y: auto;
}

.game-log-title {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.game-log-entries {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.log-entry {
  font-size: 13px;
  line-height: 1.4;
  padding: 4px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.log-entry:last-child {
  border-bottom: none;
}

.log-entry .log-team {
  font-weight: 700;
}

.log-entry .log-team.red { color: var(--game-red); }
.log-entry .log-team.blue { color: var(--game-blue); }

.log-entry .log-clue {
  font-weight: 600;
  text-transform: uppercase;
}

.log-entry .log-result {
  color: var(--text-dim);
}

/* Game Actions */
.game-actions {
  display: flex;
  justify-content: center;
  gap: 12px;
}

/* Game End Modal */
.game-end-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.game-end-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 30px;
  text-align: center;
  max-width: 340px;
  width: 100%;
}

.game-end-title {
  font-size: 28px;
  font-weight: 800;
  margin-bottom: 8px;
}

.game-end-title.win { color: var(--green); }
.game-end-title.lose { color: var(--red); }

.game-end-subtitle {
  font-size: 16px;
  color: var(--text-dim);
  margin-bottom: 20px;
}

.game-end-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .game-board {
    gap: 6px;
  }

  .game-card {
    border-radius: 8px;
  }

  .game-card .card-word {
    font-size: 10px;
  }

  .game-teams-display {
    flex-wrap: wrap;
  }

  .game-team {
    padding: 6px 10px;
  }

  .game-team .team-name {
    font-size: 12px;
  }

  .game-team .cards-left {
    font-size: 16px;
  }

  .role-buttons {
    flex-direction: column;
  }

  .role-btn {
    min-width: 100%;
  }

  .clue-form {
    flex-direction: column;
  }

  .clue-input,
  .clue-num-input {
    width: 100%;
  }
}

/* ==================== COMPACT GAME LAYOUT ==================== */
/* No-scroll, full-viewport game experience */

.game-container-compact {
  display: flex;
  flex-direction: column;
  height: calc(100dvh - 120px); /* Account for header + mobile tabs */
  max-height: calc(100dvh - 120px);
  overflow: hidden;
  padding: 8px;
  gap: 8px;
}

/* Compact Header - Single Row */
.game-header-compact {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  flex-shrink: 0;
}

.game-score-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.game-team-compact {
  display: flex;
  align-items: center;
  gap: 6px;
}

.game-team-compact .team-badge {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-dim);
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.game-team-compact .cards-count {
  font-size: 22px;
  font-weight: 800;
  min-width: 24px;
  text-align: center;
}

.game-team-compact.red .cards-count { color: var(--game-red); }
.game-team-compact.blue .cards-count { color: var(--game-blue); }

.game-vs-compact {
  color: var(--text-dim);
  font-size: 11px;
  font-weight: 600;
}

.game-turn-compact {
  display: flex;
  align-items: center;
  gap: 6px;
}

.turn-indicator {
  font-weight: 700;
  font-size: 12px;
  padding: 4px 10px;
  border-radius: 6px;
}

.turn-indicator.red {
  background: var(--game-red-bg);
  color: var(--game-red);
}

.turn-indicator.blue {
  background: var(--game-blue-bg);
  color: var(--game-blue);
}

.turn-role-compact {
  font-size: 11px;
  color: var(--text-dim);
}

/* Role Selection - Compact Horizontal */
.role-selection-compact {
  padding: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  flex-shrink: 0;
}

.role-buttons-compact {
  display: flex;
  gap: 10px;
}

.role-btn-compact {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: var(--surface2);
  border: 2px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s;
}

.role-btn-compact:hover {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.1);
}

.role-btn-compact.selected {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.15);
}

.role-btn-compact.taken {
  opacity: 0.5;
  cursor: not-allowed;
}

.role-btn-compact .role-icon {
  font-size: 24px;
}

.role-btn-compact .role-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
}

.role-btn-compact .role-name {
  font-weight: 700;
  font-size: 14px;
}

.role-btn-compact .role-desc {
  font-size: 11px;
  color: var(--text-dim);
}

/* Game Board Wrapper - Fills Available Space */
.game-board-wrapper {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
  padding: 4px;
}

.game-container-compact .game-board {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
  width: 100%;
  max-width: min(100%, calc((100dvh - 280px) * 1.25)); /* Maintain aspect ratio */
  aspect-ratio: 5 / 4;
  margin: 0 auto;
}

.game-container-compact .game-card {
  aspect-ratio: unset;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s;
  position: relative;
  overflow: hidden;
}

.game-container-compact .game-card .card-word {
  font-size: clamp(8px, 2vw, 13px);
  font-weight: 700;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  word-break: break-word;
  line-height: 1.1;
}

/* Compact card hover - subtle scale instead of translate */
.game-container-compact .game-card:hover:not(.revealed):not(.disabled) {
  transform: scale(1.03);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Action Bar - Fixed at Bottom */
.game-action-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 14px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  flex-shrink: 0;
}

/* Compact Clue Display */
.clue-display-compact {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.clue-word-compact {
  font-weight: 800;
  font-size: 16px;
  text-transform: uppercase;
  color: var(--text);
}

.clue-number-compact {
  background: var(--accent);
  color: #fff;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 13px;
  flex-shrink: 0;
}

.guesses-left-compact {
  color: var(--text-dim);
  font-size: 12px;
}

/* Compact Clue Form */
.clue-form-compact {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.clue-input-compact {
  flex: 1;
  min-width: 80px;
  padding: 8px 12px !important;
  margin: 0 !important;
}

.clue-num-compact {
  width: 50px;
  padding: 8px !important;
  margin: 0 !important;
  text-align: center;
}

.btn-compact {
  padding: 8px 16px !important;
  font-size: 13px !important;
}

/* Operative Actions */
.operative-actions-compact {
  flex: 1;
  display: flex;
}

/* Waiting Message */
.waiting-compact {
  flex: 1;
  color: var(--text-dim);
  font-size: 13px;
}

/* Game Toolbar */
.game-toolbar {
  display: flex;
  gap: 6px;
  flex-shrink: 0;
}

.btn-icon {
  appearance: none;
  border: none;
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-dim);
  width: 36px;
  height: 36px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-icon:hover {
  background: rgba(255, 255, 255, 0.15);
  color: var(--text);
}

.btn-icon svg {
  width: 18px;
  height: 18px;
}

.btn-danger-icon:hover {
  background: rgba(239, 68, 68, 0.15);
  color: var(--red);
}

/* Game Log Popover */
.game-log-popover {
  position: fixed;
  bottom: 100px;
  right: 20px;
  width: 320px;
  max-width: calc(100vw - 40px);
  max-height: 300px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  z-index: 100;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.popover-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.popover-title {
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
}

.btn-close-popover {
  width: 28px;
  height: 28px;
}

.btn-close-popover svg {
  width: 14px;
  height: 14px;
}

.game-log-popover .game-log-entries {
  flex: 1;
  overflow-y: auto;
  padding: 10px 14px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* Game Menu Popover */
.game-menu-popover {
  position: fixed;
  bottom: 100px;
  right: 20px;
  width: 200px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  z-index: 100;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.menu-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 12px;
  font-size: 13px;
  justify-content: flex-start;
  background: transparent;
  border: 1px solid transparent;
}

.menu-btn:hover {
  background: rgba(255, 255, 255, 0.08);
}

.menu-btn.danger {
  color: var(--red);
}

.menu-btn.danger:hover {
  background: rgba(239, 68, 68, 0.1);
}

.menu-btn svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

/* Popover Backdrop */
.popover-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 99;
}

/* ==================== MOBILE COMPACT LAYOUT ==================== */
@media (max-width: 768px) {
  .game-container-compact {
    height: calc(100dvh - 80px);
    max-height: calc(100dvh - 80px);
    padding: 6px;
    gap: 6px;
  }

  .game-header-compact {
    padding: 8px 10px;
    border-radius: 10px;
  }

  .game-score-row {
    gap: 8px;
  }

  .game-team-compact .team-badge {
    display: none; /* Hide team names on mobile, just show scores */
  }

  .game-team-compact .cards-count {
    font-size: 20px;
  }

  .game-turn-compact {
    gap: 4px;
  }

  .turn-indicator {
    font-size: 11px;
    padding: 3px 8px;
  }

  .turn-role-compact {
    font-size: 10px;
  }

  /* Role Selection Mobile */
  .role-selection-compact {
    padding: 10px;
  }

  .role-buttons-compact {
    gap: 8px;
  }

  .role-btn-compact {
    padding: 10px 12px;
  }

  .role-btn-compact .role-icon {
    font-size: 20px;
  }

  .role-btn-compact .role-name {
    font-size: 13px;
  }

  /* Board Mobile */
  .game-board-wrapper {
    padding: 2px;
  }

  .game-container-compact .game-board {
    gap: 4px;
    max-width: min(100%, calc((100dvh - 220px) * 1.25));
  }

  .game-container-compact .game-card {
    border-radius: 6px;
    border-width: 1.5px;
    padding: 2px;
  }

  .game-container-compact .game-card .card-word {
    font-size: clamp(7px, 2.5vw, 11px);
  }

  /* Action Bar Mobile */
  .game-action-bar {
    padding: 8px 10px;
    gap: 8px;
    border-radius: 10px;
  }

  .clue-word-compact {
    font-size: 14px;
  }

  .clue-number-compact {
    width: 22px;
    height: 22px;
    font-size: 12px;
  }

  .guesses-left-compact {
    font-size: 11px;
  }

  .clue-form-compact {
    gap: 6px;
  }

  .clue-input-compact {
    padding: 6px 10px !important;
    font-size: 13px;
  }

  .clue-num-compact {
    width: 44px;
    padding: 6px !important;
  }

  .btn-compact {
    padding: 6px 12px !important;
    font-size: 12px !important;
  }

  .btn-icon {
    width: 32px;
    height: 32px;
    border-radius: 6px;
  }

  .btn-icon svg {
    width: 16px;
    height: 16px;
  }

  /* Popovers Mobile */
  .game-log-popover,
  .game-menu-popover {
    bottom: 80px;
    right: 10px;
    left: 10px;
    width: auto;
  }

  .game-log-popover {
    max-height: 250px;
  }
}

/* Extra small screens */
@media (max-width: 380px) {
  .game-container-compact .game-card .card-word {
    font-size: 7px;
  }

  .clue-word-compact {
    font-size: 12px;
  }

  .btn-compact {
    padding: 6px 10px !important;
  }
}

/* Invites (My Team) */
#invites-list{ display:flex; flex-direction: column; gap: 10px; }
.invite-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding: 12px;
  border-radius: 12px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.10);
}
.invite-left{ min-width: 0; }
.invite-title{ font-weight: 900; font-size: 14px; letter-spacing: 0.2px; }
.invite-sub{ color: var(--text-dim); font-size: 12px; margin-top: 2px; }
.invite-actions{ display:flex; gap: 8px; flex: 0 0 auto; }

/* ==================== ONLINE COUNTER + MODAL ==================== */

.online-counter-btn {
  appearance: none;
  border: none;
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-dim);
  padding: 4px 10px;
  border-radius: 12px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-family: inherit;
  transition: background 0.15s ease, color 0.15s ease;
}

.online-counter-btn:hover {
  background: rgba(255, 255, 255, 0.12);
  color: var(--text);
}

.online-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #22c55e;
  box-shadow: 0 0 6px rgba(34, 197, 94, 0.6);
  animation: pulse-dot 2s ease-in-out infinite;
}

@keyframes pulse-dot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(0.9); }
}

.online-count {
  font-weight: 600;
  color: var(--text);
}

.online-label {
  color: var(--text-dim);
}

/* Name and Team pill icons */
.name-icon,
.team-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-dim);
}

.name-icon svg,
.team-icon svg {
  width: 12px;
  height: 12px;
}

#header-name-pill:hover .name-icon,
#header-team-pill:hover .team-icon {
  color: var(--text);
}

/* Online Users Modal */
.online-modal .modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.online-modal-card {
  position: fixed;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
  width: 90%;
  max-width: 360px;
  max-height: 45vh;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.online-modal-body {
  padding: 16px;
  overflow-y: auto;
  max-height: calc(45vh - 60px);
}

.online-users-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.online-section-title {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
  padding: 8px 0 4px 4px;
  margin-top: 8px;
}

.online-section-title:first-child {
  margin-top: 0;
}

.online-user-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 10px;
}

.online-user-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.online-user-dot.online {
  background: #22c55e;
  box-shadow: 0 0 6px rgba(34, 197, 94, 0.5);
}

.online-user-dot.inactive {
  background: #f59e0b;
  box-shadow: 0 0 6px rgba(245, 158, 11, 0.4);
}

.online-user-dot.offline {
  background: #6b7280;
}

.online-user-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text);
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.online-user-team {
  font-size: 11px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text-dim);
  flex-shrink: 0;
  max-width: 140px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.online-user-status {
  font-size: 11px;
  color: var(--text-dim);
  flex-shrink: 0;
}

.online-user-delete {
  width: 18px;
  height: 18px;
  line-height: 18px;
  border-radius: 999px;
  border: none;
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-dim);
  font-size: 14px;
  font-weight: 700;
  padding: 0;
  cursor: pointer;
  flex-shrink: 0;
}

.online-user-delete:hover {
  background: rgba(255, 255, 255, 0.12);
  color: var(--text);
}

.online-user-delete:active {
  transform: scale(0.96);
}

.online-user-row.is-you .online-user-name::after {
  content: ' (you)';
  color: var(--text-dim);
  font-weight: 400;
}

/* Online Modal Tabs */
.online-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  padding: 4px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
}

.online-tab {
  flex: 1;
  padding: 10px 16px;
  border: none;
  background: transparent;
  color: var(--text-dim);
  font-size: 13px;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: background 150ms ease, color 150ms ease;
}

.online-tab:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
}

.online-tab.active {
  background: rgba(59, 130, 246, 0.2);
  color: var(--text);
}

/* Clickable Header Pills */
.header-pill.clickable {
  cursor: pointer;
  transition: background 150ms ease, transform 100ms ease;
}

.header-pill.clickable:hover {
  background: rgba(255, 255, 255, 0.12);
}

.header-pill.clickable:active {
  transform: scale(0.98);
}

/* Name Change Modal */
.name-change-modal .modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.name-change-modal-card {
  position: fixed !important;
  top: 45% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 1000;
  width: 90%;
  max-width: 260px;
  margin: 0 !important;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Name Change Modal animation positioning fix */
.name-change-modal.modal-open .name-change-modal-card {
  transform: translate(-50%, -55%) scale(1) !important;
}

.name-change-modal:not(.modal-open) .name-change-modal-card {
  transform: translate(-50%, -55%) scale(0.95) !important;
}

/* Name change modal head - compact like online modal */
.name-change-modal .modal-head {
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

.name-change-modal .modal-title {
  font-size: 13px;
  font-weight: 600;
}

.name-change-modal .icon-btn {
  width: 24px;
  height: 24px;
  font-size: 14px;
}

/* Name change modal body - compact */
.name-change-modal .modal-body {
  padding: 12px;
}

/* Name change form styling */
.name-change-modal .form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.name-change-modal .field {
  margin: 0;
}

.name-change-modal .label {
  font-size: 11px;
  margin-bottom: 4px;
}

.name-change-modal .input {
  padding: 8px 10px;
  font-size: 13px;
  border-radius: 8px;
}

.name-change-modal .form-actions {
  margin: 0;
}

.name-change-modal .btn.primary {
  width: 100%;
  padding: 8px 12px;
  font-size: 12px;
  border-radius: 8px;
}

/* Teammates Modal */
.teammates-modal .modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.teammates-modal-card {
  position: fixed !important;
  top: 45% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 1000;
  width: 90%;
  max-width: 280px;
  margin: 0 !important;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Teammates Modal animation positioning fix */
.teammates-modal.modal-open .teammates-modal-card {
  transform: translate(-50%, -55%) scale(1) !important;
}

.teammates-modal:not(.modal-open) .teammates-modal-card {
  transform: translate(-50%, -55%) scale(0.95) !important;
}

/* Teammates modal head - compact like online modal */
.teammates-modal .modal-head {
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

.teammates-modal .modal-title {
  font-size: 13px;
  font-weight: 600;
}

.teammates-modal .icon-btn {
  width: 24px;
  height: 24px;
  font-size: 14px;
}

/* Teammates modal body - compact */
.teammates-modal .modal-body {
  padding: 12px;
  max-height: 50vh;
  overflow-y: auto;
}

.teammates-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.teammate-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 8px;
}

.teammate-avatar {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--team-color, #3b82f6) 0%, rgba(59, 130, 246, 0.5) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: white;
  flex-shrink: 0;
}

.teammate-info {
  flex: 1;
  min-width: 0;
}

.teammate-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.teammate-role {
  font-size: 10px;
  color: var(--text-dim);
  margin-top: 1px;
}

.teammate-row.is-you {
  border: 1px solid rgba(59, 130, 246, 0.3);
}

.teammate-row.is-owner .teammate-name::after {
  content: ' (Owner)';
  color: var(--text-dim);
  font-weight: 400;
  font-size: 11px;
}

/* ==================== SETTINGS GEAR + MODAL ==================== */

/* Settings Gear Button */
.settings-gear-btn {
  appearance: none;
  border: none;
  background: transparent;
  color: var(--text-dim);
  width: 30px;
  height: 30px;
  padding: 4px;
  border-radius: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 12px;
  flex-shrink: 0;
}

.settings-gear-btn svg {
  width: 16px;
  height: 16px;
}

.settings-gear-btn:hover {
  background: var(--surface2);
  color: var(--text);
}

.settings-gear-btn:active {
  transform: scale(0.95);
}

/* Team-colored gear when in tournament with team */
body.tournament.has-team-color .settings-gear-btn:hover {
  color: var(--team-accent);
}

/* Settings Modal */
.settings-modal .modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  z-index: 999;
}

.settings-modal-card {
  position: fixed;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
  width: 90%;
  max-width: 340px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  overflow: hidden;
}

.settings-modal-body {
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Simplified Settings UI */
.settings-simple {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.settings-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  background: var(--surface2);
  border-radius: 12px;
  cursor: pointer;
}

.settings-row-volume {
  cursor: default;
}

.settings-row-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
}

.settings-row-volume .settings-volume-slider {
  flex: 1;
}

.settings-row-volume .settings-volume-value {
  min-width: 38px;
}


.settings-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-section-title {
  font-size: 14px;
  font-weight: 700;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: 8px;
}

.settings-icon {
  font-size: 16px;
}

.settings-hint {
  font-size: 12px;
  color: var(--text-dim);
  margin-top: -4px;
}


/* Simplified Settings (compact) */
.settings-simple {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.settings-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  background: var(--surface2);
  border-radius: 12px;
}

.settings-row-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
}

.settings-row-volume .settings-volume-value {
  min-width: 36px;
}

/* Settings Account Actions */
.settings-account-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--border);
}

.settings-account-actions .btn {
  width: 100%;
  justify-content: center;
}

/* Toggle Switch */
.settings-toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  background: var(--surface2);
  border-radius: 12px;
  cursor: pointer;
}

.settings-toggle-label {
  font-size: 14px;
  color: var(--text);
}

.toggle-switch {
  position: relative;
  width: 48px;
  height: 26px;
  flex-shrink: 0;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: var(--border);
  border-radius: 26px;
}

.toggle-slider::before {
  content: "";
  position: absolute;
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background: var(--text);
  border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
  background: var(--accent);
}

.toggle-switch input:checked + .toggle-slider::before {
  transform: translateX(22px);
}

/* Team-colored toggle when in tournament */
body.tournament.has-team-color .toggle-switch input:checked + .toggle-slider {
  background: var(--team-accent);
}

/* Volume Slider */
.settings-volume-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  background: var(--surface2);
  border-radius: 12px;
}

.settings-volume-label {
  font-size: 14px;
  color: var(--text);
  white-space: nowrap;
}

.settings-volume-slider {
  flex: 1;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--border);
  border-radius: 6px;
  cursor: pointer;
}

.settings-volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  border: 2px solid var(--surface);
}

.settings-volume-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--accent);
  cursor: pointer;
  border: 2px solid var(--surface);
}

body.tournament.has-team-color .settings-volume-slider::-webkit-slider-thumb {
  background: var(--team-accent);
}

body.tournament.has-team-color .settings-volume-slider::-moz-range-thumb {
  background: var(--team-accent);
}

.settings-volume-value {
  font-size: 13px;
  color: var(--text-dim);
  min-width: 40px;
  text-align: right;
}

.settings-test-sound {
  align-self: flex-start;
  margin-top: 4px;
}

/* ==================== ANIMATIONS ==================== */

/* Animation CSS Variables */
:root {
  --anim-duration-fast: 150ms;
  --anim-duration: 200ms;
  --anim-duration-slow: 300ms;
  --anim-duration-slower: 400ms;
  --anim-ease: cubic-bezier(0.4, 0, 0.2, 1);
  --anim-ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
  --anim-ease-out: cubic-bezier(0, 0, 0.2, 1);
}

/* Disable animations when preference is off */
body.no-animations,
body.no-animations * {
  animation-duration: 0ms !important;
  transition-duration: 0ms !important;
}

/* Base transitions for interactive elements */
.btn {
  transition: background var(--anim-duration-fast) var(--anim-ease),
              border-color var(--anim-duration-fast) var(--anim-ease),
              color var(--anim-duration-fast) var(--anim-ease),
              transform var(--anim-duration-fast) var(--anim-ease),
              box-shadow var(--anim-duration-fast) var(--anim-ease);
}

.btn:active {
  transform: scale(0.97);
}

.btn.primary:hover {
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

body.tournament.has-team-color .btn.primary:hover {
  box-shadow: 0 4px 12px var(--team-glow);
}

/* Tab transitions */
.desktop-tabs .tab,
.mobile-tabs .tab {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration-fast) var(--anim-ease);
}

.mobile-tabs .tab:active {
  transform: scale(0.95);
}

/* Panel/Page transitions */
.panel {
  opacity: 0;
  transform: translateY(8px);
}

.panel.active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity var(--anim-duration-slow) var(--anim-ease),
              transform var(--anim-duration-slow) var(--anim-ease);
}

/* Modal animations */
.modal {
  opacity: 0;
  visibility: hidden;
}

.modal.modal-open {
  opacity: 1;
  visibility: visible;
  transition: opacity var(--anim-duration) var(--anim-ease),
              visibility 0ms;
}

.modal:not(.modal-open) {
  transition: opacity var(--anim-duration) var(--anim-ease),
              visibility 0ms var(--anim-duration);
}

.modal-card {
  transform: scale(0.95) translateY(10px);
  opacity: 0;
}

.modal.modal-open .modal-card {
  transform: scale(1) translateY(0);
  opacity: 1;
  transition: transform var(--anim-duration-slow) var(--anim-ease-bounce),
              opacity var(--anim-duration) var(--anim-ease);
}

.modal:not(.modal-open) .modal-card {
  transition: transform var(--anim-duration) var(--anim-ease),
              opacity var(--anim-duration) var(--anim-ease);
}

.modal-backdrop {
  opacity: 0;
}

.modal.modal-open .modal-backdrop {
  opacity: 1;
  transition: opacity var(--anim-duration) var(--anim-ease);
}

/* Settings modal specific positioning fix */
.settings-modal.modal-open .settings-modal-card {
  transform: translate(-50%, -55%) scale(1);
}

.settings-modal:not(.modal-open) .settings-modal-card {
  transform: translate(-50%, -55%) scale(0.95);
}

/* Online modal specific positioning fix */
.online-modal.modal-open .online-modal-card {
  transform: translate(-50%, -50%) scale(1);
}

.online-modal:not(.modal-open) .online-modal-card {
  transform: translate(-50%, -50%) scale(0.95);
}


/* Profile details modal positioning + size */
.profile-details-modal-card{
  top: 50%;
  left: 50%;
  width: min(560px, 92vw);
  max-width: 560px;
  max-height: calc(100vh - 140px);
}

.profile-details-modal-card .modal-body{
  overflow-y: auto;
}

.profile-details-modal.modal-open .profile-details-modal-card{
  transform: translate(-50%, -50%) scale(1);
}

.profile-details-modal:not(.modal-open) .profile-details-modal-card{
  transform: translate(-50%, -50%) scale(0.95);
}

/* Card hover animations */
.mode-card {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease);
}

.mode-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.mode-card:active {
  transform: translateY(-2px);
}

/* Team card animations */
.team-card {
  transition: border-color var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease);
}

/* Quick Play team column hover */
.quick-team-col.selectable {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration) var(--anim-ease);
}

.quick-team-col.selectable:hover {
  transform: translateY(-2px);
}

.quick-team-col.selectable:active {
  transform: translateY(0);
}

/* Game card animations */
.game-card {
  transition: transform var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease),
              background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease);
}

.game-card:not(.revealed):hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
}

.game-card:not(.revealed):active {
  transform: translateY(-1px) scale(1);
}

/* Card reveal animation */
@keyframes cardReveal {
  0% {
    transform: rotateY(0deg);
  }
  50% {
    transform: rotateY(90deg);
  }
  100% {
    transform: rotateY(0deg);
  }
}

.game-card.revealing {
  animation: cardReveal var(--anim-duration-slower) var(--anim-ease);
}

/* Card pulse animation for hints */
@keyframes cardPulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
  }
}

.game-card.pulse {
  animation: cardPulse 1.5s ease infinite;
}

/* Input focus animations */
.input {
  transition: border-color var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease),
              background var(--anim-duration) var(--anim-ease);
}

.input:focus {
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

body.tournament.has-team-color .input:focus {
  box-shadow: 0 0 0 3px var(--team-glow);
}

/* Toggle switch animation */
.toggle-slider {
  transition: background var(--anim-duration) var(--anim-ease);
}

.toggle-slider::before {
  transition: transform var(--anim-duration) var(--anim-ease-bounce);
}

/* Badge pulse animation */
@keyframes badgePulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
}

.badge:not(:empty) {
  animation: badgePulse 2s ease-in-out infinite;
}

/* Chat message slide in */
@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.chat-msg {
  animation: messageSlideIn var(--anim-duration) var(--anim-ease);
}

/* Launch screen animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.launch-card {
  animation: fadeInUp var(--anim-duration-slower) var(--anim-ease);
}

/* Spots counter animation */
@keyframes countPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.spots-number {
  transition: transform var(--anim-duration) var(--anim-ease);
}

.spots-number.updated {
  animation: countPulse var(--anim-duration-slow) var(--anim-ease);
}

/* Settings icon hover animation */
.settings-gear-btn svg {
  transition: transform var(--anim-duration-slow) var(--anim-ease),
              color var(--anim-duration) var(--anim-ease);
}

.settings-gear-btn:hover svg {
  transform: scale(1.06);
}

/* Game turn indicator pulse */
@keyframes turnPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

.game-turn-display {
  transition: background var(--anim-duration) var(--anim-ease),
              color var(--anim-duration) var(--anim-ease);
}

.game-turn-display.your-turn {
  animation: turnPulse 1.5s ease-in-out infinite;
}

/* Timer urgency animation */
@keyframes timerUrgent {
  0%, 100% {
    color: var(--red);
    transform: scale(1);
  }
  50% {
    color: #ff6b6b;
    transform: scale(1.05);
  }
}

.timer-display.urgent {
  animation: timerUrgent 0.5s ease infinite;
}

/* Role button hover */
.role-btn {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration) var(--anim-ease),
              box-shadow var(--anim-duration) var(--anim-ease);
}

.role-btn:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
}

.role-btn:active {
  transform: translateY(-2px);
}

/* Deck card picker animation */
.qp-deck-card {
  transition: background var(--anim-duration) var(--anim-ease),
              border-color var(--anim-duration) var(--anim-ease),
              transform var(--anim-duration) var(--anim-ease);
}

.qp-deck-card:hover {
  transform: translateY(-2px);
}

.qp-deck-card:active {
  transform: translateY(0);
}

/* Win/Lose celebration animation */
@keyframes celebrationBounce {
  0%, 100% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.1);
  }
  50% {
    transform: scale(0.95);
  }
  75% {
    transform: scale(1.05);
  }
}

.game-end-title.win {
  animation: celebrationBounce 0.6s var(--anim-ease-bounce);
}

@keyframes defeatShake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  75% {
    transform: translateX(5px);
  }
}

.game-end-title.lose {
  animation: defeatShake 0.4s var(--anim-ease);
}

/* Ripple effect for buttons */
.btn {
  position: relative;
  overflow: hidden;
}

.btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
  transform: scale(0);
  opacity: 0;
  pointer-events: none;
}

.btn.ripple::after {
  animation: rippleEffect var(--anim-duration-slow) var(--anim-ease-out);
}

@keyframes rippleEffect {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

/* Skeleton loading animation */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton {
  background: linear-gradient(90deg, var(--surface2) 25%, var(--border) 50%, var(--surface2) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 8px;
}

/* Notification pop animation */
@keyframes notificationPop {
  0% {
    transform: scale(0) translateY(20px);
    opacity: 0;
  }
  50% {
    transform: scale(1.1) translateY(-5px);
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

.notification-toast {
  animation: notificationPop var(--anim-duration-slow) var(--anim-ease-bounce);
}

/* ==================== EXPANDED GAME LAYOUT ==================== */
/* Advanced full-screen layout with sidebars */

.game-container-expanded {
  display: flex;
  flex-direction: column;
  height: calc(100dvh - 120px);
  max-height: calc(100dvh - 120px);
  overflow: hidden;
  padding: 12px;
  gap: 12px;
  background: var(--bg);
}

/* Enhanced Game Header */
.game-header-expanded {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px 20px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  flex-shrink: 0;
}

.game-score-section {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24px;
}

.game-team-expanded {
  display: flex;
  align-items: center;
  gap: 10px;
}

.game-team-expanded .team-badge {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-dim);
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.game-team-expanded .cards-count {
  font-size: 32px;
  font-weight: 800;
  min-width: 40px;
  text-align: center;
}

.game-team-expanded.red .cards-count { color: var(--game-red); }
.game-team-expanded.blue .cards-count { color: var(--game-blue); }

.game-center-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  min-width: 100px;
}

.game-vs-expanded {
  color: var(--text-dim);
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 2px;
}

/* Timer Display */
.game-timer-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  width: 100%;
}

.timer-bar {
  width: 100%;
  height: 2px;
  background: var(--surface2);
  border-radius: 2px;
  overflow: hidden;
}

.timer-fill {
  height: 100%;
  background: var(--accent);
  border-radius: 2px;
  transition: width 1s linear, background 0.3s;
  width: 100%;
}

.timer-fill.warning { background: var(--gold); }
.timer-fill.danger { background: var(--red); animation: timerPulse 0.5s ease infinite; }

@keyframes timerPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.timer-text {
  font-size: 18px;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
}

.timer-text.warning { color: var(--gold); }
.timer-text.danger { color: var(--red); }

.game-turn-expanded {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.turn-phase {
  font-size: 13px;
  color: var(--text-dim);
}

/* Main Game Layout - 3 Columns */
.game-main-layout {
  flex: 1;
  display: grid;
  grid-template-columns: 260px 1fr 280px;
  gap: 12px;
  min-height: 0;
  overflow: hidden;
}

/* Sidebars */
.game-sidebar {
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
  overflow: hidden;
}

.game-sidebar-left { grid-column: 1; }
.game-sidebar-right { grid-column: 3; }

/* Sidebar Panels */
.sidebar-panel {
  display: flex;
  flex-direction: column;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  min-height: 0;
}

.sidebar-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.sidebar-panel-title {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
}

/* Team Roster Panel */
.team-roster-panel {
  flex: 0 0 auto;
  max-height: 45%;
}

.team-roster-content {
  padding: 10px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.roster-team {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.roster-team-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding-bottom: 4px;
  border-bottom: 1px solid var(--border);
}

.roster-team-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.roster-team-dot.red { background: var(--game-red); }
.roster-team-dot.blue { background: var(--game-blue); }

.roster-team-name {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
}

.roster-players {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.roster-player {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: var(--surface2);
  border-radius: 6px;
  font-size: 12px;
}

.roster-player-name {
  flex: 1;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.roster-player-role {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
  text-transform: uppercase;
}

.roster-player-role.spymaster {
  background: rgba(250, 204, 21, 0.2);
  color: var(--gold);
}

.roster-player-role.operative {
  background: rgba(59, 130, 246, 0.2);
  color: var(--accent);
}

.roster-player.current-turn {
  border: 1px solid var(--accent);
  background: rgba(59, 130, 246, 0.1);
}

/* Clue History Panel */
.clue-history-panel {
  flex: 1;
  min-height: 150px;
}

.clue-history-content {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.clue-history-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px;
  background: var(--surface2);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.clue-history-item.red { border-left-color: var(--game-red); }
.clue-history-item.blue { border-left-color: var(--game-blue); }

.clue-history-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.clue-history-team {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.clue-history-team.red { color: var(--game-red); }
.clue-history-team.blue { color: var(--game-blue); }

.clue-history-number {
  font-size: 11px;
  font-weight: 700;
  padding: 2px 8px;
  background: var(--surface);
  border-radius: 10px;
}

.clue-history-word {
  font-size: 16px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.clue-history-results {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
}

.clue-result-chip {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 4px;
  background: var(--surface);
}

.clue-result-chip.correct { color: var(--green); }
.clue-result-chip.wrong { color: var(--red); }
.clue-result-chip.neutral { color: var(--text-dim); }

.clue-history-empty {
  color: var(--text-dim);
  font-size: 12px;
  text-align: center;
  padding: 20px;
}

/* Game Center Area */
.game-center-area {
  grid-column: 2;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 0;
  overflow: hidden;
}

.game-center-area .game-board-wrapper {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
}

.game-center-area .game-board {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
  width: 100%;
  max-width: min(100%, calc((100dvh - 320px) * 1.25));
  aspect-ratio: 5 / 4;
}

.game-center-area .game-card {
  aspect-ratio: unset;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px;
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s;
  position: relative;
  overflow: hidden;
}

.game-center-area .game-card .card-word {
  font-size: clamp(10px, 1.8vw, 14px);
  font-weight: 700;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  word-break: break-word;
  line-height: 1.2;
}

.game-center-area .game-card:hover:not(.revealed):not(.disabled) {
  border-color: var(--accent);
  transform: scale(1.02);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

/* Card Tags */
.card-tag {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 700;
  pointer-events: none;
  z-index: 5;
}

.card-tag.tag-yes {
  background: rgba(34, 197, 94, 0.9);
  color: #fff;
}

.card-tag.tag-maybe {
  background: rgba(250, 204, 21, 0.9);
  color: #000;
}

.card-tag.tag-no {
  background: rgba(239, 68, 68, 0.9);
  color: #fff;
}

.card-tag svg {
  width: 10px;
  height: 10px;
}

/* Card Vote Indicators */
.card-votes {
  position: absolute;
  bottom: 4px;
  left: 4px;
  right: 4px;
  display: flex;
  justify-content: center;
  gap: 2px;
  pointer-events: none;
  z-index: 5;
}

.card-vote-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--accent);
  opacity: 0.8;
}

.card-vote-dot.my-vote {
  background: var(--gold);
  box-shadow: 0 0 4px var(--gold);
}

/* Card Tag Mode */
.game-card.tag-mode {
  cursor: crosshair;
}

.game-card.tag-mode:hover {
  border-color: var(--gold) !important;
}

/* Card Tag Legend */
.card-tag-legend {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 8px 16px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  flex-shrink: 0;
}

.tag-legend-title {
  font-size: 12px;
  color: var(--text-dim);
  font-weight: 500;
}

.tag-legend-items {
  display: flex;
  gap: 6px;
}

.tag-btn {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: 2px solid var(--border);
  background: var(--surface2);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s;
}

.tag-btn:hover {
  border-color: var(--text-dim);
}

.tag-btn.active {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.2);
}

.tag-btn svg {
  width: 16px;
  height: 16px;
}

.tag-btn.tag-yes { color: var(--green); }
.tag-btn.tag-maybe { color: var(--gold); }
.tag-btn.tag-no { color: var(--red); }
.tag-btn.tag-clear { color: var(--text-dim); }

.tag-legend-hint {
  font-size: 11px;
  color: var(--text-dim);
}

/* Expanded Action Bar */
.game-center-area .game-action-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 16px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  flex-shrink: 0;
}

.clue-display-expanded {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clue-label {
  font-size: 13px;
  color: var(--text-dim);
}

.clue-word-expanded {
  font-size: 20px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.clue-number-expanded {
  width: 32px;
  height: 32px;
  background: var(--accent);
  color: #fff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 16px;
}

.guesses-left-expanded {
  font-size: 13px;
  color: var(--text-dim);
}

.clue-form-expanded {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  max-width: 500px;
}

.clue-input-expanded {
  flex: 1;
  margin: 0;
}

.clue-num-expanded {
  width: 60px;
  margin: 0;
  text-align: center;
}

.operative-actions-expanded {
  display: flex;
  gap: 10px;
}

.waiting-expanded {
  font-size: 14px;
  color: var(--text-dim);
}

/* Operative Chat Panel */
.operative-chat-panel {
  flex: 1;
  min-height: 200px;
}

.chat-privacy-badge {
  font-size: 9px;
  padding: 3px 8px;
  background: rgba(34, 197, 94, 0.2);
  color: var(--green);
  border-radius: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.chat-privacy-badge.spymaster-visible {
  background: rgba(250, 204, 21, 0.2);
  color: var(--gold);
}

.operative-chat-messages {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.chat-empty-state {
  color: var(--text-dim);
  font-size: 12px;
  text-align: center;
  padding: 20px 10px;
}

.chat-message {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px 10px;
  background: var(--surface2);
  border-radius: 8px;
}

.chat-message.my-message {
  background: rgba(59, 130, 246, 0.15);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

.chat-message-header {
  display: flex;
  align-items: center;
  gap: 6px;
}

.chat-sender {
  font-size: 11px;
  font-weight: 600;
}

.chat-sender.red { color: var(--game-red); }
.chat-sender.blue { color: var(--game-blue); }

.chat-time {
  font-size: 10px;
  color: var(--text-dim);
}

.chat-text {
  font-size: 13px;
  line-height: 1.4;
  word-break: break-word;
}

.operative-chat-form {
  display: flex;
  gap: 8px;
  padding: 10px;
  border-top: 1px solid var(--border);
}

.operative-chat-form .chat-input {
  flex: 1;
  margin: 0;
  padding: 8px 12px;
}

.chat-send-btn {
  width: 36px;
  height: 36px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.chat-send-btn svg {
  width: 16px;
  height: 16px;
}

/* Voting Panel */
.voting-panel {
  flex: 0 0 auto;
  max-height: 35%;
}

.voting-content {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.voting-empty-state {
  color: var(--text-dim);
  font-size: 12px;
  text-align: center;
  padding: 15px 10px;
}

.voting-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  background: var(--surface2);
  border-radius: 8px;
}

.voting-word {
  flex: 1;
  font-size: 13px;
  font-weight: 600;
  text-transform: uppercase;
}

.voting-count {
  display: flex;
  align-items: center;
  gap: 4px;
}

.voting-dots {
  display: flex;
  gap: 3px;
}

.voting-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--accent);
}

.voting-dot.my-vote {
  background: var(--gold);
  box-shadow: 0 0 4px var(--gold);
}

.voting-number {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-dim);
  min-width: 20px;
  text-align: right;
}

.voting-hint {
  font-size: 10px;
  color: var(--text-dim);
  text-align: center;
  padding: 6px 10px;
  border-top: 1px solid var(--border);
}

.btn-small {
  width: 24px;
  height: 24px;
  padding: 0;
}

.btn-small svg {
  width: 12px;
  height: 12px;
}

/* Sidebar Toggle State */
.game-sidebar.collapsed {
  display: none;
}

/* Mobile Layout */
@media (max-width: 1024px) {
  .game-main-layout {
    grid-template-columns: 1fr;
  }

  .game-sidebar-left,
  .game-sidebar-right {
    display: none;
  }

  .game-sidebar-left.mobile-visible,
  .game-sidebar-right.mobile-visible {
    display: flex;
    position: fixed;
    top: 60px;
    bottom: 60px;
    width: 300px;
    background: var(--bg);
    z-index: 100;
    padding: 12px;
    border: 1px solid var(--border);
  }

  .game-sidebar-left.mobile-visible {
    left: 0;
    border-left: none;
    border-radius: 0 12px 12px 0;
  }

  .game-sidebar-right.mobile-visible {
    right: 0;
    border-right: none;
    border-radius: 12px 0 0 12px;
  }

  .game-center-area {
    grid-column: 1;
  }

  .game-container-expanded {
    padding: 8px;
    gap: 8px;
  }

  .game-header-expanded {
    padding: 10px 14px;
  }

  .game-team-expanded .cards-count {
    font-size: 24px;
  }

  .game-team-expanded .team-badge {
    font-size: 11px;
    max-width: 80px;
  }

  .game-center-area .game-card .card-word {
    font-size: clamp(8px, 2.5vw, 12px);
  }

  .card-tag-legend {
    flex-wrap: wrap;
    gap: 8px;
  }

  .tag-legend-hint {
    width: 100%;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .game-score-section {
    gap: 12px;
  }

  .game-team-expanded .team-badge {
    display: none;
  }

  .game-center-area .game-action-bar {
    flex-wrap: wrap;
    justify-content: center;
  }

  .clue-form-expanded {
    flex-wrap: wrap;
    justify-content: center;
  }

  .clue-form-expanded .btn {
    width: 100%;
  }
}

/* Sidebar backdrop for mobile */
.sidebar-backdrop {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 99;
}

.sidebar-backdrop.visible {
  display: block;
}

/* ==================== PROFILE POPUP ==================== */
/* Clickable name styling */
.profile-link {
  cursor: pointer;
  transition: all 0.15s ease;
  border-bottom: 1px dashed transparent;
  text-decoration: none;
  display: inline;
}

.profile-link:hover {
  border-bottom-color: currentColor;
}

/* Teams page: disable profile-link click targets (page uses its own interactions) */
#panel-teams .profile-link {
  pointer-events: none;
  cursor: default;
  border-bottom: none;
}
#panel-teams .profile-link:hover,
#panel-players .profile-link:hover {
  border-bottom-color: transparent;
  opacity: 1;
}

/* Small inline link-style button */
.link-btn {
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: var(--accent);
  cursor: pointer;
  text-decoration: underline;
  text-decoration-style: dashed;
  text-underline-offset: 3px;
}
.link-btn.subtle {
  color: var(--text-dim);
  text-decoration-color: rgba(255,255,255,0.25);
}
.link-btn.subtle:hover {
  color: var(--text);
  text-decoration-color: rgba(255,255,255,0.5);
}

.profile-more-details {
  margin-top: 10px;
  font-size: 12px;
}

.profile-details-modal-card {
  max-width: 420px;
  max-height: 80vh;
}

/* Keep the details modal content scrollable (same centered positioning as settings) */
#profile-details-modal .settings-modal-body {
  max-height: calc(80vh - 70px);
  overflow-y: auto;
}

/* If the online legend isn't populated, don't reserve space */
#online-status-legend:empty {
  display: none;
}

/* Specific context overrides for profile links */
.team-list-members .profile-link {
  border-bottom: none;
}

.team-list-members .profile-link:hover {
  text-decoration: underline;
  text-decoration-style: dashed;
}

.online-user-name.profile-link:hover,
.online-user-team-inline.profile-link:hover {
  opacity: 0.85;
}

.chat-who .profile-link:hover {
  opacity: 0.85;
}

/* Profile Popup Container */
.profile-popup {
  position: fixed;
  z-index: 2000;
  pointer-events: none;
}

.profile-popup.visible {
  pointer-events: auto;
}

.profile-popup-card {
  background: rgba(20, 20, 25, 0.98);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 14px;
  box-shadow: 0 12px 48px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
  min-width: 280px;
  max-width: 340px;
  overflow: hidden;
  animation: profilePopupIn 0.2s ease;
}

@keyframes profilePopupIn {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.profile-popup-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  gap: 10px;
}

.profile-popup-title {
  font-size: 15px;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
}

.profile-popup-close {
  width: 26px;
  height: 26px;
  font-size: 18px;
  flex-shrink: 0;
}

.profile-popup-body {
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Profile Stats Section */
.profile-stats {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.profile-stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  font-size: 13px;
}

.profile-stat-label {
  color: var(--text-dim);
  flex-shrink: 0;
}

.profile-stat-value {
  font-weight: 600;
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.profile-stat-value.highlight {
  color: var(--accent);
}

.profile-stat-value.success {
  color: var(--green);
}

.profile-stat-value.warning {
  color: var(--gold);
}

.profile-stat-value.danger {
  color: var(--red);
}

/* Profile Members List */
.profile-members {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.profile-members-title {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-dim);
  margin-bottom: 4px;
}

.profile-member {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 6px;
  font-size: 12px;
}

.profile-member-name {
  flex: 1;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.profile-member-badge {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
  text-transform: uppercase;
  background: rgba(59, 130, 246, 0.15);
  color: var(--accent);
}

.profile-member-badge.leader {
  background: rgba(250, 204, 21, 0.15);
  color: var(--gold);
}

/* Profile Status Badge */
.profile-status {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
}

.profile-status.eligible {
  background: rgba(34, 197, 94, 0.12);
  border: 1px solid rgba(34, 197, 94, 0.3);
  color: var(--green);
}

.profile-status.not-eligible {
  background: rgba(239, 68, 68, 0.12);
  border: 1px solid rgba(239, 68, 68, 0.3);
  color: var(--red);
}

.profile-status.online {
  background: rgba(34, 197, 94, 0.12);
  border: 1px solid rgba(34, 197, 94, 0.3);
  color: var(--green);
}

.profile-status.offline {
  background: rgba(113, 113, 122, 0.12);
  border: 1px solid rgba(113, 113, 122, 0.3);
  color: var(--text-dim);
}

.profile-status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: currentColor;
}

/* Profile Section Divider */
.profile-divider {
  height: 1px;
  background: rgba(255, 255, 255, 0.08);
  margin: 4px 0;
}

/* Profile Backdrop (mobile) */
.profile-popup-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1999;
}

/* Mobile Styles */
@media (max-width: 768px) {
  .profile-popup {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding: 0;
    background: transparent;
  }

  .profile-popup.visible {
    pointer-events: auto;
  }

  .profile-popup-card {
    width: 100%;
    max-width: 100%;
    min-width: 100%;
    border-radius: 18px 18px 0 0;
    max-height: 70vh;
    overflow-y: auto;
    animation: profilePopupSlideUp 0.25s ease;
  }

  @keyframes profilePopupSlideUp {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .profile-popup-header {
    padding: 16px 18px;
    position: sticky;
    top: 0;
    background: rgba(20, 20, 25, 0.98);
    z-index: 1;
  }

  .profile-popup-title {
    font-size: 17px;
  }

  .profile-popup-body {
    padding: 18px;
    padding-bottom: 32px;
  }

  .profile-stat-row {
    font-size: 14px;
    padding: 4px 0;
  }

  .profile-member {
    padding: 10px 12px;
    font-size: 14px;
  }
}



/* Small helper text under labels (Profile popup) */
.profile-stat-sub{
  display:block;
  font-size: 11px;
  opacity: 0.75;
  margin-top: 2px;
  line-height: 1.25;
}

/* =========================
   Auth Loading Screen
========================= */
.auth-loading-screen {
  position: fixed;
  inset: 0;
  z-index: 10000;
  background: var(--bg);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 1;
  transition: opacity 0.4s ease, visibility 0.4s ease;
}

.auth-loading-screen.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.auth-loading-content {
  text-align: center;
}

/* Loading text shared styles */
.auth-loading-title {
  display: block;
  font-size: 28px;
  font-weight: 700;
  letter-spacing: 4px;
  color: var(--text);
  margin-bottom: 8px;
}

.auth-loading-subtitle {
  display: block;
  font-size: 14px;
  color: var(--text-dim);
  letter-spacing: 0.5px;
}

/* Animated dots */
.auth-dots span {
  animation: authDotPulse 1.4s ease-in-out infinite;
  opacity: 0;
}

.auth-dots span:nth-child(1) { animation-delay: 0s; }
.auth-dots span:nth-child(2) { animation-delay: 0.2s; }
.auth-dots span:nth-child(3) { animation-delay: 0.4s; }

@keyframes authDotPulse {
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
}

/* Desktop Animation: 3x3 Grid of Cards */
.auth-loading-desktop {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 32px;
}

.auth-loading-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  width: 140px;
  height: 140px;
}

.auth-card {
  width: 40px;
  height: 40px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 6px;
  animation: authCardPulse 2.4s ease-in-out infinite;
  animation-delay: calc(var(--delay) * 0.1s);
}

.auth-card.accent {
  background: var(--accent);
  border-color: var(--accent);
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
}

@keyframes authCardPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.08);
    opacity: 1;
  }
}

.auth-card.accent {
  animation: authCardAccentPulse 2.4s ease-in-out infinite;
  animation-delay: calc(var(--delay) * 0.1s);
}

@keyframes authCardAccentPulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  }
  50% {
    transform: scale(1.12);
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.6);
  }
}

/* Mobile Animation: Orbit with Logo */
.auth-loading-mobile {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 24px;
}

.auth-mobile-orbit {
  position: relative;
  width: 100px;
  height: 100px;
}

.auth-orbit-ring {
  position: absolute;
  inset: 0;
  border: 2px solid var(--border);
  border-radius: 50%;
  animation: authOrbitRingSpin 3s linear infinite;
}

.auth-orbit-ring::before {
  content: '';
  position: absolute;
  top: -4px;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 8px;
  background: var(--accent);
  border-radius: 50%;
  box-shadow: 0 0 12px var(--accent);
}

@keyframes authOrbitRingSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.auth-orbit-dot {
  position: absolute;
  width: 6px;
  height: 6px;
  background: var(--green);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  animation: authOrbitDot 2s ease-in-out infinite;
  box-shadow: 0 0 10px var(--green);
}

@keyframes authOrbitDot {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.5);
    opacity: 0.6;
  }
}

.auth-mobile-logo {
  position: absolute;
  inset: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.auth-mobile-logo svg {
  width: 36px;
  height: 36px;
  color: var(--text-dim);
}

.auth-rect {
  fill: none;
  stroke-width: 1.5;
  animation: authRectFill 2s ease-in-out infinite;
}

.auth-rect-1 { animation-delay: 0s; }
.auth-rect-2 { animation-delay: 0.3s; }
.auth-rect-3 { animation-delay: 0.6s; }
.auth-rect-4 { animation-delay: 0.9s; }

@keyframes authRectFill {
  0%, 100% {
    fill: transparent;
    stroke: var(--text-dim);
  }
  50% {
    fill: rgba(59, 130, 246, 0.2);
    stroke: var(--accent);
  }
}

/* Show mobile, hide desktop on small screens */
@media (max-width: 768px) {
  .auth-loading-desktop { display: none; }
  .auth-loading-mobile { display: flex; }

  .auth-loading-title {
    font-size: 22px;
    letter-spacing: 3px;
  }

  .auth-loading-subtitle {
    font-size: 13px;
  }
}

/* =========================
   Custom Confirm Dialog
========================= */
.confirm-dialog-backdrop {
  position: fixed;
  inset: 0;
  z-index: 10001;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  opacity: 1;
  transition: opacity 0.25s ease;
}

.confirm-dialog-backdrop.hidden {
  opacity: 0;
  pointer-events: none;
}

.confirm-dialog {
  position: fixed;
  inset: 0;
  z-index: 10002;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  opacity: 1;
  transition: opacity 0.25s ease;
}

.confirm-dialog.hidden {
  opacity: 0;
  pointer-events: none;
}

.confirm-dialog-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 32px;
  max-width: 380px;
  width: 100%;
  text-align: center;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
  transform: scale(1);
  transition: transform 0.25s ease;
}

.confirm-dialog.hidden .confirm-dialog-card {
  transform: scale(0.95);
}

.confirm-dialog-icon {
  width: 56px;
  height: 56px;
  margin: 0 auto 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface2);
  border-radius: 50%;
  color: var(--accent);
}

.confirm-dialog-icon svg {
  width: 28px;
  height: 28px;
}

.confirm-dialog-title {
  font-size: 20px;
  font-weight: 600;
  color: var(--text);
  margin: 0 0 12px;
  letter-spacing: 0.5px;
}

.confirm-dialog-message {
  font-size: 14px;
  color: var(--text-dim);
  margin: 0 0 28px;
  line-height: 1.5;
}

.confirm-dialog-message #confirm-dialog-name {
  color: var(--accent);
  font-weight: 600;
}

.confirm-dialog-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.confirm-dialog-actions .btn {
  flex: 1;
  padding: 12px 24px;
  font-size: 14px;
  font-weight: 500;
  border-radius: 8px;
  min-width: 100px;
}

.confirm-dialog-actions .btn.danger {
  background: var(--red);
  color: #fff;
  border-color: var(--red);
}

.confirm-dialog-actions .btn.danger:hover {
  background: #c0392b;
  border-color: #c0392b;
}

/* Mobile: more compact confirm dialog */
@media (max-width: 480px) {
  .confirm-dialog {
    padding: 16px;
  }

  .confirm-dialog-card {
    padding: 20px 16px;
    max-width: 300px;
    border-radius: 12px;
  }

  .confirm-dialog-icon {
    width: 40px;
    height: 40px;
    margin-bottom: 12px;
  }

  .confirm-dialog-icon svg {
    width: 20px;
    height: 20px;
  }

  .confirm-dialog-title {
    font-size: 16px;
    margin-bottom: 8px;
  }

  .confirm-dialog-message {
    font-size: 13px;
    margin-bottom: 16px;
    line-height: 1.4;
  }

  .confirm-dialog-actions {
    gap: 8px;
  }

  .confirm-dialog-actions .btn {
    padding: 10px 12px;
    font-size: 13px;
    min-width: 80px;
  }
}
